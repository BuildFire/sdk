/**
 * Minified Bundle for buildfire.js & lory.min.js & carouselLight.js
 */

function Packet(e,t,i){this.id=e||(new Date).toISOString()+Math.random(),this.cmd=t,this.data=i,this.instanceId=null}var buildfire={isFileServer:function(e){return-1!==e.indexOf("s3.amazonaws.com")},isWeb:function(){return 0==window.location.protocol.indexOf("http")},logger:{attachRemoteLogger:function(e){if(document.getElementById("BuildFireAppDebuggerScript"))alert("debugger already attached");else if(e||(e=prompt("Enter is a unique tag to send your logs to")),e){var t=document.querySelector("head"),i=document.createElement("script");i.src="http://debug.buildfire.com/target/target-script-min.js#"+e,i.id="BuildFireAppDebuggerScript",t.appendChild(i)}}},_callbacks:{},parseQueryString:function(){for(var e=window.location.search.substring(1).split("&"),t=new Object,i=0;i<e.length;i++){var n=e[i].split("=");t[decodeURIComponent(n[0])]=decodeURIComponent(n[1]);var a=e[i].indexOf("="),r=e[i].substring(0,a),o=e[i].substring(a+1);t[decodeURIComponent(r)]=decodeURIComponent(o)}return t},options:{},parseMetaOptions:function(){var i={},e=document.head.querySelector("meta[name=buildfire]");e&&e.content&&e.content.split(",").forEach(function(e){var t=e.split("=");i[t[0]]=!(1<t.length)||t[1]});return i},eventManager:{events:{},add:function(e,t,i){if("function"!=typeof t)throw"Invalid event handler";i||this.clear(e),this.events[e]?this.events[e].push(t):this.events[e]=[t];var n=this.events[e];return{clear:function(){for(var e=0;e<n.length;e++)n[e]===t&&n.splice(e,1)}}},clear:function(e){this.events[e]=[]},trigger:function(e,t){if(this.events[e])for(var i=0;i<this.events[e].length;i++)try{this.events[e][i](t)}catch(e){console.error(e)}}},_context:null,get context(){return console.warn("buildfire.context is obsolete and will be removed soon"),buildfire._context},set context(e){buildfire._context=e},init:function(){window.removeEventListener("message",buildfire._postMessageHandler,!1),window.addEventListener("message",buildfire._postMessageHandler,!1),buildfire.options=buildfire.parseMetaOptions(),buildfire.appearance.insertHTMLAttributes(),buildfire.appearance.attachCSSFiles()},_whitelistedCommands:["datastore.triggerOnUpdate","datastore.triggerOnRefresh","userData.triggerOnUpdate","userData.triggerOnRefresh","publicData.triggerOnUpdate","publicData.triggerOnRefresh","appData.triggerOnUpdate","appData.triggerOnRefresh","messaging.onReceivedMessage","history.triggerOnPop","navigation.onBackButtonClick","services.media.audioPlayer.triggerOnEvent","auth.triggerOnLogin","auth.triggerOnLogout","logger.attachRemoteLogger","appearance.triggerOnUpdate","device.triggerOnAppBackgrounded","device.triggerOnAppResumed","notifications.localNotification.onClick","geo.onPositionChange","navigation.triggerOnAppLauncherActive","navigation.triggerOnAppLauncherInactive","colorLib._triggerOnChange","services.publicFiles._triggerOnProgress","services.publicFiles._triggerOnComplete","notes.triggerOnSeekTo","navigation.triggerOnPluginOpened"],_postMessageHandler:function(e){var t;if(e.source!==window)if((t="object"==typeof e.data?e.data:JSON.parse(e.data)).id&&buildfire._callbacks[t.id])buildfire._callbacks[t.id](t.error,t.data),delete buildfire._callbacks[t.id];else if(buildfire._whitelistedCommands.indexOf(t.cmd)+1){for(var i=t.cmd.split("."),n=buildfire,a=buildfire,r=0;r<i.length;r++){if(0<r&&(a=n),!n[i[r]])return;n=n[i[r]]}n.apply(a,[t.data])}else console.warn(window.location.href+" unhandled packet",t)},_sendPacket:function(e,i){"function"!=typeof i&&(i=function(e,t){});var t=e.cmd,n=0,a=0==t.indexOf("datastore")&&0!=t.indexOf("datastore.insert")&&0!=t.indexOf("datastore.bulkInsert")&&0!=t.indexOf("datastore.disableRefresh")&&0!=t.indexOf("datastore.searchAndUpdate")&&0!=t.indexOf("datastore.update"),r=0==t.indexOf("getContext");if(a||r)var o=setTimeout(function(){n<5&&(console.log("calling "+e.cmd+" again. total overall resend attempts "+n),buildfire._sendPacket(e,function(e,t){n--,i(e,t)}),n++)},3e3);buildfire._callbacks[e.id]=function(e,t){clearTimeout(o),i(e,t)},e.fid=buildfire.fid,buildfire._parentPost(e,i)},_parentPost:function(e){parent&&e&&(e.data&&"undefined"!=typeof angular&&(e.data=function e(t){for(var i in t&&delete t.$$hashKey,t){var n=t[i];"object"==typeof n&&(t[i]=e(n))}return t}(e.data)),parent.postMessage(e,"*"))},getContext:function(i){if(buildfire._context)i&&i(null,buildfire._context);else if(window.parsedQuerystring.appcontext)buildfire._context=JSON.parse(window.parsedQuerystring.appcontext),i&&i(null,buildfire._context);else{if(!i)throw"Context not ready. Use callback parameter instead of direct return";var e=new Packet(null,"getContext");buildfire._sendPacket(e,function(e,t){t&&(buildfire._context=t),i&&i(e,t)})}return buildfire._context},navigation:{navigateTo:function(e){e.pluginTypeId&&!e.pluginId&&(e.pluginId=e.pluginTypeId);var t=new Packet(null,"navigation.navigateTo",{pluginId:e.pluginId,instanceId:e.instanceId,title:e.title,folderName:e.folderName,queryString:e.queryString});buildfire._sendPacket(t)},navigateToSocialWall:function(t,i){var e="697f1612-8208-4870-93f9-555c65103578",n="7b3d82bf-e5f1-4b2e-82bf-966d2ab0340d";function a(e,t,i){e.pluginId=t;var n=new Packet(null,"navigation.navigateTo",{pluginId:e.pluginId,instanceId:e.instanceId,title:e.title,folderName:e.folderName,queryString:e.queryString});buildfire._sendPacket(n,i)}i||(i=console.warn),t||(t={}),a(t,e,function(e){if(!e)return i(null,{status:"completed"});a(t,n,i)})},navigateHome:function(){var e=new Packet(null,"navigation.navigateHome");buildfire._sendPacket(e)},scrollTop:function(e){var t=new Packet(null,"navigation.scrollTop");buildfire._sendPacket(t,e)},openWindow:function(e,t,i){t||(t="_blank"),i||(i=function(){console.info("openWindow:: completed")});var n=new Packet(null,"actionItems.execute",{action:"linkToWeb",url:e,openIn:t},i);buildfire._sendPacket(n,i)},_goBackOne:function(){buildfire._sendPacket(new Packet(null,"navigation.navigateBack"))},onBackButtonClick:function(){buildfire.navigation._goBackOne()},restoreBackButtonClick:function(){buildfire.navigation.onBackButtonClick=function(){buildfire.navigation._goBackOne()}},goBack:function(){buildfire.navigation.onBackButtonClick()},makeSafeLinks:function(e){var t=this;"object"!=typeof e&&(e=document.getElementById(e));for(var i=e.querySelectorAll("a[href^=http], a[href^=https],a[href^=www]"),n=0;n<i.length;n++)i[n].setAttribute("inAppBrowser",!0),i[n].addEventListener("click",function(e){e.preventDefault(),t.openWindow(this.href,this.target,null)},!1)},navigateEmulator:function(){buildfire._sendPacket(new Packet(null,"navigation.navigateEmulator"))},onAppLauncherActive:function(e,t){return buildfire.eventManager.add("appLauncherActive",e,t)},onAppLauncherInactive:function(e,t){return buildfire.eventManager.add("appLauncherInactive",e,t)},triggerOnAppLauncherActive:function(e){return buildfire.eventManager.trigger("appLauncherActive",e)},triggerOnAppLauncherInactive:function(e){return buildfire.eventManager.trigger("appLauncherInactive",e)},onPluginOpened:function(e,t){return buildfire.eventManager.add("pluginOpened",e,t)},triggerOnPluginOpened:function(e){return buildfire.eventManager.trigger("pluginOpened",e)}},getFrameType:function(){var e="launcherPluginv",t="controlIFrame",i="LAUNCHER_PLUGIN",n="CONTROL_FRAME",a="UNKNOWN",r=buildfire.fid;return r&&-1<r.indexOf(e)?i:r&&-1<r.indexOf(t)?n:a},appearance:{ready:function(){var e=new Packet(null,"appearance.ready");buildfire._sendPacket(e)},_defaultTheme:{appName:"",colors:{backgroundColor:"#ffffff",bodyText:"#858585",dangerTheme:"#f24965",defaultTheme:"#07a05e",footerMenuBackgroundColor:"#ffffff",footerMenuIconColor:"#45cae6",headerText:"#000000",icons:"#45cae6",infoTheme:"#66d6ed",primaryTheme:"#45cae6",successTheme:"#0ac775",titleBar:"#0ac775",titleBarTextAndIcons:"#ffffff",warningTheme:"#ffcf40"},fontId:"Lato",fontName:"Lato"},getAppTheme:function(i){buildfire.getContext(function(e,t){e&&i(e,null),t?(buildfire.isWeb()&&!t.appTheme&&(t.appTheme=buildfire.appearance._defaultTheme),i(null,t.appTheme)):i(null,null)})},_forceCSSRender:function(){if(0<window.location.href.indexOf("widget")){var e=document.getElementsByTagName("html")[0],t=document.createElement("style");t.type="text/css",t.innerHTML="body{position:relative !important; z-index:1 !important;} .plugin-slide{position:relative !important;} .plugin-slide, .plugin-slide img{transform: translateZ(0) !important;",e.appendChild(t)}},insertHTMLAttributes:function(){var i=document.getElementsByTagName("html")[0];0<window.location.href.indexOf("widget")?(i.setAttribute("buildfire","widget"),i.setAttribute("type","app")):i.setAttribute("buildfire","control");navigator.appVersion;var e,t,n,a=navigator.userAgent,r=navigator.appName,o=""+parseFloat(navigator.appVersion),d=parseInt(navigator.appVersion,10),l="Unknown OS";-1!=(t=a.indexOf("Opera"))?(r="Opera",o=a.substring(t+6),-1!=(t=a.indexOf("Version"))&&(o=a.substring(t+8))):-1!=(t=a.indexOf("MSIE"))?(r="Microsoft Internet Explorer",o=a.substring(t+5)):-1!=(t=a.indexOf("Chrome"))?(r="Chrome",o=a.substring(t+7)):-1!=(t=a.indexOf("Safari"))?(r="Safari",o=a.substring(t+7),-1!=(t=a.indexOf("Version"))&&(o=a.substring(t+8))):-1!=(t=a.indexOf("Firefox"))?(r="Firefox",o=a.substring(t+8)):(e=a.lastIndexOf(" ")+1)<(t=a.lastIndexOf("/"))&&(r=a.substring(e,t),o=a.substring(t+1),r.toLowerCase()==r.toUpperCase()&&(r=navigator.appName)),-1!=(n=o.indexOf(";"))&&(o=o.substring(0,n)),-1!=(n=o.indexOf(" "))&&(o=o.substring(0,n)),d=parseInt(""+o,10),isNaN(d)&&(o=""+parseFloat(navigator.appVersion),d=parseInt(navigator.appVersion,10)),-1!=navigator.appVersion.indexOf("Win")&&(l="Windows"),-1!=navigator.appVersion.indexOf("Mac")&&(l="MacOS"),-1!=navigator.appVersion.indexOf("X11")&&(l="UNIX"),-1!=navigator.appVersion.indexOf("Linux")&&(l="Linux"),i.setAttribute("os",l),i.setAttribute("browser",r),i.setAttribute("majorVersion",d),i.setAttribute("fullVersion",o);var c=navigator.userAgent||navigator.vendor||window.opera;if(c.match(/iPad/i)||c.match(/iPhone/i)||c.match(/iPod/i)){var u=new Packet(null,"appearance.getFooterMenu");buildfire._sendPacket(u,function(e,t){e?console.error(e):t&&t.settings&&!t.settings.turnOnFooterMenu&&i.setAttribute("safe-area","true")})}},getCSSFiles:function(e){var t=new Packet(null,"appearance.getCSSFiles");buildfire._sendPacket(t,e)},attachCSSFiles:function(){var e=[],t="",i=!(!buildfire.options||!buildfire.options.disableBootstrap)&&buildfire.options.disableBootstrap,n=!(!buildfire.options||!buildfire.options.disableTheme)&&buildfire.options.disableTheme,a=!(!buildfire.options||!buildfire.options.enableMDTheme)&&buildfire.options.enableMDTheme;if(!n&&!a){if(n||i||e.push("styles/bootstrap.css"),0<=window.location.pathname.indexOf("/control/"))e.push("styles/siteStyle.css")&&e.push("styles/pluginScreen.css");else!(!buildfire.options||!buildfire.options.disableAppStyles)&&buildfire.options.disableAppStyles||e.push("styles/appStyle.css");for(var r=document.getElementsByTagName("script"),o=0;o<r.length;o++){var d=r[o].src;if(0<d.indexOf("buildfire.js")){t=d.replace("/scripts/buildfire.js","");break}if(0<d.indexOf("buildfire.min.js")){t=d.replace("/scripts/buildfire.min.js","");break}if(d.match(/(\/scripts\/_bundle\S+.js)/gi)){t=d.replace(/(\/scripts\/_bundle\S+.js)/gi,"");break}}}a&&buildfire.appearance.getAppTheme(function(e,t){var i=document.createElement("style");i.id="appMDTheme",i.type="text/css";var n="";void 0!==t.fontId&&"Arial"!==t.fontId&&"Sans-Serif"!==t.fontId&&"Helvetica"!==t.fontId&&"Shadows+into+Light"!==t.fontId&&"Asap+condensed"!==t.fontId&&(n+="@import url('https://fonts.googleapis.com/css?family="+t.fontName+"');"),n+=':root {  --mdc-typography-font-family: unquote("'+t.fontName+', sans-serif");  --mdc-theme-primary:'+t.colors.primaryTheme+";  --mdc-theme-secondary:"+t.colors.successTheme+";  --mdc-theme-surface:"+t.colors.backgroundColor+";  --mdc-theme-background:"+t.colors.backgroundColor+";  --mdc-theme-error:"+t.colors.dangerTheme+";  --mdc-theme-on-background:"+t.colors.bodyText+";  --mdc-theme-on-primary: white;  --mdc-theme-on-secondary: white;  --mdc-theme-on-error: white;  --mdc-theme-on-surface:"+t.colors.bodyText+";  --mdc-theme-text-primary-on-background:"+t.colors.bodyText+";  --mdc-theme-text-secondary-on-background:"+t.colors.bodyText+";  --mdc-theme-text-disabled-on-background:"+t.colors.bodyText+";  --mdc-theme-text-primary-on-light: white;  --mdc-theme-text-secondary-on-light: white;  --mdc-theme-text-hint-on-light: white;  --mdc-theme-text-disabled-on-light: white;  --mdc-theme-text-icon-on-light:  white;  --mdc-theme-text-primary-on-dark: white;  --mdc-theme-text-secondary-on-dark: white;  --mdc-theme-text-hint-on-dark: white;  --mdc-theme-text-disabled-on-dark: white;  --mdc-theme-text-icon-on-dark: white;  --mdc-theme-text-icon-on-background:"+t.colors.icons+";}*:not(i):not(.material-icons):not(.mdc-icon):not(.mdc-button__icon):not(.mdc-icon-button__icon){ font-family: "+t.fontName+", sans-serif !important }.mdc-typography { font-family: "+t.fontName+", sans-serif }.mdc-typography--headline1 { font-family: "+t.fontName+", sans-serif }.mdc-typography--headline2 { font-family: "+t.fontName+", sans-serif }.mdc-typography--headline3 { font-family: "+t.fontName+", sans-serif }.mdc-typography--headline4 { font-family: "+t.fontName+", sans-serif }.mdc-typography--headline5 { font-family: "+t.fontName+", sans-serif }.mdc-typography--headline6 { font-family: "+t.fontName+", sans-serif }.mdc-typography--subtitle1 { font-family: "+t.fontName+", sans-serif }.mdc-typography--subtitle2 { font-family: "+t.fontName+", sans-serif }.mdc-typography--body1 { font-family: "+t.fontName+", sans-serif }, sans-serif.mdc-typography--body2 { font-family: "+t.fontName+", sans-serif }.mdc-typography--caption { font-family: "+t.fontName+", sans-serif }.mdc-typography--button { font-family: "+t.fontName+", sans-serif }.mdc-typography--overline { font-family: "+t.fontName+", sans-serif }.mdc-theme--primary { color: #6200ee !important; color: var(--mdc-theme-primary, #6200ee) !important; }.mdc-theme--secondary { color: #018786 !important; color: var(--mdc-theme-secondary, #018786) !important; }.mdc-theme--background { background-color: #fff; background-color: var(--mdc-theme-background, #fff);}.mdc-theme--surface { background-color: #fff; background-color: var(--mdc-theme-surface, #fff);}.mdc-theme--error { color: #b00020 !important; color: var(--mdc-theme-error, #b00020) !important;}.mdc-theme--on-primary { color: #fff !important; color: var(--mdc-theme-on-primary, #fff) !important;}.mdc-theme--on-secondary { color: #fff !important; color: var(--mdc-theme-on-secondary, #fff) !important;}.mdc-theme--on-surface { color: #000 !important; color: var(--mdc-theme-on-surface, #000) !important;}.mdc-theme--on-error { color: #fff !important; color: var(--mdc-theme-on-error, #fff) !important;}.mdc-theme--text-primary-on-background { color: rgba(0, 0, 0, 0.87) !important; color: var(--mdc-theme-text-primary-on-background, rgba(0, 0, 0, 0.87)) !important;}.mdc-theme--text-secondary-on-background { color: rgba(0, 0, 0, 0.54) !important; color: var(--mdc-theme-text-secondary-on-background, rgba(0, 0, 0, 0.54)) !important;}.mdc-theme--text-hint-on-background {color: rgba(0, 0, 0, 0.38) !important; color: var(--mdc-theme-text-hint-on-background, rgba(0, 0, 0, 0.38)) !important;}.mdc-theme--text-disabled-on-background {color: rgba(0, 0, 0, 0.38) !important; color: var(--mdc-theme-text-disabled-on-background, rgba(0, 0, 0, 0.38)) !important;}.mdc-theme--text-icon-on-background { color: rgba(0, 0, 0, 0.38) !important; color: var(--mdc-theme-text-icon-on-background, rgba(0, 0, 0, 0.38)) !important;}.mdc-theme--text-primary-on-light { color: rgba(0, 0, 0, 0.87) !important; color: var(--mdc-theme-text-primary-on-light, rgba(0, 0, 0, 0.87)) !important;}.mdc-theme--text-secondary-on-light { color: rgba(0, 0, 0, 0.54) !important; color: var(--mdc-theme-text-secondary-on-light, rgba(0, 0, 0, 0.54)) !important;}.mdc-theme--text-hint-on-light { color: rgba(0, 0, 0, 0.38) !important; color: var(--mdc-theme-text-hint-on-light, rgba(0, 0, 0, 0.38)) !important;}.mdc-theme--text-disabled-on-light { color: rgba(0, 0, 0, 0.38) !important; color: var(--mdc-theme-text-disabled-on-light, rgba(0, 0, 0, 0.38)) !important;}.mdc-theme--text-icon-on-light { color: rgba(0, 0, 0, 0.38) !important; color: var(--mdc-theme-text-icon-on-light, rgba(0, 0, 0, 0.38)) !important;}.mdc-theme--text-primary-on-dark { color: white !important; color: var(--mdc-theme-text-primary-on-dark, white) !important;}.mdc-theme--text-secondary-on-dark { color: rgba(255, 255, 255, 0.7) !important; color: var(--mdc-theme-text-secondary-on-dark, rgba(255, 255, 255, 0.7)) !important;}.mdc-theme--text-hint-on-dark { color: rgba(255, 255, 255, 0.5) !important; color: var(--mdc-theme-text-hint-on-dark, rgba(255, 255, 255, 0.5)) !important;}.mdc-theme--text-disabled-on-dark { color: rgba(255, 255, 255, 0.5) !important; color: var(--mdc-theme-text-disabled-on-dark, rgba(255, 255, 255, 0.5)) !important;}.mdc-theme--text-icon-on-dark { color: rgba(255, 255, 255, 0.5) !important; color: var(--mdc-theme-text-icon-on-dark, rgba(255, 255, 255, 0.5)) !important;}.mdc-theme--primary-bg { background-color: #6200ee !important; background-color: var(--mdc-theme-primary, #6200ee) !important;}.mdc-theme--secondary-bg { background-color: #018786 !important; background-color: var(--mdc-theme-secondary, #018786) !important;}",i.innerHTML=n,(document.head||document.body||document).appendChild(i)}),"/"!=t[t.length-1]&&(t+="/");for(o=0;o<e.length;o++)document.write('<link rel="stylesheet" href="'+t+e[o]+'"/>')},disableFastClickOnLoad:!1,attachFastClick:function(){for(var e,t=document.getElementsByTagName("script"),i=0;i<t.length;i++)if(0<t[i].src.indexOf("buildfire.js"))e=t[i].src.replace("buildfire.js","fastclick.js");else if(0<t[i].src.indexOf("buildfire.min.js"))e=t[i].src.replace("buildfire.min.js","fastclick.js");else if(0<t[i].src.indexOf("fastclick.js"))return void console.warn("fastclick already attached");if(e){var n=document.createElement("script");n.src=e,n.type="text/javascript",n.onload=function(){"undefined"==typeof FastClick?console.error("fastclick undefined"):FastClick.attach(document.body)},document.body.appendChild(n)}else console.warn("fastclick.js requires a buildfire.js reference.")},applyFastClick:function(e){e||(e=document.body),"undefined"==typeof FastClick?console.error("fastclick undefined"):FastClick.attach(e)},attachAppThemeCSSFiles:function(e,t,i){this._attachAppThemeCSSFiles(i+"/api/app/styles/appTheme.css?appId="+e+"&liveMode="+t+"&v="+buildfire.appearance.CSSBusterCounter)},attachLocalAppThemeCSSFiles:function(e){this._attachAppThemeCSSFiles("../../../../app/scripts/offline/appTheme"+e+".css")},_attachAppThemeCSSFiles:function(e){var t=document.createElement("link");buildfire.appearance.CSSBusterCounter=0,t.setAttribute("rel","stylesheet"),t.setAttribute("type","text/css"),t.setAttribute("id","appThemeCSS"),t.setAttribute("href",e),document.getElementsByTagName("head")[0].appendChild(t)},_resizedTo:0,autosizeContainer:function(){var e;try{e=Math.max(document.documentElement.clientHeight,document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight)}catch(e){}if(e&&buildfire.appearance._resizedTo!=e&&!(e<100)){var t=new Packet(null,"appearance.autosizeContainer",{height:e});buildfire._sendPacket(t),buildfire.appearance._resizedTo=e}},setHeaderVisibility:function(e){var t=new Packet(null,"appearance.setHeaderVisibility",e);buildfire._sendPacket(t)},triggerOnUpdate:function(){var e=document.getElementById("appThemeCSS");e&&(e.href=e.href.replace("&v="+buildfire.appearance.CSSBusterCounter,"&v="+ ++buildfire.appearance.CSSBusterCounter))},titlebar:{show:function(){var e=new Packet(null,"appearance.titlebar.show");buildfire._sendPacket(e)},hide:function(){var e=new Packet(null,"appearance.titlebar.hide");buildfire._sendPacket(e)}}},analytics:{trackAction:function(e,t){var i=new Packet(null,"analytics.trackActionCommand",{value:e,metadata:t});buildfire._sendPacket(i)},trackView:function(e,t){var i=new Packet(null,"analytics.trackViewCommand",{value:e,metadata:t});buildfire._sendPacket(i)},registerEvent:function(e,t,i){"function"==typeof t&&(i=t,t=null);var n=new Packet(null,"analytics.registerPluginEvent",{data:e,options:t});buildfire._sendPacket(n,i)},unregisterEvent:function(e,t){var i=new Packet(null,"analytics.unregisterPluginEvent",{key:e});buildfire._sendPacket(i,t)},showReports:function(e,t){e||(e={});var i=new Packet(null,"analytics.showReports",e);buildfire._sendPacket(i,t)}},datastore:{get:function(e,t){var i=typeof e;"undefined"==i?e="":"function"==i&&void 0===t&&(t=e,e="");var n=new Packet(null,"datastore.get",{tag:e});buildfire._sendPacket(n,t)},getWithDynamicData:function(e,t){var i=typeof e;"undefined"==i?e="":"function"==i&&void 0===t&&(t=e,e="");var n=new Packet(null,"datastore.get",{tag:e,withDynamicData:!0});buildfire._sendPacket(n,t)},getById:function(e,t,i){"function"==typeof e&&void 0===i&&(i=e,e="");var n=typeof t;"undefined"==n?t="":"function"==n&&void 0===i&&(i=t,t="");var a=new Packet(null,"datastore.get",{tag:t,id:e});buildfire._sendPacket(a,i)},save:function(e,t,i){var n=typeof t;"undefined"==n?t="":"function"==n&&void 0===i&&(i=t,t="");var a=new Packet(null,"datastore.save",{tag:t,obj:e});buildfire._sendPacket(a,function(e,t){t&&buildfire.datastore.triggerOnUpdate(t),i&&i(e,t)})},insert:function(e,t,i,n){var a=typeof i;"undefined"==a?i=!1:"function"==a&&void 0===n&&(n=i,i=!1);var r=typeof t;"undefined"==r?t="":"function"==r&&void 0===n&&(n=t,t="");var o=new Packet(null,"datastore.insert",{tag:t,obj:e,checkDuplicate:i});buildfire._sendPacket(o,function(e,t){t&&buildfire.datastore.triggerOnUpdate(t),n(e,t)})},bulkInsert:function(e,t,i){if(e.constructor===Array){var n=typeof t;"undefined"==n?t="":"function"==n&&void 0===i&&(i=t,t="");var a=new Packet(null,"datastore.bulkInsert",{tag:t,obj:e});buildfire._sendPacket(a,function(e,t){t&&buildfire.datastore.triggerOnUpdate(t),i(e,t)})}else i({code:"error",message:"the data should be an array"},null)},update:function(e,t,i,n){var a=typeof i;"undefined"==a?i="":"function"==a&&void 0===n&&(n=i,i="");var r=new Packet(null,"datastore.update",{tag:i,id:e,obj:t});buildfire._sendPacket(r,function(e,t){t&&buildfire.datastore.triggerOnUpdate(t),n&&n(e,t)})},searchAndUpdate:function(e,t,i,n){var a=typeof i;"undefined"==a?i="":"function"==a&&void 0===n&&(n=i,i="");var r=new Packet(null,"datastore.searchAndUpdate",{tag:i,search:e,obj:t});buildfire._sendPacket(r,function(e,t){t&&buildfire.datastore.triggerOnUpdate(t),n&&n(e,t)})},delete:function(e,t,i){var n=typeof t;"undefined"==n?t="":"function"==n&&void 0===i&&(i=t,t="");var a=new Packet(null,"datastore.delete",{tag:t,id:e});buildfire._sendPacket(a,function(e,t){t&&buildfire.datastore.triggerOnUpdate(t),i&&i(e,t)})},search:function(e,t,i){var n=typeof t;"undefined"==n?t="":"function"==n&&void 0===i&&(i=t,t=""),void 0===e&&(e={filter:{}}),e.filter||(e.filter={});var a=new Packet(null,"datastore.search",{tag:t,obj:e});buildfire._sendPacket(a,function(e,t){i(e,t)})},onUpdate:function(e,t){return buildfire.eventManager.add("datastoreOnUpdate",e,t)},triggerOnUpdate:function(e){buildfire.eventManager.trigger("datastoreOnUpdate",e)},onRefresh:function(e,t){return buildfire.eventManager.add("datastoreOnRefresh",e,t)},triggerOnRefresh:function(e){buildfire.eventManager.trigger("datastoreOnRefresh",e)},disableRefresh:function(){var e=new Packet(null,"datastore.disableRefresh");buildfire._sendPacket(e)}},userData:{get:function(e,t){var i=typeof e;"undefined"==i?e="":"function"==i&&void 0===t&&(t=e,e="");var n=new Packet(null,"userData.get",{tag:e});buildfire._sendPacket(n,t)},getById:function(e,t,i){"function"==typeof e&&void 0===i&&(i=e,e="");var n=typeof t;"undefined"==n?t="":"function"==n&&void 0===i&&(i=t,t="");var a=new Packet(null,"userData.get",{tag:t,id:e});buildfire._sendPacket(a,i)},save:function(e,t,i,n){var a=typeof t;"undefined"==a?t="":"function"==a&&void 0===n&&(n=t,t="");var r=typeof i;"undefined"==r?i="":"function"==r&&void 0===n&&(n=i,i="");var o=new Packet(null,"userData.save",{tag:t,userToken:i,obj:e});buildfire._sendPacket(o,function(e,t){t&&buildfire.userData.triggerOnUpdate(t),n&&n(e,t)})},insert:function(e,t,i,n,a){"undefined"==(r=typeof i)?i="":"function"==r&&void 0===a&&(a=i,i="");var r,o=typeof n;"undefined"==o?n=!1:"function"==o&&void 0===a&&(a=n,n=!1),"undefined"==(r=typeof i)?i="":"function"==r&&void 0===a&&(a=i,i="");var d=typeof t;"undefined"==d?t="":"function"==d&&void 0===a&&(a=t,t="");var l=new Packet(null,"userData.insert",{tag:t,userToken:i,obj:e,checkDuplicate:n});buildfire._sendPacket(l,function(e,t){t&&buildfire.userData.triggerOnUpdate(t),a(e,t)});var c=!1;if(e&&e._buildfire&&e._buildfire.index&&Object.keys(e._buildfire.index))for(var u=Object.keys(e._buildfire.index),s=["string1","date1","number1","array1","text"],f=0;f<u.length;f++){var g=u[f];if(-1<s.indexOf(g)&&e._buildfire.index[g]){c=!0;break}}c||console.warn("WARNING: no index on inserted data! Please see https://github.com/BuildFire/sdk/wiki/User-Data-and-Public-Data-Indexed-Fields")},bulkInsert:function(e,t,i,n){if(e.constructor===Array){var a=typeof i;"undefined"==a?i="":"function"==a&&void 0===n&&(n=i,i="");var r=typeof t;"undefined"==r?t="":"function"==r&&void 0===n&&(n=t,t="");var o=new Packet(null,"userData.bulkInsert",{tag:t,userToken:i,obj:e});buildfire._sendPacket(o,function(e,t){t&&buildfire.userData.triggerOnUpdate(t),n(e,t)})}else n({code:"error",message:"the data should be an array"},null)},update:function(e,t,i,n,a){var r=typeof n;"undefined"==r?n="":"function"==r&&void 0===a&&(a=n,n="");var o=typeof i;"undefined"==o?i="":"function"==o&&void 0===a&&(a=i,i="");var d=new Packet(null,"userData.update",{tag:i,userToken:n,id:e,obj:t});buildfire._sendPacket(d,function(e,t){t&&buildfire.userData.triggerOnUpdate(t),a&&a(e,t)})},searchAndUpdate:function(e,t,i,n,a){var r=typeof n;"undefined"==r?n="":"function"==r&&void 0===a&&(a=n,n="");var o=typeof i;"undefined"==o?i="":"function"==o&&void 0===a&&(a=i,i="");var d=new Packet(null,"userData.searchAndUpdate",{tag:i,userToken:n,search:e,obj:t});if(buildfire._sendPacket(d,function(e,t){t&&buildfire.userData.triggerOnUpdate(t),a&&a(e,t)}),!e.$text||!e.$text.$search){for(var l=!1,c=Object.keys(e),u=0;u<c.length;u++){var s=c[u];if(-1<s.indexOf("_buildfire.index")&&e[s]){l=!0;break}}l||console.warn("WARNING: no index on search filter! Please see https://github.com/BuildFire/sdk/wiki/User-Data-and-Public-Data-Indexed-Fields. Filter: "+JSON.stringify(e))}},delete:function(e,t,i,n){var a=typeof i;"undefined"==a?i="":"function"==a&&void 0===n&&(n=i,i="");var r=typeof t;"undefined"==r?t="":"function"==r&&void 0===n&&(n=t,t="");var o=new Packet(null,"userData.delete",{tag:t,userToken:i,id:e});buildfire._sendPacket(o,function(e,t){t&&buildfire.userData.triggerOnUpdate(t),n&&n(e,t)})},search:function(e,t,i){var n=typeof t;"undefined"==n?t="":"function"==n&&void 0===i&&(i=t,t=""),void 0===e&&(e={filter:{}}),e.filter||(e.filter={});var a=new Packet(null,"userData.search",{tag:t,obj:e});if(buildfire._sendPacket(a,function(e,t){i(e,t)}),!e.filter.$text||!e.filter.$text.$search){for(var r=!1,o=Object.keys(e.filter),d=0;d<o.length;d++){var l=o[d];if(-1<l.indexOf("_buildfire.index")&&e.filter[l]){r=!0;break}}r||console.warn("WARNING: no index on search filter! Please see https://github.com/BuildFire/sdk/wiki/User-Data-and-Public-Data-Indexed-Fields. Filter: "+JSON.stringify(e.filter))}},onUpdate:function(e,t){return buildfire.eventManager.add("userDataOnUpdate",e,t)},triggerOnUpdate:function(e){buildfire.eventManager.trigger("userDataOnUpdate",e)},onRefresh:function(e,t){return buildfire.eventManager.add("userDataOnRefresh",e,t)},triggerOnRefresh:function(e){buildfire.eventManager.trigger("userDataOnRefresh",e)},disableRefresh:function(){var e=new Packet(null,"userData.disableRefresh");buildfire._sendPacket(e)}},publicData:{get:function(e,t){var i=typeof e;"undefined"==i?e="":"function"==i&&void 0===t&&(t=e,e="");var n=new Packet(null,"publicData.get",{tag:e});buildfire._sendPacket(n,t)},getById:function(e,t,i){"function"==typeof e&&void 0===i&&(i=e,e="");var n=typeof t;"undefined"==n?t="":"function"==n&&void 0===i&&(i=t,t="");var a=new Packet(null,"publicData.get",{tag:t,id:e});buildfire._sendPacket(a,i)},save:function(e,t,i){var n=typeof t;"undefined"==n?t="":"function"==n&&void 0===i&&(i=t,t="");var a=new Packet(null,"publicData.save",{tag:t,obj:e});buildfire._sendPacket(a,function(e,t){t&&buildfire.publicData.triggerOnUpdate(t),i&&i(e,t)})},insert:function(e,t,i,n){var a=typeof i;"undefined"==a?i=!1:"function"==a&&void 0===n&&(n=i,i=!1);var r=typeof t;"undefined"==r?t="":"function"==r&&void 0===n&&(n=t,t="");var o=new Packet(null,"publicData.insert",{tag:t,obj:e,checkDuplicate:i});buildfire._sendPacket(o,function(e,t){t&&buildfire.publicData.triggerOnUpdate(t),n(e,t)});var d=!1;if(e&&e._buildfire&&e._buildfire.index&&Object.keys(e._buildfire.index))for(var l=Object.keys(e._buildfire.index),c=["string1","date1","number1","array1","text"],u=0;u<l.length;u++){var s=l[u];if(-1<c.indexOf(s)&&e._buildfire.index[s]){d=!0;break}}d||console.warn("WARNING: no index on inserted data! Please see https://github.com/BuildFire/sdk/wiki/User-Data-and-Public-Data-Indexed-Fields")},bulkInsert:function(e,t,i){if(e.constructor===Array){var n=typeof t;"undefined"==n?t="":"function"==n&&void 0===i&&(i=t,t="");var a=new Packet(null,"publicData.bulkInsert",{tag:t,obj:e});buildfire._sendPacket(a,function(e,t){t&&buildfire.publicData.triggerOnUpdate(t),i(e,t)})}else i({code:"error",message:"the data should be an array"},null)},update:function(e,t,i,n){var a=typeof i;"undefined"==a?i="":"function"==a&&void 0===n&&(n=i,i="");var r=new Packet(null,"publicData.update",{tag:i,id:e,obj:t});buildfire._sendPacket(r,function(e,t){t&&buildfire.publicData.triggerOnUpdate(t),n&&n(e,t)})},searchAndUpdate:function(e,t,i,n){var a=typeof i;"undefined"==a?i="":"function"==a&&void 0===n&&(n=i,i="");var r=new Packet(null,"publicData.searchAndUpdate",{tag:i,search:e,obj:t});if(buildfire._sendPacket(r,function(e,t){t&&buildfire.publicData.triggerOnUpdate(t),n&&n(e,t)}),!e.$text||!e.$text.$search){for(var o=!1,d=Object.keys(e),l=0;l<d.length;l++){var c=d[l];if(-1<c.indexOf("_buildfire.index")&&e[c]){o=!0;break}}o||console.warn("WARNING: no index on search filter! Please see https://github.com/BuildFire/sdk/wiki/User-Data-and-Public-Data-Indexed-Fields. Filter: "+JSON.stringify(e))}},delete:function(e,t,i){var n=typeof t;"undefined"==n?t="":"function"==n&&void 0===i&&(i=t,t="");var a=new Packet(null,"publicData.delete",{tag:t,id:e});buildfire._sendPacket(a,function(e,t){t&&buildfire.publicData.triggerOnUpdate(t),i&&i(e,t)})},search:function(e,t,i){var n=typeof t;"undefined"==n?t="":"function"==n&&void 0===i&&(i=t,t=""),void 0===e&&(e={filter:{}}),e.filter||(e.filter={});var a=new Packet(null,"publicData.search",{tag:t,obj:e});if(buildfire._sendPacket(a,function(e,t){i(e,t)}),!e.filter.$text||!e.filter.$text.$search){for(var r=!1,o=Object.keys(e.filter),d=0;d<o.length;d++){var l=o[d];if(-1<l.indexOf("_buildfire.index")&&e.filter[l]){r=!0;break}}r||console.warn("WARNING: no index on search filter! Please see https://github.com/BuildFire/sdk/wiki/User-Data-and-Public-Data-Indexed-Fields. Filter: "+JSON.stringify(e.filter))}},onUpdate:function(e,t){return buildfire.eventManager.add("publicDataOnUpdate",e,t)},triggerOnUpdate:function(e){buildfire.eventManager.trigger("publicDataOnUpdate",e)},onRefresh:function(e,t){return buildfire.eventManager.add("publicDataOnRefresh",e,t)},triggerOnRefresh:function(e){buildfire.eventManager.trigger("publicDataOnRefresh",e)},disableRefresh:function(){var e=new Packet(null,"publicData.disableRefresh");buildfire._sendPacket(e)}},appData:{get:function(e,t){if(this._isTagValid(e,t)){var i=new Packet(null,"appData.get",{tag:e});buildfire._sendPacket(i,t)}},getById:function(e,t,i){if("function"==typeof e&&void 0===i&&(i=e,e=""),this._isTagValid(t,i)){var n=new Packet(null,"appData.get",{tag:t,id:e});buildfire._sendPacket(n,i)}},save:function(e,t,i){if(this._isTagValid(t,i)){var n=new Packet(null,"appData.save",{tag:t,obj:e});buildfire._sendPacket(n,function(e,t){t&&buildfire.appData.triggerOnUpdate(t),i&&i(e,t)})}},insert:function(e,t,i,n){var a=typeof i;if("undefined"==a?i=!1:"function"==a&&void 0===n&&(n=i,i=!1),this._isTagValid(t,n)){var r=new Packet(null,"appData.insert",{tag:t,obj:e,checkDuplicate:i});buildfire._sendPacket(r,function(e,t){t&&buildfire.appData.triggerOnUpdate(t),n(e,t)});var o=!1;if(e&&e._buildfire&&e._buildfire.index&&Object.keys(e._buildfire.index))for(var d=Object.keys(e._buildfire.index),l=["string1","date1","number1","array1","text"],c=0;c<d.length;c++){var u=d[c];if(-1<l.indexOf(u)&&e._buildfire.index[u]){o=!0;break}}o||console.warn("WARNING: no index on inserted data! Please see https://github.com/BuildFire/sdk/wiki/User-Data-and-Public-Data-Indexed-Fields")}},bulkInsert:function(e,t,i){if(e.constructor===Array){if(this._isTagValid(t,i)){var n=new Packet(null,"appData.bulkInsert",{tag:t,obj:e});buildfire._sendPacket(n,function(e,t){t&&buildfire.appData.triggerOnUpdate(t),i(e,t)})}}else i({code:"error",message:"the data should be an array"},null)},update:function(e,t,i,n){if(this._isTagValid(i,n)){var a=new Packet(null,"appData.update",{tag:i,id:e,obj:t});buildfire._sendPacket(a,function(e,t){t&&buildfire.appData.triggerOnUpdate(t),n&&n(e,t)})}},searchAndUpdate:function(e,t,i,n){if(this._isTagValid(i,n)){var a=new Packet(null,"appData.searchAndUpdate",{tag:i,search:e,obj:t});if(buildfire._sendPacket(a,function(e,t){t&&buildfire.appData.triggerOnUpdate(t),n&&n(e,t)}),!e.$text||!e.$text.$search){for(var r=!1,o=Object.keys(e),d=0;d<o.length;d++){var l=o[d];if(-1<l.indexOf("_buildfire.index")&&e[l]){r=!0;break}}r||console.warn("WARNING: no index on search filter! Please see https://github.com/BuildFire/sdk/wiki/User-Data-and-Public-Data-Indexed-Fields. Filter: "+JSON.stringify(e))}}},delete:function(e,t,i){if(this._isTagValid(t,i)){var n=new Packet(null,"appData.delete",{tag:t,id:e});buildfire._sendPacket(n,function(e,t){t&&buildfire.appData.triggerOnUpdate(t),i&&i(e,t)})}},search:function(e,t,i){if(this._isTagValid(t,i)){if(void 0===e&&(e={filter:{}}),e.filter||(e.filter={}),!e.filter.$text||!e.filter.$text.$search){for(var n=!1,a=Object.keys(e.filter),r=0;r<a.length;r++){var o=a[r];if(-1<o.indexOf("_buildfire.index")&&e.filter[o]){n=!0;break}}n||console.warn("WARNING: no index on search filter! Please see https://github.com/BuildFire/sdk/wiki/User-Data-and-Public-Data-Indexed-Fields. Filter: "+JSON.stringify(e.filter))}var d=new Packet(null,"appData.search",{tag:t,obj:e});buildfire._sendPacket(d,function(e,t){i(e,t)})}},onUpdate:function(e,t){return buildfire.eventManager.add("appDataOnUpdate",e,t)},triggerOnUpdate:function(e){buildfire.eventManager.trigger("appDataOnUpdate",e)},onRefresh:function(e,t){return buildfire.eventManager.add("appDataOnRefresh",e,t)},triggerOnRefresh:function(e){buildfire.eventManager.trigger("appDataOnRefresh",e)},disableRefresh:function(){var e=new Packet(null,"appData.disableRefresh");buildfire._sendPacket(e)},_isTagValid:function(e,t){var i=!1;return"string"==typeof e&&e&&(i=!0),i||("function"==typeof e&&(t=e),"function"!=typeof t&&(t=console.warn),t({code:"error",message:"tag is required for appData, and must be a string"},null),i)}},imageLib:{get ENUMS(){return{SIZES:{xxs:32,xs:64,s:128,m:200,l:304,xl:416,xxl:600,720:720,1080:1080,1440:1440,get full_width(){return this.findNearest(1)},get half_width(){return this.findNearest(2)},get third_width(){return this.findNearest(3)},get fourth_width(){return this.findNearest(4)},get fifth_width(){return this.findNearest(5)},get sixth_width(){return this.findNearest(6)},findNearest:function(e){for(var t=null,i=0;i<this.VALID_SIZES.length;i++){var n=this.VALID_SIZES[i];if(window.innerWidth/e<this[n]){t=n;break}}return this[t]},VALID_SIZES:["xxs","xs","s","m","l","xl","xxl","720","1080","1440","full_width","half_width","third_width","quarter_width","fifth_width","sixth_width"]},ASPECT_RATIOS:{"1:1":1,"4:3":.75,"16:9":.5625,"9:16":1.77777778,"11:5":.45454545,"4:1":.25,"2.39:1":.41841004,VALID_RATIOS:["1:1","4:3","16:9","9:16","11:5","4:1","2.39:1"]}}},showDialog:function(e,t){var i=new Packet(null,"imageLib.showDialog",e);buildfire._sendPacket(i,t)},isProdImageServer:function(e){return 0==e.indexOf("http://imageserver.prod.s3.amazonaws.com")||0==e.indexOf("https://imageserver.prod.s3.amazonaws.com")||0==e.indexOf("https://s3-us-west-2.amazonaws.com/imageserver.prod")},resizeImage:function(e,t,i,n){if(!e)return null;if(/\..{3,4}(?!.)/g.test(e)&&!/.(png|jpg|jpeg)(?!.)/gi.test(e)){var a=(/.{0,4}(?!.)/g.exec(e)||["Selected"])[0];return console.warn(a+" files are not supported by resizeImage. Returning original URL: "+e),e}if((r=t.disablePixelRation?1:window.devicePixelRatio)<1)var r=1;if(t){if("object"!=typeof t)throw"options not an object"}else t={width:window.innerWidth};"full"==t.width&&(t.width=window.innerWidth),"full"==t.height&&(t.height=window.innerHeight);var o="https://czi3m2qn.cloudimg.io/",d=buildfire.imageLib.getCompression(t.compression),l="";if(t.size&&t.aspect){if(this.ENUMS.SIZES.VALID_SIZES.indexOf(t.size)<0){var c=this.ENUMS.SIZES.VALID_SIZES.join(", ");return console.warn("Inavlid size. Availible options are "+c+". Returning original url"),e}if(this.ENUMS.ASPECT_RATIOS.VALID_RATIOS.indexOf(t.aspect)<0){var u=this.ENUMS.ASPECT_RATIOS.VALID_RATIOS.join(", ");return console.warn("Inavlid aspect ratio. Availible options are "+u+". Returning original url"),e}t.width=this.ENUMS.SIZES[t.size],t.height=t.width*this.ENUMS.ASPECT_RATIOS[t.aspect]}if(t.width&&!t.height)l=o+"width/"+Math.floor(t.width*r)+"/"+d+e;else if(!t.width&&t.height){l=o+"height/"+Math.floor(t.height*r)+"/"+d+e}else if(t.width&&t.height){l=o+"bound/"+(Math.floor(t.width*r)+"x"+Math.floor(t.height*r))+"/"+d+e}else l=e;return this._handleElement(i,l,n),l},cropImage:function(e,t,i,n){if(!e)return null;if(/\..{3,4}(?!.)/g.test(e)&&!/.(png|jpg|jpeg)(?!.)/gi.test(e)){var a=(/.{0,4}(?!.)/g.exec(e)||["Selected"])[0];return console.warn(a+" files are not supported by cropImage. Returning original URL: "+e),e}if(t||(t={}),"object"!=typeof t)throw"options not an object";if(t.size&&t.aspect){if(this.ENUMS.SIZES.VALID_SIZES.indexOf(t.size)<0){var r=this.ENUMS.SIZES.VALID_SIZES.join(", ");return console.warn("Inavlid size. Availible options are "+r+". Returning original url"),e}if(this.ENUMS.ASPECT_RATIOS.VALID_RATIOS.indexOf(t.aspect)<0){var o=this.ENUMS.ASPECT_RATIOS.VALID_RATIOS.join(", ");return console.warn("Inavlid aspect ratio. Availible options are "+o+". Returning original url"),e}t.width=this.ENUMS.SIZES[t.size],t.height=t.width*this.ENUMS.ASPECT_RATIOS[t.aspect]}if(t.width||t.height||(t={width:"full",height:"full"}),"full"==t.width&&(t.width=window.innerWidth),"full"==t.height&&(t.height=window.innerHeight),!t.width||!t.height)return console.warn("cropImage doenst have width or height please fix. returning original url"),e+"?h="+t.height+"&w="+t.width;var d=window.devicePixelRatio;t&&t.disablePixelRatio&&(d=t.disablePixelRatio);var l="https://czi3m2qn.cloudimg.io/crop/"+(Math.floor(t.width*d)+"x"+Math.floor(t.height*d)+"/")+buildfire.imageLib.getCompression(t.compression)+e;return this._handleElement(i,l,n),l},_handleElement:function(t,i,n){if(t&&i){var a=this._getLocalPath(i);"IMG"===t.tagName?(t.style.setProperty("opacity","0","important"),t.src=a,t.onload=function(){t.style.removeProperty("opacity"),n&&n(a)},t.onerror=function(){var e=new Packet(null,"imageCache.download",t.src=i);buildfire._sendPacket(e,function(){n&&n(a)})}):this._handleBgImage(t,a,i,n)}},_handleBgImage:function(t,e,i,n){r(t,e);var a=new Image;function r(e,t){if(!t)return e.style.removeProperty("background-image");var i='url("'+t+'")';e.style.setProperty("background-image",i,"important")}a.src=e,a.onload=function(){n&&n(e)},a.onerror=function(){r(t,i);var e=new Packet(null,"imageCache.download",i);buildfire._sendPacket(e,function(e,t){e&&n&&n(i),window.requestAnimationFrame(function(){n&&n(t)})})}},_getLocalPath:function(e){if(buildfire.isWeb())return e;var t=(e=e.replace(/(http|https):\/\/\S{0,8}.cloudimg.io\//g,"")).match(/(png|jpg|jpeg)/g)[0]||"";t=t?"."+t:"";var i=0;if(!e.length)return i;for(var n=0;n<e.length;n++){i=(i<<5)-i+e.charCodeAt(n),i|=0}return"cdvfile://localhost/persistent/imageCache/images/"+i+t},getCompression:function(e){var t="n/";if(e)if("number"==typeof e&&1<=e&&e<=100){var i="png-lossy-"+e+".q"+e+"/";/png-lossy-\d{1,3}.q\d{1,3}\//g.test(i)&&(t=i)}else console.warn("Disabling compression, must be an integer between 1-100");return t},local:{_parser:document.createElement("a"),localImageLibPath:window.location.href.split("pluginTemplate/")[0]+"imageLib/",parseFileFromUrl:function(e){buildfire.imageLib.local._parser.href=e;var t=buildfire.imageLib.local._parser.pathname.split("/");return 0==t.length?null:t[t.length-1]},toLocalPath:function(e){return buildfire.isFileServer(e)?this.localImageLibPath+this.parseFileFromUrl(e):null},resizeImage:function(e,i,n){if(i){if("object"!=typeof i)throw"options not an object"}else i={width:window.innerWidth};"full"==i.width&&(i.width=window.innerWidth),"full"==i.height&&(i.height=window.innerHeight);var t=buildfire.imageLib.local.toLocalPath(e);if(t){var a=new Image;a.src=t,a.onload=function(){i.width&&!i.height?i.height=a.height*i.width/a.width:!i.width&&i.height&&(i.width=a.width*i.height/a.width);var e=document.createElement("canvas"),t=e.getContext("2d");e.width=i.width,e.height=i.height,t.drawImage(a,0,0,i.width,i.height),n(null,e.toDataURL())},a.onerror=function(){n(null,buildfire.imageLib.resizeImage(e,i))}}else n(null,buildfire.imageLib.resizeImage(e,i))},cropImage:function(e,a,r){if(window.navigator.onLine)r(null,buildfire.imageLib.cropImage(e,a));else{var o=a.disablePixelRatio?1:window.devicePixelRatio;if(a){if("object"!=typeof a)throw"options not an object"}else a={width:window.innerWidth};"full"==a.width&&(a.width=window.innerWidth),"full"==a.height&&(a.height=window.innerHeight);var t=buildfire.imageLib.local.toLocalPath(e);if(t){var d=new Image;d.src=t,d.onload=function(){var e=document.createElement("canvas"),t=e.getContext("2d"),i={width:0,height:0},n={x:0,y:0};a.width!==a.height?a.width>a.height?(i.width=a.width,i.height=d.height*a.width/d.width,n.y=(a.height-i.height)/2):(i.width=d.width*a.height/d.height,i.height=a.height,n.x=(a.width-i.width)/2):d.width<d.height?(i.width=a.width,i.height=d.height*a.width/d.width,n.y=(a.height-i.height)/2):(i.width=d.width*a.height/d.height,i.height=a.height,n.x=(a.width-i.width)/2),i.width*=o,i.height*=o,a.width*=o,a.height*=o,e.width=a.width,e.height=a.height,t.drawImage(d,n.x,n.y,i.width,i.height),r(null,e.toDataURL())},d.onerror=function(){r(null,buildfire.imageLib.cropImage(e,a))}}else r(null,buildfire.imageLib.cropImage(e,a))}}}},colorLib:{showDialog:function(e,t,i,n){buildfire.eventManager.clear("colorLibOnChange"),"function"==typeof i&&buildfire.eventManager.add("colorLibOnChange",function(e){i(null,e)},!1);var a={};t&&(a=JSON.parse(JSON.stringify(t))),a.data=e;var r=new Packet(null,"colorLib.showDialog",a);buildfire._sendPacket(r,n)},_triggerOnChange:function(e){buildfire.eventManager.trigger("colorLibOnChange",e)}},notifications:{alert:function(e,t){e&&e.buttonName&&!e.okButton&&(e.okButton={text:e.buttonName});var i=new Packet(null,"notificationsAPI.alert",e);buildfire._sendPacket(i,t)},confirm:function(e,t){e&&e.buttonLabels&&(e.confirmButton||(e.confirmButton={text:e.buttonLabels[0]}),e.cancelButton||(e.cancelButton={text:e.buttonLabels[1]}));var i=new Packet(null,"notificationsAPI.confirm",e);buildfire._sendPacket(i,t)},prompt:function(e,t){var i=new Packet(null,"notificationsAPI.prompt",e);buildfire._sendPacket(i,t)},beep:function(e,t){var i=new Packet(null,"notificationsAPI.beep",e);buildfire._sendPacket(i,t)},vibrate:function(e,t){var i=new Packet(null,"notificationsAPI.vibrate",e);buildfire._sendPacket(i,t)},showDialog:function(e,t){var i=new Packet(null,"notificationsAPI.showDialog",e);buildfire._sendPacket(i,t)}},bookmarks:{add:function(e,t){var i=new Packet(null,"bookmarkAPI.add",e);buildfire._sendPacket(i,t)},_getParameterByName:function(e,t){t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var i=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return i?i[2]?decodeURIComponent(i[2].replace(/\+/g," ")):"":null},get:function(e){var t=buildfire.bookmarks._getParameterByName("bookmarkPayload");e(null,JSON.parse(t))},getAll:function(e){var t=new Packet(null,"bookmarkAPI.getAllFromPlugin");buildfire._sendPacket(t,e)},delete:function(e,t){var i=new Packet(null,"bookmarkAPI.deleteFromPlugin",e);buildfire._sendPacket(i,t)}},actionItems:{showDialog:function(e,t,i){var n=new Packet(null,"actionItems.showDialog",{actionItem:e,options:t});buildfire._sendPacket(n,i)},execute:function(e,t,i){"function"==typeof t&&(i=t);var n=new Packet(null,"actionItems.execute",e);buildfire._sendPacket(n,i)},list:function(e,t,i){var n=new Packet(null,"actionItems.list",{actionItems:e,options:t});buildfire._sendPacket(n,i)},create:function(e,t,i){return{action:e,iconUrl:t,title:i}}},history:{push:function(e,t,i){var n=new Packet(null,"history.push",{label:e,options:t,source:"plugin"});buildfire._sendPacket(n,i)},onPop:function(e,t){return buildfire.eventManager.add("historyOnPop",e,t)},triggerOnPop:function(e){buildfire.eventManager.trigger("historyOnPop",e)},pop:function(e){var t=new Packet(null,"history.pop");buildfire._sendPacket(t,e)},get:function(e,t){var i=new Packet(null,"history.get",e);buildfire._sendPacket(i,t)}},messaging:{sendMessageToControl:function(e){var t=new Packet(null,"messaging.triggerOnNewControlMessage",e);buildfire._sendPacket(t)},sendMessageToWidget:function(e){var t=new Packet(null,"messaging.triggerOnNewWidgetMessage",e);buildfire._sendPacket(t)},onReceivedMessage:function(e){console.info("onReceivedMessage ignored",window.location)},sendMessageToService:function(e){var t=new Packet(null,"messaging.sendMessageToService",e);buildfire._sendPacket(t)}},pluginInstance:{showDialog:function(e,t){var i=new Packet(null,"pluginInstances.showDialog",{options:e});buildfire._sendPacket(i,t)},get:function(e,t){var i=new Packet(null,"pluginInstances.get",e);buildfire._sendPacket(i,t)},search:function(e,t){var i=new Packet(null,"pluginInstances.search",e);buildfire._sendPacket(i,t)},showCreatePluginInstancesDialog:function(e,t){"function"!=typeof e||t?e&&(e.skipPluginInstances=!0):(t=e,e={skipPluginInstances:!0}),buildfire.pluginInstance.showDialog(e,t)}},deeplink:{getData:function(e){var t=buildfire.parseQueryString();t.dld?e(JSON.parse(t.dld)):e(null)},template:{get:function(e){var t=new Packet(null,"deepLink.getTemplate",{});buildfire._sendPacket(t,e)}},setData:function(e,t,i){var n=new Packet(null,"deepLink.setData",{data:e,options:t});buildfire._sendPacket(n,i)},createLink:function(e){console.log("this method is obsolete you have to call deeplink.template.get instead and it will return back the full deep link");var t="app"+buildfire._context.appId+"://plugin";return e?t+"?dld="+JSON.stringify(e):t}},spinner:{show:function(){buildfire._sendPacket(new Packet(null,"spinner.show"))},hide:function(){buildfire._sendPacket(new Packet(null,"spinner.hide"))}},auth:{login:function(e,t){var i=new Packet(null,"auth.login",e);buildfire._sendPacket(i,t)},logout:function(){var e=new Packet(null,"auth.logout");buildfire._sendPacket(e)},getCurrentUser:function(e){var t=new Packet(null,"auth.getCurrentUser");buildfire._sendPacket(t,e)},onLogin:function(e,t){return buildfire.eventManager.add("authOnLogin",e,t)},triggerOnLogin:function(e){buildfire.eventManager.trigger("authOnLogin",e)},onLogout:function(e,t){return buildfire.eventManager.add("authOnLogout",e,t)},triggerOnLogout:function(e){return buildfire.eventManager.trigger("authOnLogout",e)},openProfile:function(e){var t=new Packet(null,"auth.openProfile",e);buildfire._sendPacket(t)},getUserProfile:function(e,t){var i=new Packet(null,"auth.getUserProfile",e);buildfire._sendPacket(i,t)},getUsersByEmail:function(e,t){var i=new Packet(null,"auth.getUsersByEmail",e);buildfire._sendPacket(i,t)},getUserPictureUrl:function(e){var t=null,i=null;if(e||(e={}),e.userId&&(t="userId",i=e.userId),e.email&&(t="email",i=e.email),e.username&&(t="username",i=e.username),!t||!i)throw Error("Invalid user picture params");var n=t+"="+(i=encodeURIComponent(i)),a="https://auth.buildfire.com";return buildfire._context&&(buildfire._context.endPoints&&buildfire._context.endPoints.authHost&&(a=buildfire._context.endPoints.authHost),buildfire._context.appId&&(n=n+"&externalAppId="+encodeURIComponent(buildfire._context.appId))),a+"/src/server.js/user/picture?"+n},showUsersSearchDialog:function(e,t){var i=new Packet(null,"usersLib.showSearchDialog",e);buildfire._sendPacket(i,t)}},device:{calendar:{addEvent:function(e,t){buildfire._sendPacket(new Packet(null,"device.calendar.addEvent",e),t)}},share:function(e,t){buildfire._sendPacket(new Packet(null,"device.share",e),t)},onAppBackgrounded:function(e,t){return buildfire.eventManager.add("deviceAppBackgrounded",e,t)},onAppResumed:function(e,t){return buildfire.eventManager.add("deviceAppResumed",e,t)},triggerOnAppBackgrounded:function(e){return buildfire.eventManager.trigger("deviceAppBackgrounded",e)},triggerOnAppResumed:function(e){return buildfire.eventManager.trigger("deviceAppResumed",e)}},geo:{getCurrentPosition:function(e,t){buildfire._sendPacket(new Packet(null,"geo.getCurrentPosition",e),t)},watchPosition:function(e,t){buildfire._sendPacket(new Packet(null,"geo.watchPosition",e)),this.onPositionChange=t},onPositionChange:function(e,t){},clearWatch:function(e,t){buildfire._sendPacket(new Packet(null,"geo.clearWatch",e),t)},calculateDistance:function(e,t,i){var n=i&&"metric"===i.unitSystem?6371:3960,a=i&&i.decimalPlaces?i.decimalPlaces:2,r=buildfire.geo.degreesToRadians(t.latitude-e.latitude),o=buildfire.geo.degreesToRadians(t.longitude-e.longitude),d=buildfire.geo.degreesToRadians(e.latitude),l=buildfire.geo.degreesToRadians(t.latitude),c=Math.sin(r/2)*Math.sin(r/2)+Math.sin(o/2)*Math.sin(o/2)*Math.cos(d)*Math.cos(l),u=2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c));return buildfire.geo.round(n*u,a)},round:function(e,t){return Number(Math.round(e+"e"+t)+"e-"+t)},degreesToRadians:function(e){return e*Math.PI/180}},localStorage:{setItem:function(e,t,i){i||(i=function(){}),"object"==typeof t&&(t=JSON.stringify(t)),buildfire._sendPacket(new Packet(null,"localStorage.setItem",{key:e,value:t}),i)},getItem:function(e,t){if(!t)throw"missing callback on buildfire.localStorage.getItem";buildfire._sendPacket(new Packet(null,"localStorage.getItem",e),t)},removeItem:function(e,t){if(!t)throw"missing callback on buildfire.localStorage.removeItem";buildfire._sendPacket(new Packet(null,"localStorage.removeItem",e),t)}},input:{showTextDialog:function(e,t){buildfire._sendPacket(new Packet(null,"input.showTextDialog",e),t)},showListDialog:function(e,t){buildfire._sendPacket(new Packet(null,"input.showListDialog",e),t)}},imagePreviewer:{show:function(e,t){buildfire._sendPacket(new Packet(null,"imagePreviewer.show",e),t)}},notes:{openDialog:function(e,t){buildfire._sendPacket(new Packet(null,"notes.openDialog",e),t)},onSeekTo:function(e,t){return buildfire.eventManager.add("NOTES_SEEK_TO",e,t)},triggerOnSeekTo:function(e){buildfire.eventManager.trigger("NOTES_SEEK_TO",e,!1)}}};if(window.parsedQuerystring=buildfire.parseQueryString(),buildfire.fid=window.parsedQuerystring.fid,buildfire.init(),buildfire.eventManager.add("deviceAppBackgrounded",function(){!function(e,t){if(e)for(var i=0;i<e.length;i++)if(-1<e[i].src.indexOf("youtube.com")){-1==e[i].src.indexOf("enablejsapi=1")&&(e[i].src=e[i].src+"?enablejsapi=1");var n=window.JSON.stringify({event:"command",func:"pauseVideo"});e[i].contentWindow.postMessage(n,"https://www.youtube.com")}else if(-1<e[i].src.indexOf("vimeo.com")){var a=JSON.stringify({method:"pause"});e[i].contentWindow.postMessage(a,"*")}if(t)for(var r=0;r<t.length;r++)t[r].pause&&t[r].pause()}(window.document.getElementsByTagName("iframe"),window.document.getElementsByTagName("video"))},!0),document.addEventListener("DOMContentLoaded",function(e){buildfire.options.disableSelect||(document.getElementsByTagName("body")[0].className+=" noSelect"),buildfire.getContext(function(e,t){if(e)console.error(e);else if(t&&t.debugTag&&buildfire.logger.attachRemoteLogger(t.debugTag),0<window.location.pathname.indexOf("/widget/")){var i=!(!buildfire.options||!buildfire.options.disableTheme)&&buildfire.options.disableTheme,n=!(!buildfire.options||!buildfire.options.enableMDTheme)&&buildfire.options.enableMDTheme;i||n||(buildfire.isWeb()||!t.liveMode?buildfire.appearance.attachAppThemeCSSFiles(t.appId,t.liveMode,t.endPoints.appHost):buildfire.appearance.attachLocalAppThemeCSSFiles(t.appId))}}),!window.location.href.indexOf("/widget/")||buildfire.appearance.disableFastClickOnLoad||buildfire.options.disableFastClick||buildfire.appearance.attachFastClick(),buildfire.options.disableExternalLinkOverride||(document.onclick=function(e){var t=(e=e||window.event).target||e.srcElement,i=t.getAttribute("href"),n=t.getAttribute("inAppBrowser");if("A"==t.tagName&&null!=i&&""!=i&&null==n){var a=new RegExp("^(http:/|https:/|http://|https://|www.)[a-z0-9]");if("A"==t.tagName&&a.test(i)){e.preventDefault();var r=t.getAttribute("inAppBrowser")||"_blank";buildfire.navigation.openWindow(i,r,null)}}}),setTimeout(function(){buildfire.options.disableTheme||buildfire.appearance._forceCSSRender()},1750)}),document.addEventListener("resize",function(e){buildfire.appearance.autosizeContainer()}),window.onerror=function(e,t,i,n,a){console.error("Error: "+e," Script: "+t," Line: "+i," Column: "+n," StackTrace: "+a)},"function"!=typeof CustomEvent){function CustomEvent(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var i=document.createEvent("CustomEvent");return i.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),i}CustomEvent.prototype=window.Event.prototype,window.CustomEvent=CustomEvent}
!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var i in n)("object"==typeof exports?exports:e)[i]=n[i]}}(this,function(){return function(n){function i(e){if(o[e])return o[e].exports;var t=o[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,i),t.l=!0,t.exports}var o={};return i.m=n,i.c=o,i.i=function(e){return e},i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=7)}([function(r,s){var t;t=function(){return this}();try{t=t||Function("return this")()||eval("this")}catch(r){"object"==typeof window&&(t=window)}r.exports=t},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var A=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};t.lory=function(u,f){function m(e,t){var n=P.classNameActiveSlide;e.forEach(function(e,t){e.classList.contains(n)&&e.classList.remove(n)}),e[t].classList.add(n)}function p(e,t,n){(0,o.default)(u,e+".lory."+t,n)}function h(e,t,n){var i=S&&S.style;i&&(i[O.transition+"TimingFunction"]=n,i[O.transition+"Duration"]=t+"ms",O.hasTranslate3d?i[O.transform]="translate3d("+e+"px, 0, 0)":i[O.transform]="translate("+e+"px, 0)")}function r(e,t){var n=P,i=n.slideSpeed,o=n.slidesToScroll,r=n.infinite,s=n.rewind,a=n.rewindSpeed,d=n.ease,l=n.classNameActiveSlide,c=i,u=t?T+1:T-1,f=Math.round(C-N);p("before","slide",{index:T,nextSlide:u}),_&&_.classList.remove("disabled"),B&&B.classList.remove("disabled"),"number"!=typeof e&&(e=t?T+o:T-o),e=Math.min(Math.max(e,0),M.length-1),r&&void 0===t&&(e+=r);var v=Math.min(Math.max(-1*M[e].offsetLeft,-1*f),0);s&&Math.abs(g.x)===f&&t&&(e=v=0,c=a),h(v,c,d),g.x=v,M[e].offsetLeft<=f&&(T=e),!r||e!==M.length-r&&0!==e||(t&&(T=r),t||(T=M.length-2*r),g.x=-1*M[T].offsetLeft,k=function(){h(-1*M[T].offsetLeft,0,void 0)}),l&&m(R.call(M),T),_&&!r&&0===e&&_.classList.add("disabled"),!B||r||s||e+1!==M.length||B.classList.add("disabled"),p("after","slide",{currentSlide:T})}function e(){p("before","init"),O=(0,z.default)();var e,t,n,i,o=P=A({},D.default,f),r=o.classNameFrame,s=o.classNameSlideContainer,a=o.classNamePrevCtrl,d=o.classNameNextCtrl,l=o.enableMouseEvents,c=o.classNameActiveSlide;j=u.getElementsByClassName(r)[0],S=j.getElementsByClassName(s)[0],_=u.getElementsByClassName(a)[0],B=u.getElementsByClassName(d)[0],g={x:S.offsetLeft,y:S.offsetTop},P.infinite?(e=R.call(S.children),t=P.infinite,n=e.slice(0,t),i=e.slice(e.length-t,e.length),n.forEach(function(e){var t=e.cloneNode(!0);S.appendChild(t)}),i.reverse().forEach(function(e){var t=e.cloneNode(!0);S.insertBefore(t,S.firstChild)}),S.addEventListener(O.transitionEnd,y),M=R.call(S.children)):(M=R.call(S.children),_&&_.classList.add("disabled"),B&&1===M.length&&!P.rewind&&B.classList.add("disabled")),v(),c&&m(M,T),_&&B&&(_.addEventListener("click",b),B.addEventListener("click",E)),j.addEventListener("touchstart",L),l&&(j.addEventListener("mousedown",L),j.addEventListener("click",x)),P.window.addEventListener("resize",w),p("after","init")}function v(){var e=P,t=e.infinite,n=e.ease,i=e.rewindSpeed,o=e.rewindOnResize,r=e.classNameActiveSlide;C=S.getBoundingClientRect().width||S.offsetWidth,(N=j.getBoundingClientRect().width||j.offsetWidth)===C&&(C=M.reduce(function(e,t){return e+t.getBoundingClientRect().width||t.offsetWidth},0)),o?T=0:(n=null,i=0),g.x=(t?(h(-1*M[T+t].offsetLeft,0,null),T+=t):h(-1*M[T].offsetLeft,i,n),-1*M[T].offsetLeft),r&&m(R.call(M),T)}function b(){r(!1,!1)}function E(){r(!1,!0)}function y(){k&&(k(),k=void 0)}function L(e){var t=P.enableMouseEvents,n=e.touches?e.touches[0]:e;t&&(j.addEventListener("mousemove",s),j.addEventListener("mouseup",a),j.addEventListener("mouseleave",a)),j.addEventListener("touchmove",s),j.addEventListener("touchend",a);var i=n.pageX,o=n.pageY;d={x:i,y:o,time:Date.now()},c=void 0,l={},p("on","touchstart",{event:e})}function s(e){var t=e.touches?e.touches[0]:e,n=t.pageX,i=t.pageY;l={x:n-d.x,y:i-d.y},void 0===c&&(c=!!(c||Math.abs(l.x)<Math.abs(l.y))),!c&&d&&(e.preventDefault(),h(g.x+l.x,0,null)),p("on","touchmove",{event:e})}function a(e){var t=d?Date.now()-d.time:void 0,n=Number(t)<300&&25<Math.abs(l.x)||Math.abs(l.x)>N/3,i=!T&&0<l.x||T===M.length-1&&l.x<0,o=l.x<0;c||(n&&!i?r(!1,o):h(g.x,P.snapBackSpeed)),d=void 0,j.removeEventListener("touchmove",s),j.removeEventListener("touchend",a),j.removeEventListener("mousemove",s),j.removeEventListener("mouseup",a),j.removeEventListener("mouseleave",a),p("on","touchend",{event:e})}function x(e){l.x&&e.preventDefault()}function w(e){v(),p("on","resize",{event:e})}var g=void 0,C=void 0,N=void 0,M=void 0,j=void 0,S=void 0,_=void 0,B=void 0,O=void 0,k=void 0,T=0,P={};"undefined"!=typeof jQuery&&u instanceof jQuery&&(u=u[0]);var d=void 0,l=void 0,c=void 0;return e(),{setup:e,reset:v,slideTo:function(e){r(e)},returnIndex:function(){return T-P.infinite||0},prev:b,next:E,destroy:function(){p("before","destroy"),j.removeEventListener(O.transitionEnd,y),j.removeEventListener("touchstart",L),j.removeEventListener("touchmove",s),j.removeEventListener("touchend",a),j.removeEventListener("mousemove",s),j.removeEventListener("mousedown",L),j.removeEventListener("mouseup",a),j.removeEventListener("mouseleave",a),j.removeEventListener("click",x),P.window.removeEventListener("resize",w),_&&_.removeEventListener("click",b),B&&B.removeEventListener("click",E),P.infinite&&Array.apply(null,Array(P.infinite)).forEach(function(){S.removeChild(S.firstChild),S.removeChild(S.lastChild)}),p("after","destroy")}}};var z=i(n(3)),o=i(n(4)),D=i(n(2)),R=Array.prototype.slice},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={slidesToScroll:1,slideSpeed:300,rewindSpeed:600,snapBackSpeed:200,ease:"ease",rewind:!1,infinite:!1,classNameFrame:"js_frame",classNameSlideContainer:"js_slides",classNamePrevCtrl:"js_prev",classNameNextCtrl:"js_next",classNameActiveSlide:"active",enableMouseEvents:!1,window:window,rewindOnResize:!0}},function(e,t,n){"use strict";(function(a){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e,t,n,i=void 0,o=void 0,r=void 0,s=void 0;return e=document.createElement("_"),t=e.style,n=void 0,""===t[n="webkitTransition"]&&(r="webkitTransitionEnd",o=n),""===t[n="transition"]&&(r="transitionend",o=n),""===t[n="webkitTransform"]&&(i=n),""===t[n="msTransform"]&&(i=n),""===t[n="transform"]&&(i=n),document.body.insertBefore(e,null),t[i]="translate3d(0, 0, 0)",s=!!a.getComputedStyle(e).getPropertyValue(i),document.body.removeChild(e),{transform:i,transition:o,transitionEnd:r,hasTranslate3d:s}}}).call(t,n(0))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var i=new r.default(t,{bubbles:!0,cancelable:!0,detail:n});e.dispatchEvent(i)};var i,o=n(5),r=(i=o)&&i.__esModule?i:{default:i}},function(n,e,t){(function(e){var t=e.CustomEvent;n.exports=function(){try{var e=new t("cat",{detail:{foo:"bar"}});return"cat"===e.type&&"bar"===e.detail.foo}catch(e){}return!1}()?t:"undefined"!=typeof document&&"function"==typeof document.createEvent?function(e,t){var n=document.createEvent("CustomEvent");return t?n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail):n.initCustomEvent(e,!1,!1,void 0),n}:function(e,t){var n=document.createEventObject();return n.type=e,n.detail=t?(n.bubbles=Boolean(t.bubbles),n.cancelable=Boolean(t.cancelable),t.detail):(n.bubbles=!1,void(n.cancelable=!1)),n}}).call(e,t(0))},,function(e,t,n){e.exports=n(1)}])});
"use strict";if("undefined"==typeof buildfire)throw"please add buildfire.js first to use carousel components";void 0===buildfire.components&&(buildfire.components={}),void 0===buildfire.components.carousel&&(buildfire.components.carousel={}),function(){for(var e=document.getElementsByTagName("script"),i=null,t=0;t<e.length;t++)e[t].src&&(e[t].src.toLowerCase().indexOf("buildfire/components/carousellight/carousellight.js")||e[t].src.toLowerCase().indexOf("buildfire/components/carousellight/carousellight.min.js"))&&(i=e[t].src);if(!i)throw"carousellight components not found";"undefined"==typeof lory&&document.write('<script src="'+i+'/../../../../lory/lory.min.js"><\/script>');var n=document.getElementById("loryInjectedStyle");n&&document.head.removeChild(n),(n=document.createElement("style")).id="loryInjectedStyle",n.innerHTML+=" .loryFrame {position: relative;font-size: 0; line-height: 0; overflow: hidden; white-space: nowrap;}",n.innerHTML+=" .loryFrame li { position: relative; display: inline-block; height: 100%;}",n.innerHTML+=" .lorySlides { display: inline-block;}",n.innerHTML+=" .loryPercentage .lorySlides { display: block; padding: 0px;}",n.innerHTML+=" .loryPercentage li {  width: 100%;}",0<n.innerHTML.length&&document.head.appendChild(n)}(),buildfire.components.carousel.view=function(e){if(e.items&&0<e.items.length){if(1<e.items.length)this.config=this.mergeSettings(e),this._initDimensions(this.config.layout),this.init();else{e.selector.innerHTML="";var i=document.createElement("img");i.setAttribute("src",buildfire.imageLib.cropImage(e.items[0].iconUrl,{size:"full_width",aspect:"16:9",width:window.innerWidth,height:Math.ceil(9*window.innerWidth/16)})),i.alt="Carousel Image",e.selector.appendChild(i),i.addEventListener("click",function(){buildfire.actionItems.execute(e.items[0],function(e,i){e&&console.warn("Error openning slider action: ",e)})})}e.selector.style.display=""}else e.selector.style.display="none"},buildfire.components.carousel.view.prototype={mergeSettings:function(e){var i={selector:".js_percentage",items:[],layout:null,speed:200,loop:!0,autoInterval:5e3},t=e;for(var n in t)i[n]=t[n];return i},init:function(){if(this.selector="string"==typeof this.config.selector?document.querySelector(this.config.selector):this.config.selector,!this.selector)throw"selecter not found";var t=this;function e(){buildfire.getContext(function(e,i){i&&i.device&&i.device.platform&&"ios"==i.device.platform.toLowerCase()&&"LAUNCHER_PLUGIN"==buildfire.getFrameType()&&(buildfire.navigation.onAppLauncherActive(function(){t._applySlider()},!0),buildfire.navigation.onAppLauncherInactive(function(){t._destroySlider()},!0))})}this.config.items&&0<this.config.items.length?this._renderHTMLItems(function(){t._applySlider(),e()}):(t._applySlider(),e())},_destroySlider:function(){this.timerInterval&&(clearInterval(this.timerInterval),this.timerInterval=null)},_applySlider:function(){if(this.lorySlider||(this.lorySlider=lory(this.config.selector,{classNameSlideContainer:this.config.classNameSlideContainer||"js_slides",classNameFrame:this.config.classNameFrame||"js_frame",ease:"ease",rewindSpeed:600,slideSpeed:this.config.speed,slidesToScroll:this.config.slidesToScroll||1,infinite:this.config.infinite||1,enableMouseEvents:!0})),this.config.loop&&this.config.items&&1<this.config.items.length){var e=this;this.timerInterval&&(clearInterval(this.timerInterval),this.timerInterval=null),this.timerInterval=setInterval(function(){e.lorySlider.next()},this.config.autoInterval)}},_renderHTMLItems:function(e){for(var i=this;this.selector.firstChild;)this.selector.removeChild(this.selector.firstChild);this.sliderFrame=document.createElement("div"),["loryFrame","js_frame"].forEach(function(e){i.sliderFrame.classList.add(e)}),this.slideContainer=document.createElement("ul"),["lorySlides","js_slides"].forEach(function(e){i.slideContainer.classList.add(e)}),this._loadImages(this.config.items,function(){["slider","js_percentage","loryPercentage"].forEach(function(e){i.selector.classList.add(e)}),i.sliderFrame.appendChild(i.slideContainer),i.selector.appendChild(i.sliderFrame),e()})},_loadImages:function(e,i){var t=this,n=e.length,s=n;0==n&&i();for(var r=0;r<n;r++)this._appendItem(e[r],function(e){s--,t.slideContainer.appendChild(e),0==s&&i()})},_appendItem:function(e,n){var s=document.createElement("li");s.classList.add("js_slide"),s.addEventListener("click",function(){buildfire.actionItems.execute(e,function(e,i){e&&console.warn("Error openning slider action: ",e)})}),buildfire.imageLib.local.cropImage(e.iconUrl,{aspect:this.aspect,size:"full_width",width:this.width,height:this.height},function(e,i){if(e)console.log("Error occurred while cropping image: ",e);else{var t=document.createElement("img");t.src=i,s.appendChild(t)}n(s)})},append:function(e){if(e&&(e instanceof Array||"object"!=typeof e||(e=[e]),e&&e instanceof Array&&e.length)){for(var i=0;i<e.length;i++)this.items.push(e[i]);var t=this;this._loadImages(e,function(){t._applySlider()})}},_initDimensions:function(e){this.width=window.innerWidth,"WideScreen"==(e=e||"WideScreen")?(this.height=Math.ceil(9*this.width/16),this.aspect="16:9"):"Square"==e?(this.height=this.width,this.aspect="1:1"):"Cinema"==e?(this.height=Math.ceil(1*this.width/2.39),this.aspect="2.39:1"):"MobileScreen"==e&&(this.height=window.innerHeight/this.width*this.width,this.width=this.width,this.aspect="9:16"),this.cssWidth=this.width+"px",380<this.height?this.cssHeight="380px":this.cssHeight=this.height+"px",this._minHeight="180px",this._minHeight=this.cssHeight}};
//# sourceMappingURL=buildfire_lightcarousel.min.js.map
