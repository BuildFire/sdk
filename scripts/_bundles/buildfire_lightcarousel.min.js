/**
 * Minified Bundle for buildfire.js & lory.min.js & carouselLight.js
 */

function Packet(e,t,n){this.id=e||(new Date).toISOString()+Math.random(),this.cmd=t,this.data=n,this.instanceId=null}var buildfire={isFileServer:function(e){return-1!==e.indexOf("s3.amazonaws.com")},isWidget:function(){return 0<window.location.href.indexOf("/widget/")},isWidgetService:function(){return buildfire.isWidget()&&window.location.href.indexOf("/widget/index.html")<0},isWeb:function(n){function i(e){return e&&e.device&&e.device.platform?"web"===e.device.platform.toLowerCase():(console.error("context device platform not defined"),0===window.location.protocol.indexOf("http"))}var e=buildfire.getContext(function(e,t){n&&(e?n(e):n(null,i(t)))});return e?i(e):n?void 0:(console.warn("context not ready. must use isWeb with callback parameter: function(err, isWebResult)"),0===window.location.protocol.indexOf("http"))},_lazyScriptsQueues:{},lazyLoadScript:function({relativeScriptsUrl:e,scriptId:t},n){if(this._lazyScriptsQueues[t]){if(this._lazyScriptsQueues[t].loaded&&n)return n()}else this._lazyScriptsQueues[t]={loaded:!1,queue:[]};const i=this._lazyScriptsQueues[t];i.queue.push(n),1<i.queue.length||(e="control"===buildfire.getContext().type?`../../../../scripts/${e}`:`../../../scripts/${e}`,buildfire.loadScript({url:e,scriptId:t},t=>{i.queue.forEach(e=>{e&&e(t)}),i.loaded=!0,i.queue=[]}))},loadScript:function({url:t,scriptId:e},n=Function()){let i=document.getElementById(e);var a=document.getElementsByTagName("script");if(i||Array.from(a).some(e=>e.src.includes(t.replaceAll("../",""))))return n();const r=document.head||document.body;i=document.createElement("script"),i.id=e||"",i.type="text/javascript",i.src=t,i.onload=n,i.onerror=function(){n(new Error("failed to load script component")),console.error("failed to load script component")},r.appendChild(i)},ratingSystem:{inject:function(){var e,t,n,i;void 0!==buildfire&&(void 0===buildfire.components||void 0===buildfire.components.ratingSystem?(t=function(e){var t=document.head||document.body,n=document.createElement("link");n.rel="stylesheet",n.type="text/css",n.href="../../../scripts/buildfire/components/ratingSystem/index.min.css",t.appendChild(n);const i=t.querySelector("meta[charset]");i&&i.getAttribute("charset").toLowerCase().includes("utf-8")||console.warn("UTF-8 charset is required for ratingSystem to function properly"),buildfire.components.ratingSystem.injectRatings({isFromWysiwyg:!0})},function(e){for(;e.includes("../");)e=e.replace("../","");for(var t=document.getElementsByTagName("script"),n=0;n<t.length;n++)if(t[n].src.includes(e))return!0;return!1}(e="../../../scripts/buildfire/components/ratingSystem/index.min.js")||(n=document.head||document.body,(i=document.createElement("script")).type="text/javascript",i.src=e,i.charset="utf-8",i.onreadystatechange=t,i.onload=t,n.appendChild(i))):buildfire.components.ratingSystem.injectRatings({isFromWysiwyg:!0}))}},logger:{attachRemoteLogger:function(e){let t=document.getElementById("BuildFireAppDebuggerScript");var n,i;t&&t.parentElement.removeChild(t),(e=e||prompt("Enter is a unique tag to send your logs to"))&&(n=document.querySelector("head"),(i=document.createElement("script")).src="https://debug.buildfire.com/target/target-script-min.js#"+e,i.id="BuildFireAppDebuggerScript",n.appendChild(i))},init:function(){const t=console.error;console.error=function(...e){e&&e[0]&&buildfire.logger.log({message:"string"==typeof e[0]?e[0]:"no error message provided.",data:1<e.length?{...e}:void 0,level:"error",category:"ConsoleError"}),t(...e)},window.addEventListener("error",e=>{.9<=Math.random()&&buildfire.logger.log({message:e.message,level:"error",category:"BrowserJsException",exception:{colno:e.colno,lineno:e.lineno,message:e.message,stack:e.error&&e.error.stack?e.error&&e.error.stack:"n/a",url:e.filename}}),t("Error: "+e.message," Script: "+e.filename," Line: "+e.lineno," Column: "+e.colno,(e.error,e.error.stack?e.error&&e.error.stack:"n/a"))})},log:function(n,i){n&&"object"==typeof n||(n={}),buildfire.getContext((e,t)=>{n.context||(n.context={}),n.context.pluginId=t?.pluginId,n.context.instanceId=t?.instanceId,n.context.pluginTitle=t?.title,n.tags||(n.tags=[]),n.tags.push("sdkAndPlugins");t=new Packet(null,"logger.log",n);buildfire._sendPacket(t,i)})}},_callbacks:{},parseQueryString:function(e){for(var t=(e||window.location.search.substring(1)).split("&"),n=new Object,i=0;i<t.length;i++){var a=t[i].split("=");n[decodeURIComponent(a[0])]=decodeURIComponent(a[1]);var r=t[i].indexOf("="),a=t[i].substring(0,r),r=t[i].substring(r+1);n[decodeURIComponent(a)]=decodeURIComponent(r)}return n},options:{},parseMetaOptions:function(){var t={},e=document.head.querySelector("meta[name=buildfire]");return e&&e.content&&e.content.split(",").forEach(function(e){e=e.split("=");t[e[0]]=!(1<e.length)||e[1]}),t},eventManager:{events:{},add:function(e,t,n){if("function"!=typeof t)throw"Invalid event handler";n||this.clear(e),this.events[e]?this.events[e].push(t):this.events[e]=[t];var i=this.events[e];return{clear:function(){for(var e=0;e<i.length;e++)i[e]===t&&i.splice(e,1)}}},clear:function(e){this.events[e]=[]},trigger:function(e,t){if(this.events[e])for(var n=0;n<this.events[e].length;n++)try{this.events[e][n](t)}catch(e){console.error(e)}}},_context:null,get context(){return console.warn("buildfire.context is obsolete and will be removed soon"),buildfire._context},set context(e){buildfire._context=e},init:function(){window.removeEventListener("message",buildfire._postMessageHandler,!1),window.addEventListener("message",buildfire._postMessageHandler,!1),buildfire.options=buildfire.parseMetaOptions(),buildfire.appearance.insertHTMLAttributes(),buildfire.appearance.attachCSSFiles(),buildfire.localStorage.overrideNativeLocalStorage(),buildfire.wysiwyg.extend(),0<=window.location.pathname.indexOf("/widget/")&&buildfire.options.enablePluginJsonLoad&&buildfire.getContext((e,t)=>{return e?console.error(e):void(t&&"sdk"===t.scope?(n=(e,t)=>{var n,i;e&&console.error(e),window.pluginJson=t,buildfire._cssInjection.handleCssLayoutInjection(t),t&&t.control&&t.control.language&&t.control.language.enabled&&(n=(e,t)=>{e&&console.error(e),window.pluginLanguageJson=t,buildfire.language.handleLanguageSettings(window.pluginJson,t)},i=`../${t.control.language.languageJsonPath}`,fetch(i).then(e=>e.json()).then(e=>{n(null,e)}).catch(e=>{n(e,null)}))},t=`../plugin.json?v=${(new Date).getTime()}`,fetch(t).then(e=>e.json()).then(e=>{n(null,e)}).catch(e=>{n(e,null)})):document.write('<script src="plugin.js" type="text/javascript"><\/script>'));var n}),buildfire.logger.init();var e=new Packet(null,"diagnostics.signal",{pluginLoadingAt:new Date});buildfire._sendPacket(e)},_whitelistedCommands:["datastore.triggerOnUpdate","datastore.triggerOnRefresh","userData.triggerOnUpdate","userData.triggerOnRefresh","publicData.triggerOnUpdate","publicData.triggerOnRefresh","appData.triggerOnUpdate","appData.triggerOnRefresh","messaging.onReceivedMessage","messaging.onReceivedBroadcast","dynamic.triggerContextChange","dynamic.onReceivedWidgetContextRequest","dynamic.expressions.onReceivedCustomExpressionsRequest","history.triggerOnPop","navigation.onBackButtonClick","services.media.audioPlayer.triggerOnEvent","auth.triggerOnLogin","auth.triggerOnLogout","auth.triggerOnUpdate","logger.attachRemoteLogger","device.triggerKeyboardWillShow","device.triggerKeyboardWillHide","appearance.triggerOnUpdate","_cssInjection.triggerOnUpdate","language.triggerOnUpdate","device.triggerOnAppBackgrounded","device.triggerOnAppResumed","notifications.localNotification.onClick","geo.onPositionChange","navigation.triggerOnAppLauncherActive","navigation.triggerOnAppLauncherInactive","colorLib._triggerOnChange","services.publicFiles._triggerOnProgress","services.publicFiles._triggerOnComplete","services.fileSystem.fileManager._triggerOnProgress","notes.triggerOnSeekTo","navigation.triggerOnPluginOpened","deeplink.triggerOnUpdate","services.commerce.inAppPurchase._triggerOnPurchaseRequested","services.commerce.inAppPurchase._triggerOnPurchaseResult","services.reportAbuse._triggerOnAdminResponse","geo.session._triggerOnSessionWatchChange"],_postMessageHandler:function(a){if(a.source!==window){var n;if("object"==typeof a.data)n=a.data;else try{n=JSON.parse(a.data)}catch(e){return void buildfire.getContext(function(e,{pluginId:t,instanceId:n,title:i}){i={origin:a.origin,data:a.data,pluginId:t,instanceId:n,title:i};console.warn("ignored malformed packet",i)})}if(n.id&&buildfire._callbacks[n.id])buildfire._callbacks[n.id](n.error,n.data),delete buildfire._callbacks[n.id];else if(buildfire._whitelistedCommands.indexOf(n.cmd)+1){for(var e=n.cmd.split("."),t=buildfire,i=buildfire,r=0;r<e.length;r++){if(0<r&&(i=t),!t[e[r]])return;t=t[e[r]]}t.apply(i,[n.data,function(e,t){e&&console.warn(a.data,e);e=new Packet(n.id,"noop",t,e);buildfire._parentPost(e)}])}else console.warn(window.location.href+" unhandled packet",n)}},_sendPacket:function(e,n){"function"!=typeof n&&(n=function(e,t){}),buildfire.isWidget()?e.source="widget":e.source="control",buildfire._context&&(e.originInstanceId=buildfire._context.instanceId);var i,t=e.cmd,a=0,r=0==t.indexOf("datastore")&&0!=t.indexOf("datastore.insert")&&0!=t.indexOf("datastore.bulkInsert")&&0!=t.indexOf("datastore.disableRefresh")&&0!=t.indexOf("datastore.searchAndUpdate")&&0!=t.indexOf("datastore.update"),t=0==t.indexOf("getContext");(r||t)&&(i=setTimeout(function(){a<5&&(console.log("calling "+e.cmd+" again. total overall resend attempts "+a),buildfire._sendPacket(e,function(e,t){a--,n(e,t)}),a++)},3e3));buildfire._callbacks[e.id]=function(e,t){clearTimeout(i),n(e,t)},e.fid=buildfire.fid,buildfire._parentPost(e,n)},_parentPost:function(e){parent&&e&&(e.data&&"undefined"!=typeof angular&&(e.data=function e(t){for(var n in t&&delete t.$$hashKey,t){var i=t[n];"object"==typeof i&&(t[n]=e(i))}return t}(e.data)),parent.postMessage(e,"*"))},getContext:function(n){if(buildfire._context)n&&n(null,buildfire._context);else if(window.parsedQuerystring.appcontext)buildfire._context=JSON.parse(window.parsedQuerystring.appcontext),n&&n(null,buildfire._context);else{if(!n)throw"Context not ready. Use callback parameter instead of direct return";var e=new Packet(null,"getContext");buildfire._sendPacket(e,function(e,t){t&&(buildfire._context=t),n&&n(e,t)})}return buildfire._context},getGlobalSettings:function(e,n){var t=new Packet(null,"getGlobalSettings");buildfire._sendPacket(t,function(e,t){return e?n(e):void n(null,t)})},navigation:{navigateTo:function(e,t){e.pluginTypeId&&!e.pluginId&&(e.pluginId=e.pluginTypeId);e=new Packet(null,"navigation.navigateTo",{pluginId:e.pluginId,instanceId:e.instanceId,title:e.title,folderName:e.folderName,queryString:e.queryString});buildfire._sendPacket(e,t)},navigateToSocialWall:function(t,n){var e;n=n||console.warn,(t=t||{}).wallUserIds&&(e=t.wallUserIds.sort().reverse().join(""),t.queryString?t.queryString+="&wid="+e:t.queryString="wid="+e),t.headerContentHtml&&((e=encodeURIComponent(t.headerContentHtml)).length<4e3&&(t.queryString?t.queryString+=`&headerContentHtml=${e}`:t.queryString=`headerContentHtml=${e}`),delete t.headerContentHtml);var i={community:"b15c62f2-7a99-48dc-a37a-e42d46bd3289",premium_social:"697f1612-8208-4870-93f9-555c65103578",social:"7b3d82bf-e5f1-4b2e-82bf-966d2ab0340d"},a=[];t.pluginTypeOrder=t.pluginTypeOrder&&t.pluginTypeOrder.length?t.pluginTypeOrder:["community","premium_social","social"];for(var r=0;r<t.pluginTypeOrder.length;r++){if(!i[t.pluginTypeOrder[r]])return n("unknown plugin "+t.pluginTypeOrder[r]);a.push(i[t.pluginTypeOrder[r]])}function o(e,t,n){e.pluginId=t;e=new Packet(null,"navigation.navigateTo",{pluginId:e.pluginId,instanceId:e.instanceId,title:e.title,folderName:e.folderName,queryString:e.queryString});buildfire._sendPacket(e,n)}o(t,a[0],function(e){return e?void(a[1]?o(t,a[1],function(e){return e?void(a[2]?o(t,a[2],n):n(e)):n(null,{status:"completed"})}):n(e)):n(null,{status:"completed"})})},navigateHome:function(){var e=new Packet(null,"navigation.navigateHome");buildfire._sendPacket(e)},scrollTop:function(e){var t=new Packet(null,"navigation.scrollTop");buildfire._sendPacket(t,e)},openWindow:function(e,t,n){t=new Packet(null,"actionItems.executeOpenWebLink",{url:e,openIn:t=t||"_blank"},n=n||function(){console.info("openWindow:: completed")});buildfire._sendPacket(t,n)},_goBackOne:function(){buildfire._sendPacket(new Packet(null,"navigation.navigateBack"))},onBackButtonClick:function(){buildfire.navigation._goBackOne()},restoreBackButtonClick:function(){buildfire.navigation.onBackButtonClick=function(){buildfire.navigation._goBackOne()}},goBack:function(){buildfire.navigation.onBackButtonClick()},makeSafeLinks:function(e){for(var t=this,n=(e="object"!=typeof e?document.getElementById(e):e).querySelectorAll("a[href^=http], a[href^=https],a[href^=www]"),i=0;i<n.length;i++)n[i].setAttribute("inAppBrowser",!0),n[i].addEventListener("click",function(e){e.preventDefault(),t.openWindow(this.href,this.target,null)},!1)},navigateEmulator:function(e){buildfire._sendPacket(new Packet(null,"navigation.navigateEmulator",e))},onAppLauncherActive:function(e,t){return buildfire.eventManager.add("appLauncherActive",e,t)},onAppLauncherInactive:function(e,t){return buildfire.eventManager.add("appLauncherInactive",e,t)},triggerOnAppLauncherActive:function(e){return buildfire.eventManager.trigger("appLauncherActive",e)},triggerOnAppLauncherInactive:function(e){return buildfire.eventManager.trigger("appLauncherInactive",e)},onPluginOpened:function(e,t){return buildfire.eventManager.add("pluginOpened",e,t)},triggerOnPluginOpened:function(e){return buildfire.eventManager.trigger("pluginOpened",e)},getBackNavigationInstanceId:function(){var e=buildfire.parseQueryString();if(e.backnavigationinstance)return e.backnavigationinstance},navigateToTab(e={},t){e=new Packet(null,"navigation.navigateToTab",e);buildfire._sendPacket(e,t)}},getFrameType:function(){var e="launcherPluginv",t="controlIFrame",n="LAUNCHER_PLUGIN",i="CONTROL_FRAME",a="UNKNOWN",r=buildfire.fid;return r&&-1<r.indexOf(e)?n:r&&-1<r.indexOf(t)?i:a},appearance:{ready:function(){var e=new Packet(null,"appearance.ready");buildfire._sendPacket(e)},_defaultTheme:{appName:"",colors:{backgroundColor:"#ffffff",bodyText:"#858585",dangerTheme:"#f24965",defaultTheme:"#07a05e",footerMenuBackgroundColor:"#ffffff",footerMenuIconColor:"#45cae6",headerText:"#000000",icons:"#45cae6",infoTheme:"#66d6ed",primaryTheme:"#45cae6",successTheme:"#0ac775",titleBar:"#0ac775",titleBarTextAndIcons:"#ffffff",warningTheme:"#ffcf40"},fontId:"Lato",fontName:"Lato"},_setFontUrl:function(e,t){t.fontId&&(t.isCustomFont?t.fontUrl=`${e.endPoints.pluginRootHost}/${t.fontFolderPath}/${e.appId}/${encodeURIComponent(t.fontFileName)}?cdn-buster=${t.fontLastUpdatedOn}`:t.fontUrl=`https://fonts.googleapis.com/css?family=${t.fontId}`)},getAppTheme:function(n){buildfire.getContext(function(e,t){e&&n(e,null),t?(buildfire.isWeb()&&!t.appTheme&&(t.appTheme=buildfire.appearance._defaultTheme),buildfire.appearance._setFontUrl(t,t.appTheme),n(null,t.appTheme)):n(null,null)})},getWidgetTheme:function(n){buildfire.getContext(function(e,t){return e?n(e,null):t?t.widgetTheme?(buildfire.appearance._setFontUrl(t,t.widgetTheme),n(null,t.widgetTheme)):buildfire.appearance.getAppTheme(n):void n(null,null)})},_forceCSSRender:function(){var e,t;0<window.location.href.indexOf("/widget/")&&(e=document.getElementsByTagName("html")[0],(t=document.createElement("style")).type="text/css",t.innerHTML="body{position:relative !important; z-index:1 !important;} .plugin-slide{position:relative !important;} .plugin-slide, .plugin-slide img{transform: translateZ(0) !important;",e.appendChild(t))},insertHTMLAttributes:function(){var n=document.getElementsByTagName("html")[0];0<window.location.href.indexOf("/widget/")?(n.setAttribute("buildfire","widget"),n.setAttribute("type","app")):n.setAttribute("buildfire","control");navigator.appVersion;var e,t,i=navigator.userAgent,a=navigator.appName,r=""+parseFloat(navigator.appVersion),o=parseInt(navigator.appVersion,10),l="Unknown OS";-1!=(t=i.indexOf("Opera"))?(a="Opera",r=i.substring(t+6),-1!=(t=i.indexOf("Version"))&&(r=i.substring(t+8))):-1!=(t=i.indexOf("MSIE"))?(a="Microsoft Internet Explorer",r=i.substring(t+5)):-1!=(t=i.indexOf("Chrome"))?(a="Chrome",r=i.substring(t+7)):-1!=(t=i.indexOf("Safari"))?(a="Safari",r=i.substring(t+7),-1!=(t=i.indexOf("Version"))&&(r=i.substring(t+8))):-1!=(t=i.indexOf("Firefox"))?(a="Firefox",r=i.substring(t+8)):(e=i.lastIndexOf(" ")+1)<(t=i.lastIndexOf("/"))&&(a=i.substring(e,t),r=i.substring(t+1),a.toLowerCase()==a.toUpperCase()&&(a=navigator.appName)),-1!=(t=(r=-1!=(t=r.indexOf(";"))?r.substring(0,t):r).indexOf(" "))&&(r=r.substring(0,t)),o=parseInt(""+r,10),isNaN(o)&&(r=""+parseFloat(navigator.appVersion),o=parseInt(navigator.appVersion,10)),-1!=navigator.appVersion.indexOf("Win")&&(l="Windows"),-1!=navigator.appVersion.indexOf("Mac")&&(l="MacOS"),-1!=navigator.appVersion.indexOf("X11")&&(l="UNIX"),-1!=navigator.appVersion.indexOf("Linux")&&(l="Linux"),n.setAttribute("os",l),n.setAttribute("browser",a),n.setAttribute("majorVersion",o),n.setAttribute("fullVersion",r);r=navigator.userAgent||navigator.vendor||window.opera;(r.match(/iPad/i)||r.match(/iPhone/i)||r.match(/iPod/i)||r.match(/Macintosh/i)&&1<navigator.maxTouchPoints)&&(r=new Packet(null,"appearance.getFooterMenu"),buildfire._sendPacket(r,function(e,t){e&&console.error(e),t&&t.settings&&t.settings.turnOnFooterMenu||n.setAttribute("safe-area","true")}))},getCSSFiles:function(e){var t=new Packet(null,"appearance.getCSSFiles");buildfire._sendPacket(t,e)},attachCSSFiles:function(){var n=[],e="",t=!(!buildfire.options||!buildfire.options.disableBootstrap)&&buildfire.options.disableBootstrap,i=!(!buildfire.options||!buildfire.options.disableTheme)&&buildfire.options.disableTheme,a=!(!buildfire.options||!buildfire.options.enableMDTheme)&&buildfire.options.enableMDTheme,r=!(!buildfire.options||!buildfire.options.disableFontIcons)&&buildfire.options.disableFontIcons;i||a||(i||t||n.push("styles/bootstrap.css"),0<=window.location.pathname.indexOf("/control/")?n.push("styles/siteStyle.css")&&n.push("styles/pluginScreen.css"):!(!buildfire.options||!buildfire.options.disableAppStyles)&&buildfire.options.disableAppStyles||n.push("styles/appStyle.css"));for(var o,l=document.getElementsByTagName("script"),s=0;s<l.length;s++){var d=l[s].src;if(0<d.indexOf("buildfire.js")){e=d.replace("/scripts/buildfire.js","");break}if(0<d.indexOf("buildfire.min.js")){e=d.replace("/scripts/buildfire.min.js","");break}if(d.match(/(\/scripts\/_bundle\S+.js)/gi)){e=d.replace(/(\/scripts\/_bundle\S+.js)/gi,"");break}}function c(e,t){var n="";void 0!==t.fontId&&"Arial"!==t.fontId&&"Sans-Serif"!==t.fontId&&"Helvetica"!==t.fontId&&"Shadows+into+Light"!==t.fontId&&"Asap+condensed"!==t.fontId&&t.fontUrl&&(t.isCustomFont?n+="@font-face { font-family: '"+t.fontId+"'; src: url('"+t.fontUrl+"') format('"+t.fontFormat+"'); }":n+="@import url('"+t.fontUrl+"');"),n+=':root:root {  --mdc-typography-font-family: unquote("'+t.fontName+', sans-serif");  --mdc-theme-primary:'+t.colors.primaryTheme+";  --mdc-theme-secondary:"+t.colors.successTheme+";  --mdc-theme-surface:"+t.colors.backgroundColor+";  --mdc-theme-background:"+t.colors.backgroundColor+";  --mdc-theme-error:"+t.colors.dangerTheme+";  --mdc-theme-on-background:"+t.colors.bodyText+";  --mdc-theme-on-primary: white;  --mdc-theme-on-secondary: white;  --mdc-theme-on-error: white;  --mdc-theme-on-surface:"+t.colors.bodyText+";  --mdc-theme-text-primary-on-background:"+t.colors.bodyText+";  --mdc-theme-text-secondary-on-background:"+t.colors.bodyText+";  --mdc-theme-text-disabled-on-background:"+t.colors.bodyText+";  --mdc-theme-text-primary-on-light: white;  --mdc-theme-text-secondary-on-light: white;  --mdc-theme-text-hint-on-light: white;  --mdc-theme-text-disabled-on-light: white;  --mdc-theme-text-icon-on-light:  white;  --mdc-theme-text-primary-on-dark: white;  --mdc-theme-text-secondary-on-dark: white;  --mdc-theme-text-hint-on-dark: white;  --mdc-theme-text-disabled-on-dark: white;  --mdc-theme-text-icon-on-dark: white;  --mdc-theme-text-icon-on-background:"+t.colors.icons+";}*:not(i):not(.material-icons):not(.mdc-icon):not(.mdc-button__icon):not(.mdc-icon-button__icon){ font-family: '"+t.fontName+"', sans-serif !important }.mdc-typography { font-family: "+t.fontName+", sans-serif }.mdc-typography--headline1 { font-family: "+t.fontName+", sans-serif }.mdc-typography--headline2 { font-family: "+t.fontName+", sans-serif }.mdc-typography--headline3 { font-family: "+t.fontName+", sans-serif }.mdc-typography--headline4 { font-family: "+t.fontName+", sans-serif }.mdc-typography--headline5 { font-family: "+t.fontName+", sans-serif }.mdc-typography--headline6 { font-family: "+t.fontName+", sans-serif }.mdc-typography--subtitle1 { font-family: "+t.fontName+", sans-serif }.mdc-typography--subtitle2 { font-family: "+t.fontName+", sans-serif }.mdc-typography--body1 { font-family: "+t.fontName+", sans-serif }, sans-serif.mdc-typography--body2 { font-family: "+t.fontName+", sans-serif }.mdc-typography--caption { font-family: "+t.fontName+", sans-serif }.mdc-typography--button { font-family: "+t.fontName+", sans-serif }.mdc-typography--overline { font-family: "+t.fontName+", sans-serif }.mdc-theme--primary { color: #6200ee !important; color: var(--mdc-theme-primary, #6200ee) !important; }.mdc-theme--secondary { color: #018786 !important; color: var(--mdc-theme-secondary, #018786) !important; }.mdc-theme--background { background-color: #fff; background-color: var(--mdc-theme-background, #fff);}.mdc-theme--surface { background-color: #fff; background-color: var(--mdc-theme-surface, #fff);}.mdc-theme--error { color: #b00020 !important; color: var(--mdc-theme-error, #b00020) !important;}.mdc-theme--on-primary { color: #fff !important; color: var(--mdc-theme-on-primary, #fff) !important;}.mdc-theme--on-secondary { color: #fff !important; color: var(--mdc-theme-on-secondary, #fff) !important;}.mdc-theme--on-surface { color: #000 !important; color: var(--mdc-theme-on-surface, #000) !important;}.mdc-theme--on-error { color: #fff !important; color: var(--mdc-theme-on-error, #fff) !important;}.mdc-theme--text-primary-on-background { color: rgba(0, 0, 0, 0.87) !important; color: var(--mdc-theme-text-primary-on-background, rgba(0, 0, 0, 0.87)) !important;}.mdc-theme--text-secondary-on-background { color: rgba(0, 0, 0, 0.54) !important; color: var(--mdc-theme-text-secondary-on-background, rgba(0, 0, 0, 0.54)) !important;}.mdc-theme--text-hint-on-background {color: rgba(0, 0, 0, 0.38) !important; color: var(--mdc-theme-text-hint-on-background, rgba(0, 0, 0, 0.38)) !important;}.mdc-theme--text-disabled-on-background {color: rgba(0, 0, 0, 0.38) !important; color: var(--mdc-theme-text-disabled-on-background, rgba(0, 0, 0, 0.38)) !important;}.mdc-theme--text-icon-on-background { color: rgba(0, 0, 0, 0.38) !important; color: var(--mdc-theme-text-icon-on-background, rgba(0, 0, 0, 0.38)) !important;}.mdc-theme--text-primary-on-light { color: rgba(0, 0, 0, 0.87) !important; color: var(--mdc-theme-text-primary-on-light, rgba(0, 0, 0, 0.87)) !important;}.mdc-theme--text-secondary-on-light { color: rgba(0, 0, 0, 0.54) !important; color: var(--mdc-theme-text-secondary-on-light, rgba(0, 0, 0, 0.54)) !important;}.mdc-theme--text-hint-on-light { color: rgba(0, 0, 0, 0.38) !important; color: var(--mdc-theme-text-hint-on-light, rgba(0, 0, 0, 0.38)) !important;}.mdc-theme--text-disabled-on-light { color: rgba(0, 0, 0, 0.38) !important; color: var(--mdc-theme-text-disabled-on-light, rgba(0, 0, 0, 0.38)) !important;}.mdc-theme--text-icon-on-light { color: rgba(0, 0, 0, 0.38) !important; color: var(--mdc-theme-text-icon-on-light, rgba(0, 0, 0, 0.38)) !important;}.mdc-theme--text-primary-on-dark { color: white !important; color: var(--mdc-theme-text-primary-on-dark, white) !important;}.mdc-theme--text-secondary-on-dark { color: rgba(255, 255, 255, 0.7) !important; color: var(--mdc-theme-text-secondary-on-dark, rgba(255, 255, 255, 0.7)) !important;}.mdc-theme--text-hint-on-dark { color: rgba(255, 255, 255, 0.5) !important; color: var(--mdc-theme-text-hint-on-dark, rgba(255, 255, 255, 0.5)) !important;}.mdc-theme--text-disabled-on-dark { color: rgba(255, 255, 255, 0.5) !important; color: var(--mdc-theme-text-disabled-on-dark, rgba(255, 255, 255, 0.5)) !important;}.mdc-theme--text-icon-on-dark { color: rgba(255, 255, 255, 0.5) !important; color: var(--mdc-theme-text-icon-on-dark, rgba(255, 255, 255, 0.5)) !important;}.mdc-theme--primary-bg { background-color: #6200ee !important; background-color: var(--mdc-theme-primary, #6200ee) !important;}.mdc-theme--secondary-bg { background-color: #018786 !important; background-color: var(--mdc-theme-secondary, #018786) !important;}",o.innerHTML=n}buildfire.appearance.getWidgetTheme(function(e,t){if(e)return console.error(e);e=document.createElement("style");e.id="bfWidgetTheme",e.rel="stylesheet",e.innerHTML=buildfire.appearance._getCommonCss(t),(document.head||document.body).appendChild(e),n.push("styles/bfUIElements.css"),!r&&(0<=window.location.pathname.indexOf("/widget/")&&(i||a)||window.location.pathname.indexOf("/control/"))&&function(e){let t;t=e&&e.icons&&e.icons.iconPack?e.icons.iconPack:"glyph";let n="";n="bootstrap"===t?buildfire.isWidget()?"../../../styles/icons/bootstrap@5.0/bf-bootstrap-icons.css":"../../../../styles/icons/bootstrap@5.0/bf-bootstrap-icons.css":buildfire.isWidget()?"../../../styles/icons/glyph@3.0/bf-glyph-icons.css":"../../../../styles/icons/glyph@3.0/bf-glyph-icons.css",n&&buildfire.appearance._attachAppCSSFiles(n,"bfFontIcons")}(t)}),a&&((o=document.createElement("style")).id="appMDTheme",o.type="text/css",buildfire.appearance.getAppTheme(function(e,t){c(0,t),(document.head||document.body).appendChild(o)}),buildfire.appearance.onUpdate(function(n){buildfire.getContext((e,t)=>{e&&console.error(e),t&&buildfire.appearance._setFontUrl(t,n),c(0,n)})})),"/"!=e[e.length-1]&&(e+="/");t=document.createElement("style");t.type="text/css",t.innerHTML='@media(max-width: 1200px){/* Remove Scrollbars */[buildfire="widget"] ::-webkit-scrollbar,[buildfire="widget"] html::-webkit-scrollbar,[buildfire="widget"] body::-webkit-scrollbar,[buildfire="widget"] html *::-webkit-scrollbar,[buildfire="widget"] body *::-webkit-scrollbar{display: none !important;}[buildfire="widget"] html,[buildfire="widget"] body,[buildfire="widget"] html *,[buildfire="widget"] body *{-ms-overflow-style: none;scrollbar-width: none;}}',(document.head||document.body).appendChild(t);for(s=0;s<n.length;s++)document.write('<link rel="stylesheet" href="'+e+n[s]+'"/>')},disableFastClickOnLoad:!1,attachFastClick:function(){for(var e,t,n=document.getElementsByTagName("script"),i=["buildfire.js","buildfire.min.js","buildfire_lightcarousel.min.js","jquery_angular_buildfire_smartcrop.min.js"],a=0;a<n.length;a++)for(var r=0;r!==i.length;r++){var o=i[r];if(0<n[a].src.indexOf(o)){e=n[a].src.replace(o,"fastclick.js").replace("_bundles/","");break}if(0<n[a].src.indexOf("fastclick.js")){console.warn("fastclick already attached");break}}e?((t=document.createElement("script")).src=e,t.type="text/javascript",t.onload=function(){"undefined"==typeof FastClick?console.error("fastclick undefined"):FastClick.attach(document.body)},document.body.appendChild(t)):console.warn("fastclick.js requires a buildfire.js reference.")},applyFastClick:function(e){e=e||document.body,"undefined"==typeof FastClick?console.error("fastclick undefined"):FastClick.attach(e)},attachAppThemeCSSFiles:function(e,t,n){t=`${n}/api/app/styles/appTheme.css?appId=${e}&liveMode=${t}&v=${buildfire.appearance.CSSBusterCounter}&isWeb=true`;this._attachAppCSSFiles(t,"appThemeCSS")},attachLocalAppThemeCSSFiles:function(e){this._attachAppCSSFiles(`../../../../app/scripts/offline/appTheme${e}.css`,"appThemeCSS")},attachCustomAppCSSUrl:function(e,t,n){t=`${n}/api/app/styles/customAppCSS.css?appId=${e}&liveMode=${t}&v=${buildfire.appearance.CSSBusterCounter}`;this._attachAppCSSFiles(t,"customAppCSS")},attachLocalCustomAppCSSUrl:function(e){this._attachAppCSSFiles(`../../../../app/scripts/offline/customAppCSS${e}.css`,"customAppCSS")},_attachAppCSSFiles:function(e,t){var n=document.createElement("link");buildfire.appearance.CSSBusterCounter=0,n.setAttribute("rel","stylesheet"),n.setAttribute("type","text/css"),n.setAttribute("id",t),n.setAttribute("href",e),document.getElementsByTagName("head")[0].appendChild(n)},_resizedTo:0,autosizeContainer:function(){var e,t;try{e=Math.max(document.documentElement.clientHeight,document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight)}catch(e){}!e||buildfire.appearance._resizedTo==e||e<100||(t=new Packet(null,"appearance.autosizeContainer",{height:e}),buildfire._sendPacket(t),buildfire.appearance._resizedTo=e)},setHeaderVisibility:function(e){e=new Packet(null,"appearance.setHeaderVisibility",e);buildfire._sendPacket(e)},onUpdate:function(e,t){return buildfire.eventManager.add("appearanceOnUpdate",e,t)},triggerOnUpdate:function(n){var e=document.getElementById("appThemeCSS");e&&(e.href=e.href.replace("&v="+buildfire.appearance.CSSBusterCounter,"&v="+ ++buildfire.appearance.CSSBusterCounter));var i,e=document.getElementById("customAppCSS");e&&(e.href=e.href.replace("&v="+buildfire.appearance.CSSBusterCounter,"&v="+ ++buildfire.appearance.CSSBusterCounter)),n&&((i=document.getElementById("bfWidgetTheme"))&&buildfire.getContext((e,t)=>{e&&console.error(e),t&&buildfire.appearance._setFontUrl(t,n),i.innerHTML=buildfire.appearance._getCommonCss(n)}),buildfire.eventManager.trigger("appearanceOnUpdate",n),buildfire.dynamic.triggerContextChange({contextProperty:"appTheme",data:n}))},titlebar:{show:function(e,t){var n=new Packet(null,"appearance.titlebar.show");buildfire._sendPacket(n,t)},hide:function(e,t){var n=new Packet(null,"appearance.titlebar.hide");buildfire._sendPacket(n,t)},isVisible:function(e,t){var n=new Packet(null,"appearance.titlebar.isVisible");buildfire._sendPacket(n,t)},setText:function(e,t){e=new Packet(null,"appearance.titlebar.setText",e);buildfire._sendPacket(e,t)}},navbar:{show:function(e,t){var n=new Packet(null,"appearance.navbar.show");buildfire._sendPacket(n,t)},hide:function(e,t){var n=new Packet(null,"appearance.navbar.hide");buildfire._sendPacket(n,t)}},sideMenu:{show:function(e,t){var n=new Packet(null,"appearance.sideMenu.show");buildfire._sendPacket(n,t)},hide:function(e,t){var n=new Packet(null,"appearance.sideMenu.hide");buildfire._sendPacket(n,t)},open:function(e,t){var n=new Packet(null,"appearance.sideMenu.open");buildfire._sendPacket(n,t)},close:function(e,t){var n=new Packet(null,"appearance.sideMenu.close");buildfire._sendPacket(n,t)}},fullScreenMode:{enable:function(e,t){var n=new Packet(null,"appearance.fullScreenMode.enable");buildfire._sendPacket(n,t)},disable:function(e,t){var n=new Packet(null,"appearance.fullScreenMode.disable");buildfire._sendPacket(n,t)}},_getCommonCss:function(e){var t="";void 0!==e.fontId&&"Arial"!==e.fontId&&"Sans-Serif"!==e.fontId&&"Helvetica"!==e.fontId&&"Shadows+into+Light"!==e.fontId&&"Asap+condensed"!==e.fontId&&e.fontUrl&&(e.isCustomFont?t+="@font-face { font-family: '"+e.fontId+"'; src: url('"+e.fontUrl+"') format('"+e.fontFormat+"'); }":t+="@import url('"+e.fontUrl+"');");let n=e.colors.bodyText;return e.colors.bodyText?.startsWith("#")&&(n=`${e.colors.bodyText}54`),t+=":root {--bf-theme-primary: "+e.colors.primaryTheme+" !important;--bf-theme-success: "+e.colors.successTheme+" !important;--bf-theme-warning: "+e.colors.warningTheme+" !important;--bf-theme-info: "+e.colors.infoTheme+" !important;--bf-theme-default: "+e.colors.defaultTheme+" !important;--bf-theme-danger: "+e.colors.dangerTheme+" !important;--bf-theme-background: "+e.colors.backgroundColor+" !important;--bf-theme-body-text: "+e.colors.bodyText+" !important;--bf-theme-container-highlight: "+n+" !important;--bf-theme-footer-background: "+e.colors.footerMenuBackgroundColor+" !important;--bf-theme-footer-icon: "+e.colors.footerMenuIconColor+" !important;--bf-theme-header-text: "+e.colors.headerText+" !important;--bf-theme-icons: "+e.colors.icons+" !important;--bf-theme-title-bar: "+e.colors.titleBar+" !important;--bf-theme-title-bar-text-icons: "+e.colors.titleBarTextAndIcons+" !important;--bf-font-family:"+e.fontName+", sans-serif !important}"}},analytics:{trackAction:function(e,t){t=new Packet(null,"analytics.trackActionCommand",{value:e,metadata:t});buildfire._sendPacket(t)},trackView:function(e,t){t=new Packet(null,"analytics.trackViewCommand",{value:e,metadata:t});buildfire._sendPacket(t)},registerEvent:function(e,t,n){"function"==typeof t&&(n=t,t=null);t=new Packet(null,"analytics.registerPluginEvent",{data:e,options:t});buildfire._sendPacket(t,n)},bulkRegisterEvents:function(e,t,n){"function"==typeof t&&(n=t,t=null);t=new Packet(null,"analytics.bulkRegisterPluginEvents",{events:e,options:t});buildfire._sendPacket(t,n)},unregisterEvent:function(e,t){e=new Packet(null,"analytics.unregisterPluginEvent",{key:e});buildfire._sendPacket(e,t)},bulkUnregisterEvents:function(e,t){e=new Packet(null,"analytics.bulkUnregisterPluginEvents",{keys:e});buildfire._sendPacket(e,t)},showReports:function(e,t){e=new Packet(null,"analytics.showReports",e=e||{});buildfire._sendPacket(e,t)}},datastore:{get:function(e,t){var n=typeof e;"undefined"==n?e="":"function"==n&&void 0===t&&(t=e,e="");e=new Packet(null,"datastore.get",{tag:e});buildfire._sendPacket(e,t)},getWithDynamicData:function(e,t){var n=typeof e;"undefined"==n?e="":"function"==n&&void 0===t&&(t=e,e="");e=new Packet(null,"datastore.get",{tag:e,withDynamicData:!0});buildfire._sendPacket(e,t)},getById:function(e,t,n){"function"==typeof e&&void 0===n&&(n=e,e="");var i=typeof t;"undefined"==i?t="":"function"==i&&void 0===n&&(n=t,t="");e=new Packet(null,"datastore.get",{tag:t,id:e});buildfire._sendPacket(e,n)},save:function(e,t,n){var i=typeof t;"undefined"==i?t="":"function"==i&&void 0===n&&(n=t,t="");e=new Packet(null,"datastore.save",{tag:t,obj:e});buildfire._sendPacket(e,function(e,t){t&&buildfire.datastore.triggerOnUpdate(t),n&&n(e,t)})},insert:function(e,t,n,i){var a=typeof n;"undefined"==a?n=!1:"function"==a&&void 0===i&&(i=n,n=!1);a=typeof t;"undefined"==a?t="":"function"==a&&void 0===i&&(i=t,t="");n=new Packet(null,"datastore.insert",{tag:t,obj:e,checkDuplicate:n});buildfire._sendPacket(n,function(e,t){t&&buildfire.datastore.triggerOnUpdate(t),i(e,t)})},bulkInsert:function(e,t,n){var i;e.constructor===Array?("undefined"==(i=typeof t)?t="":"function"==i&&void 0===n&&(n=t,t=""),e=new Packet(null,"datastore.bulkInsert",{tag:t,obj:e}),buildfire._sendPacket(e,function(e,t){t&&buildfire.datastore.triggerOnUpdate(t),n(e,t)})):n({code:"error",message:"the data should be an array"},null)},update:function(e,t,n,i){var a=typeof n;"undefined"==a?n="":"function"==a&&void 0===i&&(i=n,n="");t=new Packet(null,"datastore.update",{tag:n,id:e,obj:t});buildfire._sendPacket(t,function(e,t){t&&buildfire.datastore.triggerOnUpdate(t),i&&i(e,t)})},searchAndUpdate:function(e,t,n,i){var a=typeof n;"undefined"==a?n="":"function"==a&&void 0===i&&(i=n,n="");t=new Packet(null,"datastore.searchAndUpdate",{tag:n,search:e,obj:t});buildfire._sendPacket(t,function(e,t){t&&buildfire.datastore.triggerOnUpdate(t),i&&i(e,t)})},delete:function(e,t,n){var i=typeof t;"undefined"==i?t="":"function"==i&&void 0===n&&(n=t,t="");e=new Packet(null,"datastore.delete",{tag:t,id:e});buildfire._sendPacket(e,function(e,t){t&&buildfire.datastore.triggerOnUpdate(t),n&&n(e,t)})},bulkDelete:function(e,t,n){var i=typeof t;"undefined"==i?t="":"function"==i&&void 0===n&&(n=t,t=""),e.constructor===Array?0!=e.length?(e=new Packet(null,"datastore.bulkDelete",{tag:t,ids:e}),buildfire._sendPacket(e,function(e,t){t&&buildfire.datastore.triggerOnUpdate(t),n&&n(e,t)})):n({code:"error",message:"the data should not be empty"},null):n({code:"error",message:"the data should be an array"},null)},search:function(e,t,n){var i=typeof t;"undefined"==i?t="":"function"==i&&void 0===n&&(n=t,t=""),(e=void 0===e?{filter:{}}:e).filter||(e.filter={});e=new Packet(null,"datastore.search",{tag:t,obj:e});buildfire._sendPacket(e,function(e,t){n(e,t)})},onUpdate:function(e,t){return buildfire.eventManager.add("datastoreOnUpdate",e,t)},triggerOnUpdate:function(e){buildfire.eventManager.trigger("datastoreOnUpdate",e)},onRefresh:function(e,t){return buildfire.eventManager.add("datastoreOnRefresh",e,t)},triggerOnRefresh:function(e){buildfire.eventManager.trigger("datastoreOnRefresh",e)},disableRefresh:function(){var e=new Packet(null,"datastore.disableRefresh");buildfire._sendPacket(e)}},userData:{get:function(e,t){var n=typeof e;"undefined"==n?e="":"function"==n&&void 0===t&&(t=e,e="");e=new Packet(null,"userData.get",{tag:e});buildfire._sendPacket(e,t)},getById:function(e,t,n){"function"==typeof e&&void 0===n&&(n=e,e="");var i=typeof t;"undefined"==i?t="":"function"==i&&void 0===n&&(n=t,t="");e=new Packet(null,"userData.get",{tag:t,id:e});buildfire._sendPacket(e,n)},save:function(e,t,n,i){var a=typeof t;"undefined"==a?t="":"function"==a&&void 0===i&&(i=t,t="");a=typeof n;"undefined"==a?n="":"function"==a&&void 0===i&&(i=n,n="");e=new Packet(null,"userData.save",{tag:t,userToken:n,obj:e});buildfire._sendPacket(e,function(e,t){t&&buildfire.userData.triggerOnUpdate(t),i&&i(e,t)})},insert:function(e,t,n,i,a){var r=typeof n;"undefined"==r?n="":"function"==r&&void 0===a&&(a=n,n="");var o=typeof i;"undefined"==o?i=!1:"function"==o&&void 0===a&&(a=i,i=!1),"undefined"==(r=typeof n)?n="":"function"==r&&void 0===a&&(a=n,n="");r=typeof t;"undefined"==r?t="":"function"==r&&void 0===a&&(a=t,t="");i=new Packet(null,"userData.insert",{tag:t,userToken:n,obj:e,checkDuplicate:i});buildfire._sendPacket(i,function(e,t){t&&buildfire.userData.triggerOnUpdate(t),a(e,t)});var l=!1;if(e&&e._buildfire&&e._buildfire.index&&Object.keys(e._buildfire.index))for(var s=Object.keys(e._buildfire.index),d=["string1","date1","number1","array1","text"],c=0;c<s.length;c++){var u=s[c];if(-1<d.indexOf(u)&&e._buildfire.index[u]){l=!0;break}}l||console.warn("WARNING: no index on inserted data! Please see https://sdk.buildfire.com/docs/indexed-fields")},bulkInsert:function(e,t,n,i){var a;e.constructor===Array?("undefined"==(a=typeof n)?n="":"function"==a&&void 0===i&&(i=n,n=""),"undefined"==(a=typeof t)?t="":"function"==a&&void 0===i&&(i=t,t=""),e=new Packet(null,"userData.bulkInsert",{tag:t,userToken:n,obj:e}),buildfire._sendPacket(e,function(e,t){t&&buildfire.userData.triggerOnUpdate(t),i(e,t)})):i({code:"error",message:"the data should be an array"},null)},update:function(e,t,n,i,a){var r=typeof i;"undefined"==r?i="":"function"==r&&void 0===a&&(a=i,i="");r=typeof n;"undefined"==r?n="":"function"==r&&void 0===a&&(a=n,n="");t=new Packet(null,"userData.update",{tag:n,userToken:i,id:e,obj:t});buildfire._sendPacket(t,function(e,t){t&&buildfire.userData.triggerOnUpdate(t),a&&a(e,t)})},searchAndUpdate:function(e,t,n,i,a){var r=typeof i;"undefined"==r?i="":"function"==r&&void 0===a&&(a=i,i="");r=typeof n;"undefined"==r?n="":"function"==r&&void 0===a&&(a=n,n="");t=new Packet(null,"userData.searchAndUpdate",{tag:n,userToken:i,search:e,obj:t});buildfire._sendPacket(t,function(e,t){t&&buildfire.userData.triggerOnUpdate(t),a&&a(e,t)}),e.$text&&e.$text.$search||!(0<Object.keys(e).length)||buildfire._data._checkForIndex(e,0)||console.warn("WARNING: no index on search filter! Please see https://sdk.buildfire.com/docs/indexed-fields. Filter: "+JSON.stringify(e)),e.sort&&0<Object.keys(e.sort).length&&(buildfire._data._checkForIndex(e.sort,0)||console.warn("WARNING: no index on sort expression! Please see https://sdk.buildfire.com/docs/indexed-fields. Sort: "+JSON.stringify(e.sort)))},delete:function(e,t,n,i){var a=typeof n;"undefined"==a?n="":"function"==a&&void 0===i&&(i=n,n="");a=typeof t;"undefined"==a?t="":"function"==a&&void 0===i&&(i=t,t="");e=new Packet(null,"userData.delete",{tag:t,userToken:n,id:e});buildfire._sendPacket(e,function(e,t){t&&buildfire.userData.triggerOnUpdate(t),i&&i(e,t)})},bulkDelete:function(e,t,n,i){var a=typeof n;"undefined"==a?n="":"function"==a&&void 0===i&&(i=n,n="");a=typeof t;"undefined"==a?t="":"function"==a&&void 0===i&&(i=t,t=""),e.constructor===Array?0!=e.length?(e=new Packet(null,"userData.bulkDelete",{tag:t,userToken:n,ids:e}),buildfire._sendPacket(e,function(e,t){t&&buildfire.userData.triggerOnUpdate(t),i&&i(e,t)})):i({code:"error",message:"the data should not be empty"},null):i({code:"error",message:"the data should be an array"},null)},search:function(e,t,n){var i=typeof t;"undefined"==i?t="":"function"==i&&void 0===n&&(n=t,t=""),(e=void 0===e?{filter:{}}:e).filter||(e.filter={});t=new Packet(null,"userData.search",{tag:t,obj:e});buildfire._sendPacket(t,function(e,t){n(e,t)}),e.filter.$text&&e.filter.$text.$search||!(0<Object.keys(e.filter).length)||buildfire._data._checkForIndex(e.filter,0)||console.warn("WARNING: no index on search filter! Please see https://sdk.buildfire.com/docs/indexed-fields. Filter: "+JSON.stringify(e.filter)),e.sort&&0<Object.keys(e.sort).length&&(buildfire._data._checkForIndex(e.sort,0)||console.warn("WARNING: no index on sort expression! Please see https://sdk.buildfire.com/docs/indexed-fields. Sort: "+JSON.stringify(e.sort)))},aggregate:function(e,t,n){var i=typeof t;"undefined"==i?t="":"function"==i&&void 0===n&&(n=t,t="");t=new Packet(null,"userData.aggregate",{tag:t,obj:e=!e||"object"!=typeof e?{}:e});buildfire._sendPacket(t,function(e,t){n(e,t)})},onUpdate:function(e,t){return buildfire.eventManager.add("userDataOnUpdate",e,t)},triggerOnUpdate:function(e){buildfire.eventManager.trigger("userDataOnUpdate",e)},onRefresh:function(e,t){return buildfire.eventManager.add("userDataOnRefresh",e,t)},triggerOnRefresh:function(e){buildfire.eventManager.trigger("userDataOnRefresh",e)},disableRefresh:function(){var e=new Packet(null,"userData.disableRefresh");buildfire._sendPacket(e)}},publicData:{get:function(e,t){var n=typeof e;"undefined"==n?e="":"function"==n&&void 0===t&&(t=e,e="");e=new Packet(null,"publicData.get",{tag:e});buildfire._sendPacket(e,t)},getById:function(e,t,n){"function"==typeof e&&void 0===n&&(n=e,e="");var i=typeof t;"undefined"==i?t="":"function"==i&&void 0===n&&(n=t,t="");e=new Packet(null,"publicData.get",{tag:t,id:e});buildfire._sendPacket(e,n)},save:function(e,t,n){var i=typeof t;"undefined"==i?t="":"function"==i&&void 0===n&&(n=t,t="");e=new Packet(null,"publicData.save",{tag:t,obj:e});buildfire._sendPacket(e,function(e,t){t&&buildfire.publicData.triggerOnUpdate(t),n&&n(e,t)})},insert:function(e,t,n,i){var a=typeof n;"undefined"==a?n=!1:"function"==a&&void 0===i&&(i=n,n=!1);a=typeof t;"undefined"==a?t="":"function"==a&&void 0===i&&(i=t,t="");n=new Packet(null,"publicData.insert",{tag:t,obj:e,checkDuplicate:n});buildfire._sendPacket(n,function(e,t){t&&buildfire.publicData.triggerOnUpdate(t),i(e,t)});var r=!1;if(e&&e._buildfire&&e._buildfire.index&&Object.keys(e._buildfire.index))for(var o=Object.keys(e._buildfire.index),l=["string1","date1","number1","array1","text"],s=0;s<o.length;s++){var d=o[s];if(-1<l.indexOf(d)&&e._buildfire.index[d]){r=!0;break}}r||console.warn("WARNING: no index on inserted data! Please see https://sdk.buildfire.com/docs/indexed-fields")},bulkInsert:function(e,t,n){var i;e.constructor===Array?("undefined"==(i=typeof t)?t="":"function"==i&&void 0===n&&(n=t,t=""),e=new Packet(null,"publicData.bulkInsert",{tag:t,obj:e}),buildfire._sendPacket(e,function(e,t){t&&buildfire.publicData.triggerOnUpdate(t),n(e,t)})):n({code:"error",message:"the data should be an array"},null)},update:function(e,t,n,i){var a=typeof n;"undefined"==a?n="":"function"==a&&void 0===i&&(i=n,n="");t=new Packet(null,"publicData.update",{tag:n,id:e,obj:t});buildfire._sendPacket(t,function(e,t){t&&buildfire.publicData.triggerOnUpdate(t),i&&i(e,t)})},searchAndUpdate:function(e,t,n,i){var a=typeof n;"undefined"==a?n="":"function"==a&&void 0===i&&(i=n,n="");t=new Packet(null,"publicData.searchAndUpdate",{tag:n,search:e,obj:t});buildfire._sendPacket(t,function(e,t){t&&buildfire.publicData.triggerOnUpdate(t),i&&i(e,t)}),e.$text&&e.$text.$search||!(0<Object.keys(e).length)||buildfire._data._checkForIndex(e,0)||console.warn("WARNING: no index on search filter! Please see https://sdk.buildfire.com/docs/indexed-fields. Filter: "+JSON.stringify(e)),e.sort&&0<Object.keys(e.sort).length&&(buildfire._data._checkForIndex(e.sort,0)||console.warn("WARNING: no index on sort expression! Please see https://sdk.buildfire.com/docs/indexed-fields. Sort: "+JSON.stringify(e.sort)))},delete:function(e,t,n){var i=typeof t;"undefined"==i?t="":"function"==i&&void 0===n&&(n=t,t="");e=new Packet(null,"publicData.delete",{tag:t,id:e});buildfire._sendPacket(e,function(e,t){t&&buildfire.publicData.triggerOnUpdate(t),n&&n(e,t)})},bulkDelete:function(e,t,n){var i=typeof t;"undefined"==i?t="":"function"==i&&void 0===n&&(n=t,t=""),e.constructor===Array?0!=e.length?(e=new Packet(null,"publicData.bulkDelete",{tag:t,ids:e}),buildfire._sendPacket(e,function(e,t){t&&buildfire.publicData.triggerOnUpdate(t),n&&n(e,t)})):n({code:"error",message:"the data should not be empty"},null):n({code:"error",message:"the data should be an array"},null)},search:function(e,t,n){var i=typeof t;"undefined"==i?t="":"function"==i&&void 0===n&&(n=t,t=""),(e=void 0===e?{filter:{}}:e).filter||(e.filter={});t=new Packet(null,"publicData.search",{tag:t,obj:e});buildfire._sendPacket(t,function(e,t){n(e,t)}),e.filter.$text&&e.filter.$text.$search||!(0<Object.keys(e.filter).length)||buildfire._data._checkForIndex(e.filter,0)||console.warn("WARNING: no index on search filter! Please see https://sdk.buildfire.com/docs/indexed-fields. Filter: "+JSON.stringify(e.filter)),e.sort&&0<Object.keys(e.sort).length&&(buildfire._data._checkForIndex(e.sort,0)||console.warn("WARNING: no index on sort expression! Please see https://sdk.buildfire.com/docs/indexed-fields. Sort: "+JSON.stringify(e.sort)))},aggregate:function(e,t,n){var i=typeof t;"undefined"==i?t="":"function"==i&&void 0===n&&(n=t,t="");t=new Packet(null,"publicData.aggregate",{tag:t,obj:e=!e||"object"!=typeof e?{}:e});buildfire._sendPacket(t,function(e,t){n(e,t)})},onUpdate:function(e,t){return buildfire.eventManager.add("publicDataOnUpdate",e,t)},triggerOnUpdate:function(e){buildfire.eventManager.trigger("publicDataOnUpdate",e)},onRefresh:function(e,t){return buildfire.eventManager.add("publicDataOnRefresh",e,t)},triggerOnRefresh:function(e){buildfire.eventManager.trigger("publicDataOnRefresh",e)},disableRefresh:function(){var e=new Packet(null,"publicData.disableRefresh");buildfire._sendPacket(e)}},appData:{get:function(e,t){this._isTagValid(e,t)&&(e=new Packet(null,"appData.get",{tag:e}),buildfire._sendPacket(e,t))},getById:function(e,t,n){"function"==typeof e&&void 0===n&&(n=e,e=""),this._isTagValid(t,n)&&(e=new Packet(null,"appData.get",{tag:t,id:e}),buildfire._sendPacket(e,n))},save:function(e,t,n){this._isTagValid(t,n)&&(e=new Packet(null,"appData.save",{tag:t,obj:e}),buildfire._sendPacket(e,function(e,t){t&&buildfire.appData.triggerOnUpdate(t),n&&n(e,t)}))},insert:function(e,t,n,i){var a=typeof n;if("undefined"==a?n=!1:"function"==a&&void 0===i&&(i=n,n=!1),this._isTagValid(t,i)){n=new Packet(null,"appData.insert",{tag:t,obj:e,checkDuplicate:n});buildfire._sendPacket(n,function(e,t){t&&buildfire.appData.triggerOnUpdate(t),i(e,t)});var r=!1;if(e&&e._buildfire&&e._buildfire.index&&Object.keys(e._buildfire.index))for(var o=Object.keys(e._buildfire.index),l=["string1","date1","number1","array1","text"],s=0;s<o.length;s++){var d=o[s];if(-1<l.indexOf(d)&&e._buildfire.index[d]){r=!0;break}}r||console.warn("WARNING: no index on inserted data! Please see https://sdk.buildfire.com/docs/indexed-fields")}},bulkInsert:function(e,t,n){e.constructor===Array?this._isTagValid(t,n)&&(e=new Packet(null,"appData.bulkInsert",{tag:t,obj:e}),buildfire._sendPacket(e,function(e,t){t&&buildfire.appData.triggerOnUpdate(t),n(e,t)})):n({code:"error",message:"the data should be an array"},null)},update:function(e,t,n,i){this._isTagValid(n,i)&&(t=new Packet(null,"appData.update",{tag:n,id:e,obj:t}),buildfire._sendPacket(t,function(e,t){t&&buildfire.appData.triggerOnUpdate(t),i&&i(e,t)}))},searchAndUpdate:function(e,t,n,i){this._isTagValid(n,i)&&(t=new Packet(null,"appData.searchAndUpdate",{tag:n,search:e,obj:t}),buildfire._sendPacket(t,function(e,t){t&&buildfire.appData.triggerOnUpdate(t),i&&i(e,t)}),e.$text&&e.$text.$search||!(0<Object.keys(e).length)||buildfire._data._checkForIndex(e,0)||console.warn("WARNING: no index on search filter! Please see https://sdk.buildfire.com/docs/indexed-fields. Filter: "+JSON.stringify(e)),e.sort&&0<Object.keys(e.sort).length&&(buildfire._data._checkForIndex(e.sort,0)||console.warn("WARNING: no index on sort expression! Please see https://sdk.buildfire.com/docs/indexed-fields. Sort: "+JSON.stringify(e.sort))))},delete:function(e,t,n){this._isTagValid(t,n)&&(e=new Packet(null,"appData.delete",{tag:t,id:e}),buildfire._sendPacket(e,function(e,t){t&&buildfire.appData.triggerOnUpdate(t),n&&n(e,t)}))},bulkDelete:function(e,t,n){this._isTagValid(t,n)&&(e.constructor===Array?0!=e.length?(e=new Packet(null,"appData.bulkDelete",{tag:t,ids:e}),buildfire._sendPacket(e,function(e,t){t&&buildfire.appData.triggerOnUpdate(t),n&&n(e,t)})):n({code:"error",message:"the data should not be empty"},null):n({code:"error",message:"the data should be an array"},null))},search:function(e,t,n){this._isTagValid(t,n)&&((e=void 0===e?{filter:{}}:e).filter||(e.filter={}),e.filter.$text&&e.filter.$text.$search||!(0<Object.keys(e.filter).length)||buildfire._data._checkForIndex(e.filter,0)||console.warn("WARNING: no index on search filter! Please see https://sdk.buildfire.com/docs/indexed-fields. Filter: "+JSON.stringify(e.filter)),e.sort&&0<Object.keys(e.sort).length&&(buildfire._data._checkForIndex(e.sort,0)||console.warn("WARNING: no index on sort expression! Please see https://sdk.buildfire.com/docs/indexed-fields. Sort: "+JSON.stringify(e.sort))),e=new Packet(null,"appData.search",{tag:t,obj:e}),buildfire._sendPacket(e,function(e,t){n(e,t)}))},aggregate:function(e,t,n){this._isTagValid(t,n)&&(t=new Packet(null,"appData.aggregate",{tag:t,obj:e=!e||"object"!=typeof e?{}:e}),buildfire._sendPacket(t,function(e,t){n(e,t)}))},onUpdate:function(e,t){return buildfire.eventManager.add("appDataOnUpdate",e,t)},triggerOnUpdate:function(e){buildfire.eventManager.trigger("appDataOnUpdate",e)},onRefresh:function(e,t){return buildfire.eventManager.add("appDataOnRefresh",e,t)},triggerOnRefresh:function(e){buildfire.eventManager.trigger("appDataOnRefresh",e)},disableRefresh:function(){var e=new Packet(null,"appData.disableRefresh");buildfire._sendPacket(e)},_isTagValid:function(e,t){var n="string"==typeof e&&e?!0:!1;return n||((t="function"!=typeof(t="function"==typeof e?e:t)?console.warn:t)({code:"error",message:"tag is required for appData, and must be a string"},null),n)}},_data:{_checkForIndex:function(t,n){if(10<=n)return console.error("Max index check limit reached"),!1;if(Array.isArray(t)){if(!t.length)return null;let e=!0;for(const r of t){var i=buildfire._data._checkForIndex(r,n+1);if(i)return!0;!1===i?e=!1:null===i&&!1!==e&&(e=!0)}return e}if("object"!=typeof t)return!1;{if(!t)return!1;if(!Object.keys(t).length)return null;let e=!1;for(const o in t)if(t.hasOwnProperty(o)){if("_buildfire"===o&&"object"==typeof t[o])return!!t[o].index;if(-1<o.indexOf("_buildfire.index")&&t[o])return!0;if("object"==typeof t[o]){var a=buildfire._data._checkForIndex(t[o],n+1);if(a)return!0;!1===a?e=!1:null===a&&(e=!0)}}return e}}},imageLib:{get ENUMS(){return{SIZES:{xxs:32,xs:64,s:128,m:200,l:304,xl:416,xxl:600,720:720,1080:1080,1440:1440,1920:1920,2560:2560,get full_width(){return this.findNearest(1)},get half_width(){return this.findNearest(2)},get third_width(){return this.findNearest(3)},get fourth_width(){return this.findNearest(4)},get quarter_width(){return this.findNearest(4)},get fifth_width(){return this.findNearest(5)},get sixth_width(){return this.findNearest(6)},findNearest:function(e){var t=null;for(size of this.VALID_SIZES.filter(e=>-1==e.indexOf("_")))if(window.innerWidth/e<this[size]){t=size;break}return t?this[t]:window.innerWidth},VALID_SIZES:["xxs","xs","s","m","l","xl","xxl","720","1080","1440","1920","2560","full_width","half_width","third_width","quarter_width","fifth_width","sixth_width"]},ASPECT_RATIOS:{"1:1":1,"4:3":.75,"16:9":.5625,"9:16":1.77777778,"11:5":.45454545,"4:1":.25,"2.39:1":.41841004,VALID_RATIOS:["1:1","4:3","16:9","9:16","11:5","4:1","2.39:1"]}}},showDialog:function(e,t){e=new Packet(null,"imageLib.showDialog",e);buildfire._sendPacket(e,t)},isProdImageServer:function(e){return 0==e.indexOf("http://imageserver.prod.s3.amazonaws.com")||0==e.indexOf("https://imageserver.prod.s3.amazonaws.com")||0==e.indexOf("https://s3-us-west-2.amazonaws.com/imageserver.prod")},resizeImage:function(e,t,n,i){if(!e)return null;var a=buildfire.getContext()?.forceImgix;const r=a?buildfire.imageLib._imgix:buildfire.imageLib._cloudImg,o=a?buildfire.imageLib._cloudImg:buildfire.imageLib._imgix;let l=r;if(r.isSupportedUrl(e))l=r;else{if(!o.isSupportedUrl(e))return console.warn("URL is not supported by resizeImage. Returning original URL: "+e),e;console.warn("Primary handler does not support URL for resizeImage. Using fallback handler."),l=o}if(t){if("object"!=typeof t)throw"options not an object"}else t={width:window.innerWidth};!t.disablePixelRation&&t.disablePixelRatio&&(t.disablePixelRation=t.disablePixelRatio),!t.disablePixelRatio&&t.disablePixelRation&&(t.disablePixelRatio=t.disablePixelRation);a=t.disablePixelRation?1:window.devicePixelRatio;if(a<1&&(a=1),"full"==t.width&&(t.width=window.innerWidth),"full"==t.height&&(t.height=window.innerHeight),t.size&&t.aspect){if(this.ENUMS.SIZES.VALID_SIZES.indexOf(t.size)<0){var s=this.ENUMS.SIZES.VALID_SIZES.join(", ");return console.warn("Invalid size. Available options are "+s+". Returning original url"),e}if(this.ENUMS.ASPECT_RATIOS.VALID_RATIOS.indexOf(t.aspect)<0){s=this.ENUMS.ASPECT_RATIOS.VALID_RATIOS.join(", ");return console.warn("Invalid aspect ratio. Available options are "+s+". Returning original url"),e}t.width=this.ENUMS.SIZES[t.size],t.height=t.width*this.ENUMS.ASPECT_RATIOS[t.aspect]}let d,c,u;t.width&&!t.height?d=Math.floor(t.width*a):!t.width&&t.height?c=Math.floor(t.height*a):t.width&&t.height&&(d=Math.floor(t.width*a),c=Math.floor(t.height*a)),t.blur&&(u=t.blur);e=l.constructUrl({width:d,height:c,url:e,blur:u,method:"resize"});return this._handleElement(n,e,i),e},cropImage:function(e,t,n,i){if(!e)return null;var a=buildfire.getContext()?.forceImgix;const r=a?buildfire.imageLib._imgix:buildfire.imageLib._cloudImg,o=a?buildfire.imageLib._cloudImg:buildfire.imageLib._imgix;let l=r;if(r.isSupportedUrl(e))l=r;else{if(!o.isSupportedUrl(e))return console.warn("URL is not supported by cropImage. Returning original URL: "+e),e;console.warn("Primary handler does not support URL for cropImage. Using fallback handler."),l=o}if("object"!=typeof(t=t||{}))throw"options not an object";if(!t.disablePixelRation&&t.disablePixelRatio&&(t.disablePixelRation=t.disablePixelRatio),!t.disablePixelRatio&&t.disablePixelRation&&(t.disablePixelRatio=t.disablePixelRation),t.size&&t.aspect){if(this.ENUMS.SIZES.VALID_SIZES.indexOf(t.size)<0){var s=this.ENUMS.SIZES.VALID_SIZES.join(", ");return console.warn("Invalid size. Available options are "+s+". Returning original url"),e}if(this.ENUMS.ASPECT_RATIOS.VALID_RATIOS.indexOf(t.aspect)<0){var d=this.ENUMS.ASPECT_RATIOS.VALID_RATIOS.join(", ");return console.warn("Invalid aspect ratio. Available options are "+d+". Returning original url"),e}t.width=this.ENUMS.SIZES[t.size],t.height=t.width*this.ENUMS.ASPECT_RATIOS[t.aspect]}if("full"==(t=!t.width&&!t.height?{width:"full",height:"full"}:t).width&&(t.width=window.innerWidth),"full"==t.height&&(t.height=window.innerHeight),!t.width||!t.height)return console.warn("cropImage does not have width or height please fix. returning original url"),e;s=window.devicePixelRatio;t&&t.disablePixelRatio&&(s=t.disablePixelRatio);d=Math.floor(t.width*s),s=Math.floor(t.height*s);let c;t.blur&&(c=t.blur);e=l.constructUrl({width:d,height:s,url:e,blur:c,method:"crop"});return this._handleElement(n,e,i),e},_handleElement:function(t,n,i){var a;t&&n&&(a=this._getLocalPath(n),"IMG"===t.tagName?(t.style.setProperty("opacity","0","important"),t.src=a,t.onload=function(){t.style.removeProperty("opacity"),i&&i(a)},t.onerror=function(){var e=new Packet(null,"imageCache.download",t.src=n);buildfire._sendPacket(e,function(){i&&i(a)})}):this._handleBgImage(t,a,n,i))},_handleBgImage:function(t,e,n,i){r(t,e);var a=new Image;function r(e,t){if(!t)return e.style.removeProperty("background-image");e.style.setProperty("background-image",'url("'+t+'")',"important")}a.src=e,a.onload=function(){i&&i(e)},a.onerror=function(){r(t,n);var e=new Packet(null,"imageCache.download",n);buildfire._sendPacket(e,function(e,t){e&&i&&i(n),window.requestAnimationFrame(function(){i&&i(t)})})}},_getLocalPath:function(e){if(buildfire.isWeb())return e;var t=(t=(e=e.replace(/(http|https):\/\/\S{0,8}.cloudimg.io\//g,"")).match(/(png|jpg|jpeg|gif|jfif|svg)/g)[0]||"")?"."+t:"",n=0;if(!e.length)return n;for(var i=0;i<e.length;i++){n=(n<<5)-n+e.charCodeAt(i);n|=0}return buildfire.getContext().endPoints.pluginHost.replace("pluginTemplate/plugins","imageCache/images")+"/"+n+t},getCompression:function(e){var t="n/";return e&&("number"==typeof e&&1<=e&&e<=100?/png-lossy-\d{1,3}.q\d{1,3}\//g.test(e="png-lossy-"+e+".q"+e+"/")&&(t=e):console.warn("Disabling compression, must be an integer between 1-100")),t},local:{_parser:document.createElement("a"),localImageLibPath:window.location.href.split("pluginTemplate/")[0]+"imageLib/",parseFileFromUrl:function(e){buildfire.imageLib.local._parser.href=e;e=buildfire.imageLib.local._parser.pathname.split("/");return 0==e.length?null:e[e.length-1]},toLocalPath:function(e){return buildfire.isFileServer(e)?this.localImageLibPath+this.parseFileFromUrl(e):null},resizeImage:function(e,n,i){if(n){if("object"!=typeof n)throw"options not an object"}else n={width:window.innerWidth};"full"==n.width&&(n.width=window.innerWidth),"full"==n.height&&(n.height=window.innerHeight);var a,t=buildfire.imageLib.local.toLocalPath(e);t?((a=new Image).src=t,a.onload=function(){n.width&&!n.height?n.height=a.height*n.width/a.width:!n.width&&n.height&&(n.width=a.width*n.height/a.width);var e=document.createElement("canvas"),t=e.getContext("2d");e.width=n.width,e.height=n.height,t.drawImage(a,0,0,n.width,n.height),i(null,e.toDataURL())},a.onerror=function(){i(null,buildfire.imageLib.resizeImage(e,n))}):i(null,buildfire.imageLib.resizeImage(e,n))},cropImage:function(e,a,r){if(window.navigator.onLine)r(null,buildfire.imageLib.cropImage(e,a));else{var o=a.disablePixelRatio?1:window.devicePixelRatio;if(a){if("object"!=typeof a)throw"options not an object"}else a={width:window.innerWidth};"full"==a.width&&(a.width=window.innerWidth),"full"==a.height&&(a.height=window.innerHeight);var l,t=buildfire.imageLib.local.toLocalPath(e);t?((l=new Image).src=t,l.onload=function(){var e=document.createElement("canvas"),t=e.getContext("2d"),n={width:0,height:0},i={x:0,y:0};a.width!==a.height?a.width>a.height?(n.width=a.width,n.height=l.height*a.width/l.width,i.y=(a.height-n.height)/2):(n.width=l.width*a.height/l.height,n.height=a.height,i.x=(a.width-n.width)/2):l.width<l.height?(n.width=a.width,n.height=l.height*a.width/l.width,i.y=(a.height-n.height)/2):(n.width=l.width*a.height/l.height,n.height=a.height,i.x=(a.width-n.width)/2),n.width*=o,n.height*=o,a.width*=o,a.height*=o,e.width=a.width,e.height=a.height,t.drawImage(l,i.x,i.y,n.width,n.height),r(null,e.toDataURL())},l.onerror=function(){r(null,buildfire.imageLib.cropImage(e,a))}):r(null,buildfire.imageLib.cropImage(e,a))}}},_imgix:{isSupportedUrl:function(e){var t=!(/\..{3,4}(?!.)/g.test(e)&&!/.(png|jpg|jpeg|gif|jfif|svg)(?!.)/gi.test(e)),n=-1!==e.indexOf("images.unsplash.com");return(t||n)&&null!=this._transformToImgix(e)},constructUrl:function({width:e,height:t,url:n,blur:i,method:a}){var r=this._transformToImgix(n);if(!r)return n;r=this._removeImageParams(r,["width","height","fit"]);const o=new URL(r);return"crop"===a&&(e||t)&&o.searchParams.set("fit","crop"),e&&o.searchParams.set("width",e),t&&o.searchParams.set("height",t),i&&o.searchParams.set("blur",i),o.toString()},_imgixWhitelistedUrls:{"http://imageserver.prod.s3.amazonaws.com":"https://buildfire.imgix.net","http://s3-us-west-2.amazonaws.com/imageserver.prod":"https://buildfire.imgix.net","http://pluginserver.buildfire.com":"https://bfplugins.imgix.net","http://s3.amazonaws.com/Kaleo.DevBucket":"https://bflegacy.imgix.net","http://s3-us-west-2.amazonaws.com/imagelibserver":"https://buildfire-uat.imgix.net","http://s3-us-west-2.amazonaws.com/pluginserver.uat":"https://bfplugins-uat.imgix.net","http://s3-us-west-2.amazonaws.com/pluginserver.uat2":"https://bfplugins-uat.imgix.net","http://s3-us-west-2.amazonaws.com/pluginserver.uat3":"https://bfplugins-uat.imgix.net","http://s3.us-west-2.amazonaws.com/imageserver.prod":"https://buildfire.imgix.net","http://s3.us-west-2.amazonaws.com/pluginserver.prod":"https://bfplugins.imgix.net","http://s3-us-west-2.amazonaws.com/pluginserver.prod":"https://bfplugins.imgix.net","http://d1q5x1plk9guz6.cloudfront.net":"https://bfplugins-uat.imgix.net","http://d3lkxgii6udy4q.cloudfront.net":"https://bfplugins-uat.imgix.net","http://d26kqod42fnsx0.cloudfront.net":"https://bfplugins-uat.imgix.net","http://images.unsplash.com":"https://images.unsplash.com","http://buildfire.imgix.net":"https://buildfire.imgix.net","http://bfplugins.imgix.net":"https://bfplugins.imgix.net","http://bflegacy.imgix.net":"https://bflegacy.imgix.net","http://buildfire-uat.imgix.net":"https://buildfire-uat.imgix.net","http://bfplugins-uat.imgix.net":"https://bfplugins-uat.imgix.net"},_transformToImgix:function(e){var t,n=e;for(t in e=(e=e.replace(/^https:\/\//i,"http://")).replace(/^https:\//i,"http://"),this._imgixWhitelistedUrls)if(0===e.indexOf(t))return-1!==e.indexOf("images.unsplash.com")&&(e=this._sanitizeUnsplashImage(e)),this._imgixWhitelistedUrls[t]+e.split(t)[1];var i=buildfire?._context?.appId;return`https://buidfire-proxy.imgix.net/${i?"app_"+i:"unknown"}/`+encodeURIComponent(n)},_sanitizeUnsplashImage:function(e){const t=new URL(e),n=["ixid","ixlib","fm"];return Array.from(t.searchParams.keys()).forEach(e=>{n.includes(e)||t.searchParams.delete(e)}),t.toString()},_removeImageParams:function(t,e){try{const n=new URL(t),i=n.searchParams;return e.forEach(e=>{i.delete(e)}),n.toString()}catch(e){return console.warn("Invalid URL provided to _removeImageParams:",t),t}}},_cloudImg:{isSupportedUrl:function(e){return-1===e.indexOf("images.unsplash.com")&&!(/\..{3,4}(?!.)/g.test(e)&&!/.(png|jpg|jpeg|gif|jfif|svg|webp)(?!.)/gi.test(e))},constructUrl:function({width:e,height:t,url:n,blur:i,method:a}){let r;var o=n.startsWith("https://alnnibitpo.cloudimg.io/v7/");r=o?n:"https://alnnibitpo.cloudimg.io/v7/"+n;n=this._removeImageParams(r,["width","height","func","ci_info"]);const l=new URL(n);return(e||t)&&l.searchParams.set("func","crop"===a?"crop":"bound"),e&&l.searchParams.set("width",e),t&&l.searchParams.set("height",t),i&&l.searchParams.set("blur",i),-1!==window.location.pathname.indexOf("&devMode=true")&&l.searchParams.set("ci_info","1"),l.toString()},_removeImageParams:function(t,e){try{const n=new URL(t),i=n.searchParams;return e.forEach(e=>{i.delete(e)}),n.toString()}catch(e){return console.warn("Invalid URL provided to _removeImageParams:",t),t}}}},colorLib:{showDialog:function(e,t,n,i){buildfire.eventManager.clear("colorLibOnChange"),"function"==typeof n&&buildfire.eventManager.add("colorLibOnChange",function(e){n(null,e)},!1);var a={};(a=t?JSON.parse(JSON.stringify(t)):a).data=e;a=new Packet(null,"colorLib.showDialog",a);buildfire._sendPacket(a,i)},_triggerOnChange:function(e){buildfire.eventManager.trigger("colorLibOnChange",e)}},notifications:{alert:function(e,t){console.warn("Notifications api is deprecated. Please use dialog api. https://github.com/BuildFire/sdk/wiki/How-to-use-Dialogs"),e&&e.buttonName&&!e.okButton&&(e.okButton={text:e.buttonName});e=new Packet(null,"notificationsAPI.alert",e);buildfire._sendPacket(e,t)},confirm:function(e,t){console.warn("Notifications api is deprecated. Please use dialog api. https://github.com/BuildFire/sdk/wiki/How-to-use-Dialogs"),e&&e.buttonLabels&&(e.confirmButton||(e.confirmButton={text:e.buttonLabels[0]}),e.cancelButton||(e.cancelButton={text:e.buttonLabels[1]}));e=new Packet(null,"notificationsAPI.confirm",e);buildfire._sendPacket(e,t)},prompt:function(e,t){e=new Packet(null,"notificationsAPI.prompt",e);buildfire._sendPacket(e,t)},beep:function(e,t){e=new Packet(null,"notificationsAPI.beep",e);buildfire._sendPacket(e,t)},vibrate:function(e,t){e=new Packet(null,"notificationsAPI.vibrate",e);buildfire._sendPacket(e,t)},showDialog:function(e,t){console.warn("Notifications api is deprecated. Please use dialog api. https://github.com/BuildFire/sdk/wiki/How-to-use-Dialogs");e=new Packet(null,"notificationsAPI.showDialog",e);buildfire._sendPacket(e,t)}},dialog:{alert:function(e,t){e=new Packet(null,"dialogAPI.alert",e);buildfire._sendPacket(e,function(){if(t)return t(null)})},confirm:function(e,t){e.confirmButtonText||(e.confirmButtonText="Confirm");e=new Packet(null,"dialogAPI.confirm",e);buildfire._sendPacket(e,t)},show:function(e,i){var t=new Packet(null,"dialogAPI.show",e),a=new Object;e.actionButtons&&e.actionButtons.length&&e.actionButtons.forEach(function(e){a[e.text]=e.action,delete e.action}),buildfire._sendPacket(t,function(e,t){var n;t&&t.selectedButton?((n=a[t.selectedButton.text])&&n(),t.selectedButton.action=n,i&&i(e,t.selectedButton)):i&&i(e)})},toast:function(e,n){var t=new Packet(null,"dialogAPI.toast",e),i=new Object;e.actionButton&&e.actionButton.action&&(i=Object.assign(i,e.actionButton),delete e.actionButton.action),buildfire._sendPacket(t,function(e,t){t?(i.action&&i.action(),n&&n(e,i)):n&&n(e,null)})}},bookmarks:{add:function(e,t){e=new Packet(null,"bookmarkAPI.add",e);buildfire._sendPacket(e,t)},_getParameterByName:function(e,t){t=t||window.location.href,e=e.replace(/[\[\]]/g,"\\$&");t=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return t?t[2]?decodeURIComponent(t[2].replace(/\+/g," ")):"":null},get:function(e){var t=buildfire.bookmarks._getParameterByName("bookmarkPayload");e(null,JSON.parse(t))},getAll:function(e){var t=new Packet(null,"bookmarkAPI.getAllFromPlugin");buildfire._sendPacket(t,e)},delete:function(e,t){e=new Packet(null,"bookmarkAPI.deleteFromPlugin",e);buildfire._sendPacket(e,t)}},actionItems:{showDialog:function(e,t,n){t=new Packet(null,"actionItems.showDialog",{actionItem:e,options:t});buildfire._sendPacket(t,n)},execute:function(e,t,n){"function"==typeof t&&(n=t);e=new Packet(null,"actionItems.execute",e);buildfire._sendPacket(e,n)},list:function(e,t,n){t=new Packet(null,"actionItems.list",{actionItems:e,options:t});buildfire._sendPacket(t,n)},create:function(e,t,n){return{action:e,iconUrl:t,title:n}}},history:{push:function(e,t,n){t=new Packet(null,"history.push",{label:e,options:t,source:"plugin"});buildfire._sendPacket(t,n)},onPop:function(e,t){return buildfire.eventManager.add("historyOnPop",e,t)},triggerOnPop:function(e){buildfire.eventManager.trigger("historyOnPop",e)},pop:function(e){var t=new Packet(null,"history.pop");buildfire._sendPacket(t,e)},get:function(e,t){e=new Packet(null,"history.get",e);buildfire._sendPacket(e,t)}},messaging:{sendMessageToControl:function(e){e=new Packet(null,"messaging.triggerOnNewControlMessage",e);buildfire._sendPacket(e)},sendMessageToWidget:function(e){e=new Packet(null,"messaging.triggerOnNewWidgetMessage",e);buildfire._sendPacket(e)},onReceivedMessage:function(e){console.info("onReceivedMessage ignored",window.location)},sendMessageToService:function(e){e=new Packet(null,"messaging.sendMessageToService",e);buildfire._sendPacket(e)},broadcast:function(n){if(!n||!n.message)throw new Error("options.message is required");if(n.source)throw new Error("options.source is not allowed");buildfire.getContext(function(e,t){t=new Packet(null,"messaging.broadcast",{source:{instanceId:t.instanceId,pluginId:t.pluginId,title:t.title,isWidgetService:buildfire.isWidgetService()},message:n.message});buildfire._sendPacket(t)})},onReceivedBroadcast:function(e){}},pluginInstance:{showDialog:function(e,t){e=new Packet(null,"pluginInstances.showDialog",{options:e});buildfire._sendPacket(e,t)},get:function(e,t){e=new Packet(null,"pluginInstances.get",e);buildfire._sendPacket(e,t)},search:function(e,t){e=new Packet(null,"pluginInstances.search",e);buildfire._sendPacket(e,t)},showCreatePluginInstancesDialog:function(e,t){"function"!=typeof e||t?e&&(e.skipPluginInstances=!0):(t=e,e={skipPluginInstances:!0}),buildfire.pluginInstance.showDialog(e,t)},create:function(e,t){e=new Packet(null,"pluginInstances.create",e);buildfire._sendPacket(e,t)},clone:function(e,t){e=new Packet(null,"pluginInstances.clone",e);buildfire._sendPacket(e,t)}},deeplink:{getData:function(e){if(buildfire.deeplink._data)return e(buildfire.deeplink._data);var t=buildfire.parseQueryString();t.dld?(t=JSON.parse(t.dld),e(buildfire.deeplink._data=t)):e(null)},template:{get:function(e){var t=new Packet(null,"deepLink.getTemplate",{});buildfire._sendPacket(t,e)}},setData:function(e,t,n){t=new Packet(null,"deepLink.setData",{data:e,options:t});buildfire._sendPacket(t,n)},createLink:function(e){console.log("this method is obsolete you have to call deeplink.template.get instead and it will return back the full deep link");var t="app"+buildfire._context.appId+"://plugin";return e?t+"?dld="+JSON.stringify(e):t},generateUrl:function(e,t){e=new Packet(null,"shortLinks.generate",e);buildfire._sendPacket(e,t)},registerDeeplink:function(i,a){if(a=a||function(e){e&&console.error(e)},!i)return a("Missing options parameter",null);if(!i.id)return a("Missing deeplink id",null);if(!i.name)return a("Missing deeplink name",null);if(!i.deeplinkData)return a("Missing deeplink deeplinkData",null);var r=this;buildfire.getContext(function(e,t){var n;e?a(e,null):t&&t.instanceId&&t.pluginId?(n={name:i.name,deeplinkId:i.id,imageUrl:i.imageUrl,deeplinkData:i.deeplinkData,pluginInstanceId:t.instanceId,pluginTypeId:t.pluginId,_buildfire:{index:{string1:t.instanceId,text:i.name,array1:[{string1:i.id}]}}},r.getDeeplink(i.id,function(e,t){return e?a(e,null):void(t?buildfire.appData.update(t.id,n,"$$deeplinks",a):buildfire.appData.insert(n,"$$deeplinks",!1,a))})):a("no context",null)})},getDeeplink:function(n,i){if(!i)return console.error("Missing callback parameter");buildfire.getContext(function(e,t){return e?i(e,null):void(t&&t.instanceId?(t={filter:{"_buildfire.index.string1":t.instanceId,"_buildfire.index.array1.string1":n}},buildfire.appData.search(t,"$$deeplinks",function(e,t){return e?i(e,null):void i(null,t?t[0]:null)})):i("no context",null))})},getAllDeeplinks:function(n,i){if(!i)return console.error("Missing callback parameter");n=n||{},buildfire.getContext(function(e,t){e?i(e,null):t&&t.instanceId?(t={pageSize:n.pageSize,filter:{"_buildfire.index.string1":t.instanceId}},buildfire.appData.search(t,"$$deeplinks",i)):i("no context",null)})},unregisterDeeplink:function(e,n){n=n||function(e){e&&console.error(e)},this.getDeeplink(e,function(e,t){return e?n(e,null):void(t?buildfire.appData.delete(t.id,"$$deeplinks",n):n("no result found for this deeplink id",null))})},onUpdate:function(e,t){buildfire.eventManager.add("deeplinkOnUpdate",e,t)},triggerOnUpdate:function(t){try{var e=buildfire.parseQueryString(decodeURIComponent(t));buildfire.deeplink._data=JSON.parse(e.dld)}catch(e){console.error(e),buildfire.deeplink._data=t}buildfire.eventManager.trigger("deeplinkOnUpdate",buildfire.deeplink._data)},_data:null},spinner:{show:function(e){buildfire._sendPacket(new Packet(null,"spinner.show",e))},hide:function(){buildfire._sendPacket(new Packet(null,"spinner.hide"))}},auth:{login:function(e,t){e=new Packet(null,"auth.login",e);buildfire._sendPacket(e,t)},logout:function(){var e=new Packet(null,"auth.logout");buildfire._sendPacket(e)},getCurrentUser:function(e){var t=new Packet(null,"auth.getCurrentUser");buildfire._sendPacket(t,e)},onLogin:function(e,t){return buildfire.eventManager.add("authOnLogin",e,t)},triggerOnLogin:function(e){buildfire.eventManager.trigger("authOnLogin",e),buildfire.dynamic.triggerContextChange({contextProperty:"appUser",data:e})},onLogout:function(e,t){return buildfire.eventManager.add("authOnLogout",e,t)},triggerOnLogout:function(e){buildfire.eventManager.trigger("authOnLogout",e),buildfire.dynamic.triggerContextChange({contextProperty:"appUser",data:e})},onUpdate:function(e,t){return buildfire.eventManager.add("authOnUpdate",e,t)},triggerOnUpdate:function(e){return buildfire.eventManager.trigger("authOnUpdate",e)},openProfile:function(e){e=new Packet(null,"auth.openProfile",e);buildfire._sendPacket(e)},getUserProfile:function(e,t){e=new Packet(null,"auth.getUserProfile",e);buildfire._sendPacket(e,t)},getUserProfiles:function(e,t){e=new Packet(null,"auth.getUserProfiles",e);buildfire._sendPacket(e,t)},getUsersByEmail:function(e,t){e=new Packet(null,"auth.getUsersByEmail",e);buildfire._sendPacket(e,t)},getUserPictureUrl:function(e){var t=null,n=null;if((e=e||{}).userId&&(t="userId",n=e.userId),e.email&&(t="email",n=e.email),e.username&&(t="username",n=e.username),!t||!n)throw Error("Invalid user picture params");t=t+"="+(n=encodeURIComponent(n)),n="https://auth.buildfire.com";return buildfire._context&&(buildfire._context.endPoints&&buildfire._context.endPoints.authHost&&(n=buildfire._context.endPoints.authHost),buildfire._context.appId&&(t=t+"&externalAppId="+encodeURIComponent(buildfire._context.appId))),n+"/src/server.js/user/picture?"+t+"&v="+(new Date).getTime()},showUsersSearchDialog:function(e,t){e=new Packet(null,"usersLib.showSearchDialog",e);buildfire._sendPacket(e,t)},showTagsSearchDialog:function(e,t){e=new Packet(null,"usersLib.showTagsSearchDialog",e);buildfire._sendPacket(e,t)},assignUserTags:function(e,t,n){t=new Packet(null,"userTags.assignUserTags",{tags:e,options:t});buildfire._sendPacket(t,n)},keepSessionAlive:function(e,t){buildfire._sendPacket(new Packet(null,"auth.keepSessionAlive",e),t)},searchUsers:function(e,t){e=new Packet(null,"auth.searchUsers",e);buildfire._sendPacket(e,t)},getDeletedUsers:function(e,n){return e&&e.fromDate?e.fromDate instanceof Date==0?n("fromDate must be a Date type.",null):void buildfire.appData.search({filter:{"_buildfire.index.date1":{$gte:e.fromDate.getTime()}}},"$$deletedUsers",(e,t)=>{if(e)return n(e,null);if(t){t=t.map(({data:e})=>({userId:e.userId,deletedOn:new Date(e._buildfire.index.date1)}));return n(null,t)}return n(null,[])}):n("params or fromDate not defined",null)}},device:{calendar:{addEvent:function(e,t){buildfire._sendPacket(new Packet(null,"device.calendar.addEvent",e),t)}},share:function(e,t){buildfire._sendPacket(new Packet(null,"device.share",e),t)},onAppBackgrounded:function(e,t){return buildfire.eventManager.add("deviceAppBackgrounded",e,t)},onAppResumed:function(e,t){return buildfire.eventManager.add("deviceAppResumed",e,t)},triggerOnAppBackgrounded:function(e){return buildfire.eventManager.trigger("deviceAppBackgrounded",e)},triggerOnAppResumed:function(e){return buildfire.eventManager.trigger("deviceAppResumed",e)},isKeyboardVisible:function(e,t){var n=document.documentElement.classList.contains("keyboard-visible");if(t)return t(null,n)},onKeyboardShow:function(e,t=!0){buildfire.eventManager.add("keyboardWillShow",e,t)},onKeyboardHide:function(e,t=!0){buildfire.eventManager.add("keyboardWillHide",e,t)},triggerKeyboardWillShow:function(e){const t=document.documentElement;t.classList.add("keyboard-visible"),t.style.setProperty("--bf-keyboard-height",`${e.keyboardHeight}px`),buildfire.eventManager.trigger("keyboardWillShow",{keyboardHeight:e.keyboardHeight})},triggerKeyboardWillHide:function(){const e=document.documentElement;e.classList.remove("keyboard-visible"),buildfire.eventManager.trigger("keyboardWillHide")},contacts:{showDialog:function(e,t){e=new Packet(null,"device.contacts.showDialog",e);buildfire._sendPacket(e,t)},search:function(e,t){e=new Packet(null,"device.contacts.search",e);buildfire._sendPacket(e,t)}},media:{savePicture:function(e,t){e=new Packet(null,"device.media.save",e);buildfire._sendPacket(e,t)},saveVideo:function(e,t){(e=e||{}).isVideo=!0;e=new Packet(null,"device.media.save",e);buildfire._sendPacket(e,t)}},downloads:{save:function(e,t){e=new Packet(null,"device.downloads.save",e);buildfire._sendPacket(e,t)}}},geo:{getCurrentPosition:function(e,t){buildfire._sendPacket(new Packet(null,"geo.getCurrentPosition",e),t)},watchPosition:function(e,t){buildfire._sendPacket(new Packet(null,"geo.watchPosition",e)),this.onPositionChange=t},onPositionChange:function(e,t){},clearWatch:function(e,t){buildfire._sendPacket(new Packet(null,"geo.clearWatch",e),t)},calculateDistance:function(e,t,n){var i=n&&"metric"===n.unitSystem?6371:3960,a=n&&n.decimalPlaces?n.decimalPlaces:2,r=buildfire.geo.degreesToRadians(t.latitude-e.latitude),n=buildfire.geo.degreesToRadians(t.longitude-e.longitude),e=buildfire.geo.degreesToRadians(e.latitude),t=buildfire.geo.degreesToRadians(t.latitude),t=Math.sin(r/2)*Math.sin(r/2)+Math.sin(n/2)*Math.sin(n/2)*Math.cos(e)*Math.cos(t),t=2*Math.atan2(Math.sqrt(t),Math.sqrt(1-t));return buildfire.geo.round(i*t,a)},round:function(e,t){return Number(Math.round(e+"e"+t)+"e-"+t)},degreesToRadians:function(e){return e*Math.PI/180},startTracking:function(n,i){buildfire.getContext((e,t)=>e?i(e,null):void(t&&t.instanceId?((n||{}).instanceId=t.instanceId,buildfire._sendPacket(new Packet(null,"geo.startTracking",n),i)):i("instanceId not found",null)))},isTracking:function(n,i){buildfire.getContext((e,t)=>e?i(e,null):void(t&&t.instanceId?((n||{}).instanceId=t.instanceId,buildfire._sendPacket(new Packet(null,"geo.isTracking",n),i)):i("instanceId not found",null)))},stopTracking:function(n,i){buildfire.getContext((e,t)=>e?i(e,null):void(t&&t.instanceId?((n||{}).instanceId=t.instanceId,buildfire._sendPacket(new Packet(null,"geo.stopTracking",n),i)):i("instanceId not found",null)))},session:{create:function(n,i){buildfire.getContext((e,t)=>e?i(e,null):void(t&&t.instanceId?((n||{}).instanceId=t.instanceId,buildfire._sendPacket(new Packet(null,"geo.session.create",n),i)):i("instanceId not found",null)))},delete:function(e,t){buildfire._sendPacket(new Packet(null,"geo.session.delete",e),t)},addUsers:function(e,t){buildfire._sendPacket(new Packet(null,"geo.session.addUsers",e),t)},removeUsers:function(e,t){buildfire._sendPacket(new Packet(null,"geo.session.removeUsers",e),t)},updateInfo:function(e,t){buildfire._sendPacket(new Packet(null,"geo.session.updateInfo",e),t)},get:function(e,t){buildfire._sendPacket(new Packet(null,"geo.session.get",e),t)},getCurrentUserSessions:function(e,t){buildfire._sendPacket(new Packet(null,"geo.session.getCurrentUserSessions",e),t)},enableTrackability:function(e,t){(e||{}).isTrackable=!0,buildfire._sendPacket(new Packet(null,"geo.session.updateUser",e),t)},disableTrackability:function(e,t){(e||{}).isTrackable=!1,buildfire._sendPacket(new Packet(null,"geo.session.updateUser",e),t)},startWatch:function(i,a){buildfire.getContext((e,t)=>{if(e)return a(e,null);if(!i||!i.sessionId)return a("please provide a valid sessionId",null);if(t&&t.instanceId){const n=t.instanceId+"-"+i.sessionId+"-"+Date.now();i.instanceId=t.instanceId,i.watchId=n,buildfire._sendPacket(new Packet(null,"geo.session.startSessionWatch",i),(e,t)=>{e&&a(e,null)}),buildfire.eventManager.add("onSessionWatchChange",function({watchId:e,session:t}){e==n&&a(null,{session:t,watchId:e})},!0)}else a("instanceId not found",null)})},_triggerOnSessionWatchChange:function(e){buildfire.eventManager.trigger("onSessionWatchChange",e)},stopWatch:function(e,t){buildfire._sendPacket(new Packet(null,"geo.session.stopSessionWatch",e),t)}},_updateLastKnownLocation:function(e,t){buildfire._sendPacket(new Packet(null,"geo._updateLastKnownLocation",e),t)}},localStorage:{setItem:function(n,i,a){a=a||function(e){e&&console.error(e)},"object"==typeof i?i=JSON.stringify(i):i+="",buildfire._sendPacket(new Packet(null,"localStorage.setItem",{key:n,value:i}),a),buildfire.getContext(function(e,t){e?a(e):t?(t.localStorage=t.localStorage||[],t.localStorage[n]=i):a(null,"no context")})},getItem:function(n,i){var e,t;return i?(e=buildfire.getContext(function(e,t){e?i(e):t&&t.localStorage?(t=t.localStorage[n],i(null,void 0===t?null:t)):i(null,null)}))&&e.localStorage?void 0===(t=e.localStorage[n])?null:t:void 0:!(e=buildfire.getContext())||!e.localStorage||void 0===(t=e.localStorage[n])?null:t},removeItem:function(n,i){i=i||function(e){e&&console.error(e)},buildfire._sendPacket(new Packet(null,"localStorage.removeItem",n),i),buildfire.getContext(function(e,t){e?i(e):t&&t.localStorage?delete t.localStorage[n]:i(null,"no context")})},clear:function(n){n=n||function(e){e&&console.error(e)},buildfire._sendPacket(new Packet(null,"localStorage.clear",{}),n),buildfire.getContext(function(e,t){e?n(e):t?t.localStorage=[]:n(null,"no context")})},overrideNativeLocalStorage:function(){localStorage.getItem=function(e){return buildfire.localStorage.getItem(e)},localStorage.setItem=function(e,t){return buildfire.localStorage.setItem(e,t)},localStorage.removeItem=function(e){return buildfire.localStorage.removeItem(e)},localStorage.clear=function(){return buildfire.localStorage.clear()}}},input:{showTextDialog:function(e,t){buildfire._sendPacket(new Packet(null,"input.showTextDialog",e),t)},showListDialog:function(e,t){buildfire._sendPacket(new Packet(null,"input.showListDialog",e),t)}},imagePreviewer:{show:function(e,t){buildfire._sendPacket(new Packet(null,"imagePreviewer.show",e),t)}},mediaPreviewer:{show:function(e,t){buildfire._sendPacket(new Packet(null,"mediaPreviewer.show",e),t)}},notes:{openDialog:function(e,t){buildfire._sendPacket(new Packet(null,"notes.openDialog",e),t)},onSeekTo:function(e,t){return buildfire.eventManager.add("NOTES_SEEK_TO",e,t)},triggerOnSeekTo:function(e){buildfire.eventManager.trigger("NOTES_SEEK_TO",e,!1)},getByItemId:function(e,t){buildfire._sendPacket(new Packet(null,"notes.getByItemId",e),t)}},dynamicBlocks:{execute:function(e){document.querySelectorAll(".bf-wysiwyg-hide-app").forEach(function(e){e.classList.remove("bf-wysiwyg-hide-app")})}},dynamic:{requestWidgetContext(e,t){e=new Packet(null,"dynamic.triggerRequestWidgetContext",e);buildfire._sendPacket(e,t)},onReceivedWidgetContextRequest(e,n){buildfire.dynamic.expressions._prepareContext(null,(e,t)=>e?n(e):void n(null,buildfire.dynamic.expressions._cleanseContext(t)))},triggerContextChange(e){"undefined"!=typeof dynamicEngine&&dynamicEngine.triggerContextChange(...arguments)},execute(e){if(e.parentElement){const t=e.parentElement;e=t.querySelectorAll("[data-type]");const n=["dynamic-expression"];Array.from(e).forEach(e=>{var t=e.dataset["type"];if(!t||!n.includes(t))throw"invalid_dynamic_block_type";"dynamic-expression"===t&&this.expressions.handleContentExecution(e)})}},expressions:{requestPluginCustomExpressions(e,t){e=new Packet(null,"dynamic.expressions.triggerRequestCustomExpressions",e);buildfire._sendPacket(e,t)},onReceivedCustomExpressionsRequest(e,n){buildfire.dynamic.expressions.getCustomExpressions?buildfire.dynamic.expressions.getCustomExpressions(null,(e,t)=>e?n(e):void n(null,t)):n(null,null)},_prepareContext(e,n){if("control"==buildfire.getContext().type){var t={request:{instanceId:buildfire.getContext().instanceId}};buildfire.dynamic.requestWidgetContext(t,(e,t)=>e?n(e):void buildfire.dynamic.expressions._mergeContext({context:t},n))}else{const{appId:i,appTheme:a,pluginId:r}=buildfire.getContext();buildfire.auth.getCurrentUser((e,t)=>{if(e)return n(e);t={appUser:t,appId:i,appTheme:a,pluginId:r};buildfire.dynamic.expressions._mergeContext({context:t},n)})}},_mergeContext({context:n},i){buildfire.dynamic.expressions.getContext?buildfire.dynamic.expressions.getContext(null,(e,t)=>{i(null,{...n,...t})}):i(null,n)},_cleanseContext(t){let n={};return Object.keys(t).forEach(e=>{"function"!=typeof t[e]&&(n[e]=t[e])}),n.sdk=null,n},_dynamicEngineQueue:[],_htmlContainers:{},_getDynamicEngine(t){if(0<this._dynamicEngineQueue.length)this._dynamicEngineQueue.push(t);else if("undefined"!=typeof dynamicEngine)t(null,dynamicEngine);else{let e;this._dynamicEngineQueue.push(t),e="control"==buildfire.getContext().type?"../../../../scripts/dynamic/dynamicEngine.min.js":"../../../scripts/dynamic/dynamicEngine.min.js";buildfire.loadScript({url:e,scriptId:"dynamicEngine"},()=>{dynamicEngine.expressions.getContext=this._prepareContext,dynamicEngine.getGlobalSettings=buildfire.getGlobalSettings,n(dynamicEngine)})}const n=t=>{this._dynamicEngineQueue.forEach(e=>{e(null,t)}),this._dynamicEngineQueue=[]}},evaluate(n,i){this._getDynamicEngine((e,t)=>e?i(e):void t.expressions.evaluate(n,i))},handleContentExecution(e){const t=(e.parentElement.classList.contains("bf-wysiwyg-top")?e.parentElement:e).parentElement;if(t){(e.parentElement.innerText||1!==e.parentElement.children.length?e:e.parentElement).remove();let a=e.getAttribute("data-id"),r=buildfire.dynamic.expressions._htmlContainers;r[a]=r[a]||[],r[a].push(t);e=t.innerHTML.replace(/bf-wysiwyg-hide-app/g,"");this.evaluate({id:a,expression:e},(e,t)=>{let n=r[a].find(e=>null!==e.parentElement);if(n)if(r[a]=[n],e){if(buildfire.getContext().liveMode)throw e;n.classList.add("bf-expression-error"),n.innerHTML=`<span style="color: #E36049">Error:</span><br><br>${e.message}`}else{let e=document.createElement("div");e.innerHTML=t.evaluatedExpression;const i=e.querySelectorAll("*");i.forEach(i=>{Array.from(i.attributes).forEach(({name:e})=>{if(e.startsWith("expr-")||e.startsWith("data-expr-")){const n=e.replace("data-","");var t=n.slice(5);i.getAttribute(e)&&!i.getAttribute(e).includes("undefined")&&(i.setAttribute(t,i.getAttribute(e)),i.removeAttribute(e))}})}),n.innerHTML=e.innerHTML,n.classList.remove("bf-expression-error")}else r[a]=[]})}},showDialog:function(n,i){void 0!==n&&n||(n={}),buildfire.getContext(function(e,t){t&&t.instanceId&&(n.instanceId=t.instanceId);t=new Packet(null,"dynamic.expressions.showDialog",{options:n});buildfire._sendPacket(t,i)})}},appDatasources:{showDialog:function(e={},t){e=new Packet(null,"appDatasources.showDialog",e);buildfire._sendPacket(e,t)}}},wysiwyg:{injectPluginStyles:function(e){var t=document.getElementById("tinymcePluginStyles");t?t.innerHTML=e:((t=document.createElement("style")).id="tinymcePluginStyles",t.rel="stylesheet",t.innerHTML=e,(document.head||document.body).appendChild(t))},extend:function(){var e,s,u;"undefined"!=typeof tinymce&&tinymce.init&&tinymce.isBuildfire&&((e=buildfire.getContext())&&e.endPoints&&(s=e.endPoints.appHost+"/api/app/styles/appTheme.css?appId="+e.appId+"&liveMode="+e.liveMode+"&isWeb=true",u=tinymce.init.bind(tinymce),tinymce.init=function(n){if(!0===n._bfInitialize)return u(n);n.images_dataimg_filter=function(e){return!e.hasAttribute("data-no-blob")};var d=void 0===n.bf_dynamic_expressions||n.bf_dynamic_expressions,c=n.setup;c&&(n.setup=function(n){let i;const a=n.setContent.bind(n);n.setContent=(e,t)=>{a(e,t),e&&void 0===i&&d&&r()};const t=`<img data-no-blob data-id="${(new Date).getTime()}" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABAQMAAAAl21bKAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAApJREFUCNdjYAAAAAIAAeIhvDMAAAAASUVORK5CYII=" style="display: none;" onload="typeof buildfire !== \'undefined\' &amp;&amp; buildfire.dynamic.execute(this);" data-type="dynamic-expression" class="bf-wysiwyg-hide-app" />`,e=()=>{var e;n.dom.doc.body.querySelector('[data-type="dynamic-expression"]')||(e=n.getContent(),n.setContent(`${e?t:t+"&nbsp;"}${e}`),n.dom.doc.body.querySelectorAll("body > *").forEach(function(e){e.classList.add("bf-wysiwyg-hide-app")}))},r=()=>{const e=document.createElement("div");e.innerHTML=n.getContent();var t=e.querySelector('[data-type="dynamic-expression"]');void 0===i&&(i=!!t)},o=()=>{n.selection.collapse(),n.execCommand("mceInsertContent",!1,'<span id="temp-cursor-position"></span>'),setTimeout(()=>{var e=n.dom.select("#temp-cursor-position")[0];n.selection.select(e),n.dom.remove(e)},0)},l=()=>{d&&!i&&-1<n.getContent().search(/\${[^$]*}/)?(i=!0,o(),e(),n.isNotDirty=!1,n.fire("change")):d&&i&&-1===n.getContent().search('data-type="dynamic-expression"')?setTimeout(()=>{o(),e(),n.isNotDirty=!1,n.fire("change")},0):d&&i&&-1===n.getContent().search(/\${[^$]*}/)&&(i=!1,o(),(()=>{const e=document.createElement("div");e.innerHTML=n.getContent();var t=e.querySelectorAll('[data-type="dynamic-expression"]');Array.from(t).forEach(e=>{(e.parentElement&&!e.parentElement.innerText&&1===e.parentElement.children.length?e.parentElement:e).remove()}),n.setContent(e.innerHTML),n.dom.doc.body.querySelectorAll("body > *").forEach(function(e){e.classList.remove("bf-wysiwyg-hide-app")})})())};n.on("init",function(){var e=n.dom.create("script",{},'var buildfire = {actionItems: { execute: function() { console.log("ignore actionItems in tinymce")}},dynamic: { execute: function() { console.log("ignore handleScriptExecution in tinymce")}},ratingSystem: {inject: function() { console.log("ignore rating in tinymce")}}};');n.getDoc().getElementsByTagName("head")[0].appendChild(e)}),n.on("change",function(){var e,t=n.dom.doc.body.querySelectorAll("style[data-layout-name]");if(0<t.length&&(e=n.dom.doc.body.querySelectorAll("div[data-layout-name]"),e=Array.from(e),t.forEach(function(t){e.find(function(e){return e.dataset.layoutName===t.dataset.layoutName})||t.parentElement.removeChild(t)})),n.dom.doc.body.querySelectorAll(".bf-wysiwyg-top, .bf-wysiwyg-hide-app").forEach(function(e){e.classList.remove("bf-wysiwyg-top","bf-wysiwyg-hide-app")}),n.dom.doc.body.querySelectorAll("body > *").forEach(function(e){const t=["bf-wysiwyg-top"];d&&i?t.push("bf-wysiwyg-hide-app"):e.classList.remove("bf-wysiwyg-hide-app"),e.classList.add(...t)}),d){l();let e=n.dom.doc.body.querySelectorAll('[data-type="dynamic-expression"]');e.forEach((e,t)=>{0===t?-1==e.parentElement.className.indexOf("bf-wysiwyg-top")&&n.dom.doc.body.children[0].prepend(e):(e.parentElement&&!e.parentElement.innerText&&1===e.parentElement.children.length?e.parentElement:e).remove()})}});let s=null;n.on("keyup",function(){s&&clearTimeout(s),s=setTimeout(()=>{l()},500)}),n.ui.registry.addMenuItem("bf_clearContent",{text:"Delete all",icon:"remove",onAction:function(){n.execCommand("mceNewDocument")}}),n.ui.registry.addMenuItem("bf_delete",{text:"Delete",icon:"remove",shortcut:"Del",onAction:function(){n.execCommand("Delete")}}),n.ui.registry.addMenuItem("bf_insertBefore",{text:"Insert before",icon:"chevron-left",onAction:function(){let e=n.selection.getNode();e.insertAdjacentHTML("beforebegin","&nbsp;")}}),n.ui.registry.addMenuItem("bf_insertAfter",{text:"Insert after",icon:"chevron-right",onAction:function(){let e=n.selection.getNode();e.insertAdjacentHTML("afterend","&nbsp;")}}),n.ui.registry.addContextMenu("bf_defaultmenuItems",{update:function(e){return e.dataset.bfLayout?"":"cut copy paste bf_insertBefore bf_insertAfter | bf_delete"}}),n.ui.registry.addMenuItem("bf_insertExpression",{text:"Insert expression",onAction:function(){buildfire.dynamic.expressions.showDialog(null,(e,t)=>e?console.error(e):void(t&&n.insertContent(t)))}}),n.ui.registry.addMenuItem("bf_datasources",{text:"Datasources",onAction:function(){buildfire.dynamic.appDatasources.showDialog(null,(e,t)=>{if(e)return console.error(e)})}}),c(n)}),buildfire.appearance.getWidgetTheme(function(e,t){return e?console.error(e):void(n.content_style?n.content_style+=buildfire.appearance._getCommonCss(t):n.content_style=buildfire.appearance._getCommonCss(t))}),n.content_css?n.content_css instanceof Array?n.content_css.push(s,"../../../../styles/bfUIElements.css","../../../../scripts/tinymce/bf_tinymce.css"):((i=n.content_css.split(",")).push(s,"../../../../styles/bfUIElements.css","../../../../scripts/tinymce/bf_tinymce.css"),n.content_css=i):n.content_css=[s,"../../../../styles/bfUIElements.css","../../../../scripts/tinymce/bf_tinymce.css"],n.menubar=n.menubar||"edit insert view format tools ai";var e=n.menu?JSON.parse(JSON.stringify(n.menu)):null;if(n.menu={edit:{title:"Edit",items:"undo redo | cut copy paste | selectall | bf_clearContent"},insert:{title:"Insert",items:`bf_insertActionItem media bf_insertImage | bf_insertButtonOrLink | bf_insertRating bf_insertLayout ${d?"bf_insertExpression":""}`},view:{title:"View",items:"visualaid | preview"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript | formats | removeformat"},tools:{title:"Tools",items:"code bf_datasources"},ai:{title:"AI Content (Beta)",items:"bf_aiTextGenerator"}},e)for(var t in e)n.menu[t]=e[t];var i,a=["preview","code","media","textcolor","colorpicker","fullscreen","bf_actionitem","bf_imagelib","bf_rating","bf_buttons","lists","paste","bf_layouts","bf_ai"];n.plugins?n.plugins instanceof Array?n.plugins=a.concat(n.plugins):(i=n.plugins.split(" "),n.plugins=a.concat(i)):n.plugins=a;var r="fontsizeselect forecolor backcolor bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | bf_actionitem bf_imagelib media | code | fullscreen | bf_ai";n.toolbar?n.toolbar instanceof Array?n.toolbar[0]instanceof Object||(n.toolbar.forEach(function(e){r+=" | "+e}),n.toolbar=r):(r+=" | "+n.toolbar,n.toolbar=r):n.toolbar=r;let o="";const l=["a","article","aside","audio","button","code","details","div","textarea","fieldset","form","h1","h2","h3","h4","h5","h6","input","img","li","ol","ul","option","p","section","select","span","table","tr","iframe"];return l.forEach((e,t)=>{o+=`${e}[*]`,t!=l.length-1&&(o+=",")}),n.extended_valid_elements=o,n.toolbar_mode="floating",n.theme="silver",n.skin="bf-skin",n.contextmenu="bf_buttonOrLinkContextMenu bf_imageContextMenu bf_actionItemContextMenu bf_customLayouts bf_defaultmenuItems",n.fontsize_formats="8px 10px 12px 14px 16px 18px 24px 36px",n.height=n.height||500,n.custom_elements="style",n.convert_urls=!1,n._bfInitialize=!0,u(n)}))}},_cssInjection:{handleCssLayoutInjection:function(n){if(void 0!==n&&n&&n.control.cssInjection&&n.control.cssInjection.enabled&&n.control.cssInjection.layouts.length){let t="$$activeLayout";function i(e){let t;if(e=e&&e.data?e.data:{},Object.keys(e).length?e.design&&e.design.selectedLayout?t=e.design.selectedLayout:e.selectedLayout&&(t=e.selectedLayout):t=n.control.cssInjection.layouts[0],t.cssPath){let e;e=t.cssPath.startsWith("widget")?`../${t.cssPath}`:`./${t.cssPath}`,function(e,t){let n=document.getElementById(t),i=document.createElement("link");i.setAttribute("rel","stylesheet"),i.setAttribute("type","text/css"),i.setAttribute("id",t),i.setAttribute("href",e),document.head.appendChild(i),n&&n.remove()}(e,"$$bf_layout_css")}else t.css&&function(e,t){let n=document.getElementById(t),i=document.createElement("style");i.id=t,i.innerHTML=e,document.head.appendChild(i),n&&n.remove()}(t.css,"$$bf_layout_css")}n.control.cssInjection.activeLayoutTag&&(t=n.control.cssInjection.activeLayoutTag),buildfire.datastore.get(t,(e,t)=>{e&&console.error("Error while retrieving active layout",e),i(t)}),buildfire._cssInjection.onUpdate(e=>{e.tag===t&&(e.data&&e.data.$set&&(e.data=e.data.$set),i(e))},!0)}},onUpdate:function(e,t){return buildfire.eventManager.add("cssInjectionOnUpdate",e,t)},triggerOnUpdate:function(e){buildfire.eventManager.trigger("cssInjectionOnUpdate",e)}},language:{handleLanguageSettings:function(t,n){if(void 0!==t&&t&&t.control.language&&t.control.language.enabled&&t.control.language.languageJsonPath&&n){let e="$$languageSettings";t.control.language.tagName&&(e=t.control.language.tagName);const i=()=>{buildfire.datastore.get(e,(e,t)=>{!function(e){let t;e=e&&e.data?e.data:{},t=Object.keys(e).length?(t=e&&e.strings?e.strings:e,o(t,n)):a(n);buildfire.language._strings=t,r(t)}(t)})},a=e=>{var t,n=e.sections;if(!Object.keys(n).length)return null;let i={};for(t in n){let e=i[t]={};for(var a in n[t].labels)e[a]={value:n[t].labels[a].defaultValue}}return i},r=e=>{e&&Object.keys(e).length&&buildfire.getContext((e,t)=>{let n=null;t&&t.instanceId&&(n=t.instanceId);const i=document.querySelectorAll("*[bfString]");i.forEach(e=>{buildfire.language._handleNode(e,n)}),buildfire.eventManager.trigger("languageSettingsOnStringsInjected",null),buildfire.eventManager.trigger("_languageSettingsOnStringsInjected",null),buildfire.language.watch(n)})},o=(e,t)=>{var n=t.sections;let i={};for(const r in n){const o=e[r];var a=n[r].labels;i[r]={};for(const l in a)o&&o[l]&&(o[l].hasOwnProperty("value")||o[l].hasOwnProperty("defaultValue"))?o[l].hasOwnProperty("value")?i[r][l]={value:o[l].value}:o[l].hasOwnProperty("defaultValue")&&(i[r][l]={defaultValue:o[l].defaultValue}):i[r][l]={defaultValue:a[l].defaultValue},o&&o[l]&&o[l].hasOwnProperty("hasExpression")&&(i[r][l].hasExpression=o[l].hasExpression)}return i};i(),buildfire.language._onUpdate(e=>{window.location.reload()},!0)}},get:function(l,s){let d;if(!l)return d="Invalid options",void s(d,null);if("function"!=typeof s)return d="callback is not a function",void s(d,null);if(!l.stringKey)return d="Invalid options",void s(d,null);const c=l.stringKey.split(".");if(!c||2!==c.length)return d="Invalid options",void s(d,null);function t(e){var t=c[0],n=c[1];const i=buildfire.language._strings;if(!i||!i[t]||!i[t][n]||!i[t][n].hasOwnProperty("value")&&!i[t][n].hasOwnProperty("defaultValue"))return d="String not found.",void s(d,null);function a(e){return e.hasOwnProperty("value")?e.value:e.hasOwnProperty("defaultValue")?e.defaultValue:void 0}function r(e){let t=!1;return e&&(t=-1<e.search(/\${[^{}]*}/)),t}n=i[t][n];if(n.value?r(n.value):r(n.defaultValue)){const o=a(n);e={instanceId:e,expression:o};l.node&&l.node.request&&l.node.request.destroy&&(l.node.request.destroy(),console.warn("node.request has a value: ",l.node,l.node.request),l.node.request=null),buildfire.dynamic.expressions.evaluate(e,(e,{evaluatedExpression:t,evaluationRequest:n})=>{s(null,e?o:t),l.node&&"object"==typeof l.node&&n&&(l.node.request=n),n&&n.destroy&&!l.executeCallbackOnUpdate&&n.destroy()})}else{n=a(n);s(null,n)}}function i(e){buildfire.language._strings?t(e):buildfire.eventManager.add("_languageSettingsOnStringsInjected",()=>{t(e)},!0)}l.instanceId?i(l.instanceId):buildfire.getContext((e,t)=>{let n=null;t&&t.instanceId&&(n=t.instanceId),i(n)})},watch:function(o){const l=e=>{e.removeAttribute("bfString"),e&&e.request&&e.request.destroy&&(e.request.destroy(),e.request=null)},n=(e,t)=>{for(const a of e){if(a&&a.removedNodes&&0<a.removedNodes.length)for(let e=0;e<a.removedNodes.length;e++){const r=a.removedNodes[e];if(r&&r.tagName){l(r);var n=r.querySelectorAll("*[bfString]");for(let e=0;e<n.length;e++)l(n[e])}}if("childList"===a.type&&a.target){buildfire.language._handleNode(a.target,o);var i=a.target.querySelectorAll("*[bfString]");for(let e=0;e<i.length;e++)buildfire.language._handleNode(i[e],o)}}};function i(e){const t=new MutationObserver(n);t.observe(e,{childList:!0,subtree:!0,attributes:!1})}if(null!=document.body)i(document.body);else{let e=0;let t=setInterval(function(){document.body?(console.info(`document.body found at trial ${e+1}`),clearInterval(t),i(document.body)):10<=++e&&(clearInterval(t),console.warn("max trials reached. Unable to find document.body to observe."))},250)}},onStringsReady:function(e,t){return buildfire.eventManager.add("languageSettingsOnStringsInjected",e,t)},onUpdate:function(e,t){return buildfire.eventManager.add("languageSettingsOnUpdate",e,t)},_onUpdate:function(e,t){return buildfire.eventManager.add("_languageSettingsOnUpdate",e,t)},triggerOnUpdate:function(e){buildfire.eventManager.trigger("_languageSettingsOnUpdate",e),buildfire.eventManager.trigger("languageSettingsOnUpdate",e)},_handleNode:function(r,e){if(r.tagName&&r.hasAttribute("bfString")&&!r.hasAttribute("bfString-initialized")){const n=r.getAttribute("bfString-attrs");let a;n&&(a=n.split(","));var t=r.getAttribute("bfString");buildfire.language.get({stringKey:t,instanceId:e,executeCallbackOnUpdate:!0,node:r},(e,t)=>{var n,i;t&&(n=t,t=a,(i=r)&&i.parentNode&&(t&&t.length?t.forEach(e=>i.setAttribute(e,n)):i.innerHTML=n,i.setAttribute("bfString-initialized","")))})}},onPluginLanguageJsLoaded:function(e){buildfire.language.handleLanguageSettings(window.pluginJson,e)},_strings:null},ai:{content:{showDialog:function(e={},t){e=new Packet(null,"ai.showGenerateTextDialog",e);buildfire._sendPacket(e,t)}},getAppRecipe:function(e={},t){e=new Packet(null,"ai.getAppRecipe",e);buildfire._sendPacket(e,t)}},diagnostics:{checkFeature:function(e={},t){e=new Packet(null,"diagnostics.checkFeature",e);buildfire._sendPacket(e,t)},requestFeaturePermission:function(e={},t){e=new Packet(null,"diagnostics.requestFeaturePermission",e);buildfire._sendPacket(e,t)}},onPluginJsonLoaded:function(e){e&&e.control&&e.control.language&&e.control.language.enabled&&document.write('<script src="pluginLanguage.js" type="text/javascript"><\/script>'),buildfire._cssInjection.handleCssLayoutInjection(e)}};window.parsedQuerystring=buildfire.parseQueryString(),buildfire.fid=window.parsedQuerystring.fid,buildfire.init(),buildfire.eventManager.add("deviceAppBackgrounded",function(){!function(e,t){if(e)for(var n,i=0;i<e.length;i++)-1<e[i].src.indexOf("youtube.com")?(-1==e[i].src.indexOf("enablejsapi=1")&&(e[i].src=e[i].src+"?enablejsapi=1"),n=window.JSON.stringify({event:"command",func:"pauseVideo"}),e[i].contentWindow.postMessage(n,"https://www.youtube.com")):-1<e[i].src.indexOf("vimeo.com")&&(n=JSON.stringify({method:"pause"}),e[i].contentWindow.postMessage(n,"*"));if(t)for(var a=0;a<t.length;a++)t[a].pause&&t[a].pause()}(window.document.getElementsByTagName("iframe"),window.document.getElementsByTagName("video"))},!0),function(){function t(e,t){n||(n=!0,setTimeout(function(){n=!1},1e3),buildfire.auth.keepSessionAlive({type:e}))}var n=!1;document.addEventListener("click",function(e){setTimeout(function(){t("click")})}),document.addEventListener("touchstart",function(e){setTimeout(function(){t("touchstart")})})}(),buildfire.getContext(function(e,t){e?console.error(e):(document.documentElement.style.setProperty("--bf-safe-area-inset-top",t.cssVariables?.safeAreaInsetTop||"0px"),document.documentElement.style.setProperty("--bf-safe-area-inset-bottom",t.cssVariables?.safeAreaInsetBottom||"0px"))}),document.addEventListener("DOMContentLoaded",function(e){buildfire.options.disableSelect||(document.getElementsByTagName("body")[0].className+=" noSelect");(()=>{let e=buildfire.parseQueryString().injectCSS;if(e){try{e=JSON.parse(e)}catch(e){return console.error("Error parsing injectCSS",e)}var{classNames:t,paths:n}=e;if(t&&t.length&&document.body)for(let e=0;e<t.length;e++)document.body.classList.add(t[e]);if(n&&n.length&&document.head)for(let e=0;e<n.length;e++){var i=n[e];if(i){const a=document.createElement("link");a.rel="stylesheet",a.type="text/css",a.href=i,document.head.appendChild(a)}}}})(),buildfire.getContext(function(e,n){var t;e?console.error(e):(n&&n.debugTag&&buildfire.logger.attachRemoteLogger(n.debugTag),0<=window.location.pathname.indexOf("/widget/")&&(t=!(!buildfire.options||!buildfire.options.disableTheme)&&buildfire.options.disableTheme,e=!(!buildfire.options||!buildfire.options.enableMDTheme)&&buildfire.options.enableMDTheme,t||e||(buildfire.isWeb()||!n.liveMode?buildfire.appearance.attachAppThemeCSSFiles(n.appId,n.liveMode,n.endPoints.appHost):buildfire.appearance.attachLocalAppThemeCSSFiles(n.appId)),buildfire.appearance.getWidgetTheme((e,t)=>e?console.error(e):void(t.customCSS&&t.customCSS.active&&0<=window.location.pathname.indexOf("/widget/")&&(buildfire.isWeb()||!n.liveMode?buildfire.appearance.attachCustomAppCSSUrl(n.appId,n.liveMode,n.endPoints.appHost):buildfire.appearance.attachLocalCustomAppCSSUrl(n.appId))))))}),!window.location.href.indexOf("/widget/")||buildfire.appearance.disableFastClickOnLoad||buildfire.options.disableFastClick||buildfire.appearance.attachFastClick(),buildfire.options.disableExternalLinkOverride||(document.onclick=function(e){var t=(e=e||window.event).target||e.srcElement,n=t.getAttribute("href"),i=t.getAttribute("inAppBrowser");"A"==t.tagName&&null!=n&&""!=n&&null==i&&(i=new RegExp("^(http:/|https:/|http://|https://|www.)[a-z0-9]"),"A"==t.tagName&&i.test(n)&&(e.preventDefault(),t=t.getAttribute("inAppBrowser")||"_blank",buildfire.navigation.openWindow(n,t,null)))}),setTimeout(function(){buildfire.options.disableTheme||buildfire.appearance._forceCSSRender()},1750)}),document.addEventListener("resize",function(e){buildfire.appearance.autosizeContainer()});{function CustomEvent(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}"function"!=typeof CustomEvent&&(CustomEvent.prototype=window.Event.prototype,window.CustomEvent=CustomEvent)}
!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n,i=t();for(n in i)("object"==typeof exports?exports:e)[n]=i[n]}}(this,function(){return n=[function(e,t){var n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var P=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,i=arguments[t];for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e};t.lory=function(s,a){function u(e,t){var n=B.classNameActiveSlide;e.forEach(function(e,t){e.classList.contains(n)&&e.classList.remove(n)}),e[t].classList.add(n)}function f(e,t,n){(0,z.default)(s,e+".lory."+t,n)}function v(e,t,n){var i=C&&C.style;i&&(i[j.transition+"TimingFunction"]=n,i[j.transition+"Duration"]=t+"ms",j.hasTranslate3d?i[j.transform]="translate3d("+e+"px, 0, 0)":i[j.transform]="translate("+e+"px, 0)")}function o(e,t){var n=B,i=n.slideSpeed,o=n.slidesToScroll,r=n.infinite,s=n.rewind,a=n.rewindSpeed,d=n.ease,l=n.classNameActiveSlide,c=i,n=t?_+1:_-1,i=Math.round(L-x);f("before","slide",{index:_,nextSlide:n}),N&&N.classList.remove("disabled"),M&&M.classList.remove("disabled"),"number"!=typeof e&&(e=t?_+o:_-o),e=Math.min(Math.max(e,0),w.length-1),r&&void 0===t&&(e+=r);o=Math.min(Math.max(-1*w[e].offsetLeft,-1*i),0);s&&Math.abs(y.x)===i&&t&&(e=o=0,c=a),v(o,c,d),y.x=o,w[e].offsetLeft<=i&&(_=e),!r||e!==w.length-r&&0!==e||(t&&(_=r),t||(_=w.length-2*r),y.x=-1*w[_].offsetLeft,S=function(){v(-1*w[_].offsetLeft,0,void 0)}),l&&u(R.call(w),_),N&&!r&&0===e&&N.classList.add("disabled"),!M||r||s||e+1!==w.length||M.classList.add("disabled"),f("after","slide",{currentSlide:_})}function e(){f("before","init"),j=(0,A.default)();var e=B=P({},D.default,a),t=e.classNameFrame,n=e.classNameSlideContainer,i=e.classNamePrevCtrl,o=e.classNameNextCtrl,r=e.enableMouseEvents,e=e.classNameActiveSlide;g=s.getElementsByClassName(t)[0],C=g.getElementsByClassName(n)[0],N=s.getElementsByClassName(i)[0],M=s.getElementsByClassName(o)[0],y={x:C.offsetLeft,y:C.offsetTop},B.infinite?(n=R.call(C.children),i=B.infinite,o=n.slice(0,i),n=n.slice(n.length-i,n.length),o.forEach(function(e){e=e.cloneNode(!0);C.appendChild(e)}),n.reverse().forEach(function(e){e=e.cloneNode(!0);C.insertBefore(e,C.firstChild)}),C.addEventListener(j.transitionEnd,m),w=R.call(C.children)):(w=R.call(C.children),N&&N.classList.add("disabled"),M&&1===w.length&&!B.rewind&&M.classList.add("disabled")),d(),e&&u(w,_),N&&M&&(N.addEventListener("click",l),M.addEventListener("click",c)),g.addEventListener("touchstart",p),r&&(g.addEventListener("mousedown",p),g.addEventListener("click",b)),B.window.addEventListener("resize",E),f("after","init")}function d(){var e=B,t=e.infinite,n=e.ease,i=e.rewindSpeed,o=e.rewindOnResize,e=e.classNameActiveSlide;L=C.getBoundingClientRect().width||C.offsetWidth,(x=g.getBoundingClientRect().width||g.offsetWidth)===L&&(L=w.reduce(function(e,t){return e+t.getBoundingClientRect().width||t.offsetWidth},0)),o?_=0:(n=null,i=0),t?(v(-1*w[_+t].offsetLeft,0,null),_+=t):v(-1*w[_].offsetLeft,i,n),y.x=-1*w[_].offsetLeft,e&&u(R.call(w),_)}function l(){o(!1,!1)}function c(){o(!1,!0)}function m(){S&&(S(),S=void 0)}function p(e){var t=B.enableMouseEvents,n=e.touches?e.touches[0]:e;t&&(g.addEventListener("mousemove",r),g.addEventListener("mouseup",h),g.addEventListener("mouseleave",h)),g.addEventListener("touchmove",r),g.addEventListener("touchend",h);t=n.pageX,n=n.pageY;O={x:t,y:n,time:Date.now()},T=void 0,k={},f("on","touchstart",{event:e})}function r(e){var t=e.touches?e.touches[0]:e,n=t.pageX,t=t.pageY;k={x:n-O.x,y:t-O.y},!(T=void 0===T?!!(T||Math.abs(k.x)<Math.abs(k.y)):T)&&O&&(e.preventDefault(),v(y.x+k.x,0,null)),f("on","touchmove",{event:e})}function h(e){var t=O?Date.now()-O.time:void 0,n=Number(t)<300&&25<Math.abs(k.x)||Math.abs(k.x)>x/3,i=!_&&0<k.x||_===w.length-1&&k.x<0,t=k.x<0;T||(n&&!i?o(!1,t):v(y.x,B.snapBackSpeed)),O=void 0,g.removeEventListener("touchmove",r),g.removeEventListener("touchend",h),g.removeEventListener("mousemove",r),g.removeEventListener("mouseup",h),g.removeEventListener("mouseleave",h),f("on","touchend",{event:e})}function b(e){k.x&&e.preventDefault()}function E(e){d(),f("on","resize",{event:e})}var y=void 0,L=void 0,x=void 0,w=void 0,g=void 0,C=void 0,N=void 0,M=void 0,j=void 0,S=void 0,_=0,B={};"undefined"!=typeof jQuery&&s instanceof jQuery&&(s=s[0]);var O=void 0,k=void 0,T=void 0;return e(),{setup:e,reset:d,slideTo:function(e){o(e)},returnIndex:function(){return _-B.infinite||0},prev:l,next:c,destroy:function(){f("before","destroy"),g.removeEventListener(j.transitionEnd,m),g.removeEventListener("touchstart",p),g.removeEventListener("touchmove",r),g.removeEventListener("touchend",h),g.removeEventListener("mousemove",r),g.removeEventListener("mousedown",p),g.removeEventListener("mouseup",h),g.removeEventListener("mouseleave",h),g.removeEventListener("click",b),B.window.removeEventListener("resize",E),N&&N.removeEventListener("click",l),M&&M.removeEventListener("click",c),B.infinite&&Array.apply(null,Array(B.infinite)).forEach(function(){C.removeChild(C.firstChild),C.removeChild(C.lastChild)}),f("after","destroy")}}};var A=i(n(3)),z=i(n(4)),D=i(n(2)),R=Array.prototype.slice},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={slidesToScroll:1,slideSpeed:300,rewindSpeed:600,snapBackSpeed:200,ease:"ease",rewind:!1,infinite:!1,classNameFrame:"js_frame",classNameSlideContainer:"js_slides",classNamePrevCtrl:"js_prev",classNameNextCtrl:"js_next",classNameActiveSlide:"active",enableMouseEvents:!1,window:window,rewindOnResize:!0}},function(e,t,n){"use strict";!function(s){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e,t,n,i=void 0,o=void 0,r=void 0;return e=document.createElement("_"),t=e.style,n=void 0,""===t[n="webkitTransition"]&&(r="webkitTransitionEnd",o=n),""===t[n="transition"]&&(r="transitionend",o=n),""===t[n="webkitTransform"]&&(i=n),""===t[n="msTransform"]&&(i=n),""===t[n="transform"]&&(i=n),document.body.insertBefore(e,null),t[i]="translate3d(0, 0, 0)",t=!!s.getComputedStyle(e).getPropertyValue(i),document.body.removeChild(e),{transform:i,transition:o,transitionEnd:r,hasTranslate3d:t}}}.call(t,n(0))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){n=new i.default(t,{bubbles:!0,cancelable:!0,detail:n}),e.dispatchEvent(n)};var n=n(5),i=n&&n.__esModule?n:{default:n}},function(n,e,t){!function(e){var t=e.CustomEvent;n.exports=function(){try{var e=new t("cat",{detail:{foo:"bar"}});return"cat"===e.type&&"bar"===e.detail.foo}catch(e){}}()?t:"undefined"!=typeof document&&"function"==typeof document.createEvent?function(e,t){var n=document.createEvent("CustomEvent");return t?n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail):n.initCustomEvent(e,!1,!1,void 0),n}:function(e,t){var n=document.createEventObject();return n.type=e,t?(n.bubbles=Boolean(t.bubbles),n.cancelable=Boolean(t.cancelable),n.detail=t.detail):(n.bubbles=!1,n.cancelable=!1,n.detail=void 0),n}}.call(e,t(0))},,function(e,t,n){e.exports=n(1)}],o={},i.m=n,i.c=o,i.i=function(e){return e},i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=7);function i(e){if(o[e])return o[e].exports;var t=o[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,i),t.l=!0,t.exports}var n,o});
"use strict";if("undefined"==typeof buildfire)throw"please add buildfire.js first to use carousel components";void 0===buildfire.components&&(buildfire.components={}),void 0===buildfire.components.carousel&&(buildfire.components.carousel={}),function(){"undefined"==typeof lory&&document.write('<script src="../../../scripts/lory/lory.min.js"><\/script>');var e=document.getElementById("loryInjectedStyle");e&&document.head.removeChild(e),(e=document.createElement("style")).id="loryInjectedStyle",e.innerHTML+=" .loryFrame {position: relative;font-size: 0; line-height: 0; overflow: hidden; white-space: nowrap;}",e.innerHTML+=" .loryFrame li { position: relative; display: inline-block; height: 100%;}",e.innerHTML+=" .lorySlides { display: inline-block;}",e.innerHTML+=" .loryPercentage .lorySlides { display: block; padding: 0px;}",e.innerHTML+=" .loryPercentage li { width: 100%;}",e.innerHTML+=" .js_slide { text-align: center; position: relative; max-height: 380px; vertical-align: top; }",e.innerHTML+=" .js_slide img { max-height: 380px; width: auto !important; margin: 0 auto }",e.innerHTML+=" .js_slide.static_slide { display: none }",e.innerHTML+=" .js_slide.static_slide.active { display: block }",document.head.appendChild(e)}(),buildfire.components.carousel.view=function(t){let l=this,i;this.config=this.mergeSettings(t),this._initDimensions(l.config.layout),this.selector="string"==typeof this.config.selector?document.querySelector(this.config.selector):this.config.selector,this._attachEventListeners(),t.items&&0<t.items.length?(this._applyConfigurations(t,(e,i)=>{i.shouldInitializeLory?l.init():l._renderStaticSlides(t.items)}),t.selector?t.selector.style.display="":console.error("Selector element should be provided")):t.selector?t.selector.style.display="none":console.error("Selector element should be provided");let s=window.innerWidth;window.addEventListener("resize",()=>{const e=window.innerWidth;e!==s&&(i&&(clearTimeout(i),i=null),i=setTimeout(()=>{l.config.items&&l.config.items.length&&l.loadItems(l.config.items,!1),s=e},500))})},buildfire.components.carousel.view.lastCarouselTimer=null,buildfire.components.carousel.view.prototype={lastImage:null,_applyConfigurations:function(e,r){let o=this,{items:a,autoInterval:c,order:i,display:t}=e;buildfire.components.carousel.view.lastCarouselTimer&&(clearInterval(buildfire.components.carousel.view.lastCarouselTimer),buildfire.components.carousel.view.lastCarouselTimer=null);let d="LAUNCHER_PLUGIN"==buildfire.getFrameType()?"carouselLastImageHome":"carouselLastImage";0==i&&1==t&&1<a.length?buildfire.localStorage.getItem(d,function(e,i){let t=a,l=0,s=null;var n;null==i||-1==(n=Number(i))||n==a.length-1?s=a[0]:(s=a[n+1],l=n+1),o.lastImage=s,buildfire.localStorage.setItem(d,l,function(e,i){0!=c&&(buildfire.components.carousel.view.lastCarouselTimer=setInterval(o._changeImage.bind(o),o.config.autoInterval,t,!1))}),r(null,{shouldInitializeLory:!1})}):1==i&&1==t&&1<a.length?(0!=c&&(buildfire.components.carousel.view.lastCarouselTimer=setInterval(this._changeImage.bind(this),this.config.autoInterval,a,!0)),item=a[Math.floor(Math.random()*a.length)],this.lastImage=item,buildfire.localStorage.removeItem(d),r(null,{shouldInitializeLory:!1})):1==i&&0==t&&1<a.length?(this._randomizeArray(a),buildfire.localStorage.removeItem(d),r(null,{shouldInitializeLory:!0})):r(null,1==t?{shouldInitializeLory:!1}:{shouldInitializeLory:!0})},_randomizeArray:function(e){this._shuffle(e,null,null);var i=Array.from(e);this._shuffle(i,null,e[e.length-1]),e.push(...i),this._shuffle(i,e[0],e[e.length-1]),e.push(...i)},_shuffle:function(e,i,t){let l,s,n;for(n=e.length-1;0<n;n--)l=Math.floor(Math.random()*(n+1)),s=e[n],e[n]=e[l],e[l]=s;return t==e[0]||i==e[e.length-1]?this._shuffle(e,i,t):e},_changeImage:function(t,i){let l=this,s=null;if(i)this._changeStaticSlides(t,!0);else{i=t.indexOf(this.lastImage);let e=0;-1==i||i==t.length-1?s=t[0]:(s=t[i+1],e=i+1),this.lastImage=s;i="LAUNCHER_PLUGIN"==buildfire.getFrameType();buildfire.localStorage.setItem(i?"carouselLastImageHome":"carouselLastImage",e,function(e,i){l._changeStaticSlides(t)})}},_changeStaticSlides:function(i,e){let t=document.querySelector(".js_slide.static_slide.active"),l=t.nextSibling;if(e){let e=document.querySelectorAll(".js_slide.static_slide")[Math.floor(Math.random()*i.length)];e.children[0].src==t.children[0].src?this._changeStaticSlides(i,!0):(t.classList.remove("active"),e.classList.add("active"))}else t.classList.remove("active"),(l||document.querySelector(".js_slide.static_slide")).classList.add("active")},_renderStaticSlides:function(e){let l=this;this.selector.innerHTML="",e.forEach((e,i)=>{let t=document.createElement("div");t.classList.add("js_slide","static_slide"),(0==i&&!l.lastImage||l.lastImage&&l.lastImage.iconUrl==e.iconUrl)&&t.classList.add("active"),t.addEventListener("click",function(){buildfire.actionItems.execute(e,function(e,i){e&&console.warn("Error opening slider action: ",e)})});i={item:e,slide:t};"Fit"==l.layout?l._resizeImage(i,(e,i)=>{e&&console.error("Error occurred while resizing image: ",e),l.selector.appendChild(t)}):l._cropImage(i,(e,i)=>{e&&console.error("Error occurred while cropping image: ",e),l.selector.appendChild(t)})}),document.querySelector(".js_slide.static_slide.active")||document.querySelector(".js_slide.static_slide").classList.add("active")},mergeSettings:function(e){var i,t={selector:".js_percentage",items:[],layout:null,speed:200,loop:!0,autoInterval:5e3,display:0,order:0},l=e;for(i in l)t[i]=l[i];return t},init:function(){if(!this.selector)throw"selector not found";this.selector.style["min-height"]=this._minHeight;var t=this;function e(){buildfire.getContext(function(e,i){i&&i.device&&i.device.platform&&"ios"==i.device.platform.toLowerCase()&&"LAUNCHER_PLUGIN"==buildfire.getFrameType()&&(buildfire.navigation.onAppLauncherActive(function(){t._applySlider()},!0),buildfire.navigation.onAppLauncherInactive(function(){t._destroySlider()},!0))})}this.config.items&&0<this.config.items.length?this._renderHTMLItems(function(){t._applySlider(),e()}):(t._applySlider(),e())},_destroySlider:function(){this.timerInterval&&(clearInterval(this.timerInterval),this.timerInterval=null)},_applySlider:function(){var e;this.lorySlider||(this.lorySlider=lory(this.config.selector,{classNameSlideContainer:this.config.classNameSlideContainer||"js_slides",classNameFrame:this.config.classNameFrame||"js_frame",ease:"ease",rewindSpeed:600,slideSpeed:this.config.speed,slidesToScroll:this.config.slidesToScroll||1,infinite:1<this.config.items.length?1:0,enableMouseEvents:!0})),this.config.loop&&this.config.items&&1<this.config.items.length&&((e=this).timerInterval&&(clearInterval(this.timerInterval),this.timerInterval=null),this.timerInterval=setInterval(function(){e.lorySlider.next()},this.config.autoInterval))},_renderHTMLItems:function(e){for(var i=this;this.selector.firstChild;)this.selector.removeChild(this.selector.firstChild);this.sliderFrame=document.createElement("div"),["loryFrame","js_frame"].forEach(function(e){i.sliderFrame.classList.add(e)}),this.slideContainer=document.createElement("ul"),["lorySlides","js_slides"].forEach(function(e){i.slideContainer.classList.add(e)}),this._loadImages(this.config.items,function(){["slider","js_percentage","loryPercentage"].forEach(function(e){i.selector.classList.add(e)}),i.sliderFrame.appendChild(i.slideContainer),i.selector.appendChild(i.sliderFrame),e()})},_loadImages:function(e,i){var t=this,l=e.length,s=l;0==l&&i();for(var n=0;n<l;n++)this._appendItem(e[n],function(e){s--,t.slideContainer.appendChild(e),0==s&&i()})},_appendItem:function(e,t){let i=this,l=document.createElement("li");l.classList.add("js_slide"),l.addEventListener("click",function(){i.preventClicks||buildfire.actionItems.execute(e,function(e,i){e&&console.warn("Error opening slider action: ",e)})});var s={item:e,slide:l};"Fit"==i.layout?this._resizeImage(s,(e,i)=>{e&&console.error("Error occurred while cropping image: ",e),t(l)}):this._cropImage(s,(e,i)=>{e&&console.error("Error occurred while cropping image: ",e),t(l)})},append:function(e){if((e=e&&(e instanceof Array||"object"!=typeof e?e:[e]))&&e instanceof Array&&e.length){for(var i=0;i<e.length;i++)this.config.items.push(e[i]);var t=this;0==this.config.display?(this.slideContainer.innerHTML="",this._loadImages(this.config.items,function(){1<t.config.items.length&&!t.timerInterval?(t.lorySlider=null,t._applySlider()):t.lorySlider.setup()})):this._renderStaticSlides(this.config.items)}},loadItems:function(i,e){if(e)this.append(i);else{let e=this;this.config.items=i,0==this.config.display?(1==this.config.order&&this._randomizeArray(i),this.slideContainer.innerHTML="",this._loadImages(i,function(){1<i.length&&!e.timerInterval?(e.lorySlider=null,e._applySlider()):i.length<=1&&e.timerInterval?(e._destroySlider(),e.lorySlider=null,e._applySlider()):e.lorySlider.setup()})):(buildfire.components.carousel.view.lastCarouselTimer&&(clearInterval(buildfire.components.carousel.view.lastCarouselTimer),buildfire.components.carousel.view.lastCarouselTimer=null),this._renderStaticSlides(i),1<i.length&&(buildfire.components.carousel.view.lastCarouselTimer=setInterval(this._changeImage.bind(this),this.config.autoInterval,i,this.config.order)))}},_initDimensions:function(e){this.width=window.innerWidth,"WideScreen"==(e=(this.layout=e)||"WideScreen")?(this.height=Math.ceil(9*this.width/16),this.aspect="16:9"):"Square"==e?(this.height=this.width,this.aspect="1:1"):"Cinema"==e?(this.height=Math.ceil(+this.width/2.39),this.aspect="2.39:1"):"MobileScreen"==e||"Fit"==e?(this.height=window.innerHeight/this.width*this.width,this.aspect="9:16"):this.height=Math.ceil(9*this.width/16),this.cssWidth=this.width+"px",380<this.height?this.cssHeight="380px":this.cssHeight=this.height+"px",this._minHeight=this.cssHeight},_cropImage:function(e,l){let s=this,{item:n,slide:r}=e;buildfire.imageLib.local.cropImage(n.iconUrl,{width:this.width,height:this.height,aspect:this.aspect,size:"full_width"},function(e,t){if(e)l(e,null);else{let e=document.createElement("img"),i=document.createElement("img");e.src=t,i.src=buildfire.imageLib.cropImage(n.iconUrl,{height:Math.ceil(s.height/20),width:Math.ceil(s.width/20),blur:40}),e.alt=i.alt=n.title||"",i.className="blurred-background-image",i.setAttribute("style",`width: 100% !important; height: ${s.height}px; top: 50%; left: 50%; transform: translate(-50%, -50%);`),r.style.overflow="hidden",e.style.transform="translateZ(0)",380<s.height&&r.appendChild(i),r.appendChild(e),l(null,t)}})},_resizeImage:function(e,l){let s=this,{item:n,slide:r}=e;buildfire.imageLib.local.resizeImage(n.iconUrl,{height:s.height},function(e,t){if(e)l(e,null);else{let e=document.createElement("img"),i=document.createElement("img");e.src=t,i.src=buildfire.imageLib.cropImage(n.iconUrl,{height:Math.ceil(s.height/20),width:Math.ceil(s.width/20),blur:40}),e.alt=i.alt=n.title||"",i.className="blurred-background-image",i.setAttribute("style",`width: 100% !important; height: ${s.height}px; top: 50%; left: 50%; transform: translate(-50%, -50%);`),e.style.transform="translateZ(0)",r.setAttribute("style","vertical-align: middle; overflow: visible;"),r.appendChild(i),r.appendChild(e),l(null,t)}})},_attachEventListeners:function(){let e=this;this.selector.addEventListener("on.lory.touchmove",function(){e.preventClicks||(e.preventClicks=!0)}),this.selector.addEventListener("on.lory.touchend",function(){setTimeout(()=>{e.preventClicks=!1},0)})}};
//# sourceMappingURL=buildfire_lightcarousel.min.js.map
