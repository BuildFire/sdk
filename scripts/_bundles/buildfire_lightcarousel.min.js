/**
 * Minified Bundle for buildfire.js & lory.min.js & carouselLight.js
 */

function Packet(e,t,n){this.id=e||(new Date).toISOString()+Math.random(),this.cmd=t,this.data=n,this.instanceId=null}function CustomEvent(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}var buildfire={isFileServer:function(e){return-1!==e.indexOf("s3.amazonaws.com")},isWeb:function(){return 0==window.location.protocol.indexOf("http")},logger:{attachRemoteLogger:function(e){if(document.getElementById("BuildFireAppDebuggerScript"))alert("debugger already attached");else if(e||(e=prompt("Enter is a unique tag to send your logs to")),e){var t=document.querySelector("head"),n=document.createElement("script");n.src="http://debug.buildfire.com/target/target-script-min.js#"+e,n.id="BuildFireAppDebuggerScript",t.appendChild(n)}}},_callbacks:{},parseQueryString:function(){for(var e=window.location.search.substring(1).split("&"),t=new Object,n=0;n<e.length;n++){var i=e[n].split("=");t[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return t},options:{},parseMetaOptions:function(){var e={},t=document.head.querySelector("meta[name=buildfire]");return t&&t.content&&t.content.split(",").forEach(function(t){var n=t.split("=");e[n[0]]=!(n.length>1)||n[1]}),e},eventManager:{events:{},add:function(e,t,n){if("function"!=typeof t)throw"Invalid event handler";n||this.clear(e),this.events[e]?this.events[e].push(t):this.events[e]=[t];var i=this.events[e];return{clear:function(){for(var e=0;e<i.length;e++)i[e]===t&&i.splice(e,1)}}},clear:function(e){this.events[e]=[]},trigger:function(e,t){if(this.events[e])for(var n=0;n<this.events[e].length;n++)try{this.events[e][n](t)}catch(e){console.error(e)}}},_context:null,get context(){return console.warn("buildfire.context is obsolete and will be removed soon"),buildfire._context},set context(e){buildfire._context=e},init:function(){window.removeEventListener("message",buildfire._postMessageHandler,!1),window.addEventListener("message",buildfire._postMessageHandler,!1),buildfire.options=buildfire.parseMetaOptions(),buildfire.appearance.insertHTMLAttributes(),buildfire.options.disableTheme||buildfire.appearance.attachCSSFiles()},_whitelistedCommands:["datastore.triggerOnUpdate","datastore.triggerOnRefresh","userData.triggerOnUpdate","userData.triggerOnRefresh","publicData.triggerOnUpdate","publicData.triggerOnRefresh","messaging.onReceivedMessage","history.triggerOnPop","navigation.onBackButtonClick","services.media.audioPlayer.triggerOnEvent","auth.triggerOnLogin","auth.triggerOnLogout","logger.attachRemoteLogger","appearance.triggerOnUpdate","device.triggerOnAppBackgrounded","device.triggerOnAppResumed","notifications.localNotification.onClick","geo.onPositionChange","navigation.triggerOnAppLauncherActive","navigation.triggerOnAppLauncherInactive"],_postMessageHandler:function(e){if(e.source!==window){var t;if((t="object"==typeof e.data?e.data:JSON.parse(e.data)).id&&buildfire._callbacks[t.id])buildfire._callbacks[t.id](t.error,t.data),delete buildfire._callbacks[t.id];else if(buildfire._whitelistedCommands.indexOf(t.cmd)+1){for(var n=t.cmd.split("."),i=buildfire,a=buildfire,r=0;r<n.length;r++){if(r>0&&(a=i),!i[n[r]])return;i=i[n[r]]}i.apply(a,[t.data])}else console.warn(window.location.href+" unhandled packet",t)}else console.log(" >>>> IGNORE MESSAGE <<<< ")},_sendPacket:function(e,t){"function"!=typeof t&&(t=function(e,t){});var n=e.cmd,i=0,a=0==n.indexOf("datastore")&&0!=n.indexOf("datastore.insert")&&0!=n.indexOf("datastore.bulkInsert")&&0!=n.indexOf("datastore.disableRefresh")&&0!=n.indexOf("datastore.searchAndUpdate")&&0!=n.indexOf("datastore.update"),r=0==n.indexOf("getContext");if(a||r)var o=setTimeout(function(){i<5&&(console.error("calling "+e.cmd+" again. total overall resend attempts "+i),buildfire._sendPacket(e,function(e,n){i--,t(e,n)}),i++)},3e3);buildfire._callbacks[e.id]=function(e,n){clearTimeout(o),t(e,n)},e.fid=buildfire.fid,buildfire._parentPost(e,t)},_parentPost:function(e){function t(e){e&&delete e.$$hashKey;for(var n in e){var i=e[n];"object"==typeof i&&(e[n]=t(i))}return e}parent&&e&&(e.data&&"undefined"!=typeof angular&&(e.data=t(e.data)),parent.postMessage(e,"*"))},getContext:function(e){if(buildfire._context)e(null,buildfire._context);else{var t=new Packet(null,"getContext");buildfire._sendPacket(t,function(t,n){n&&(buildfire._context=n),e&&e(t,n)})}},navigation:{navigateTo:function(e){if(e.pluginTypeId&&!e.pluginId&&(e.pluginId=e.pluginTypeId),e.pluginId&&e.instanceId&&e.folderName){var t=new Packet(null,"navigation.navigateTo",{pluginId:e.pluginId,instanceId:e.instanceId,title:e.title,folderName:e.folderName,queryString:e.queryString});buildfire._sendPacket(t)}else console.error("invalid navigation request ",e)},navigateHome:function(){var e=new Packet(null,"navigation.navigateHome");buildfire._sendPacket(e)},scrollTop:function(e){var t=new Packet(null,"navigation.scrollTop");buildfire._sendPacket(t,e)},openWindow:function(e,t,n){t||(t="_blank"),n||(n=function(){console.info("openWindow:: completed")});var i=new Packet(null,"actionItems.execute",{action:"linkToWeb",url:e,openIn:t},n);buildfire._sendPacket(i)},_goBackOne:function(){buildfire._sendPacket(new Packet(null,"navigation.navigateBack"))},onBackButtonClick:function(){buildfire.navigation._goBackOne()},restoreBackButtonClick:function(){buildfire.navigation.onBackButtonClick=function(){buildfire.navigation._goBackOne()}},goBack:function(){buildfire.navigation.onBackButtonClick()},makeSafeLinks:function(e){var t=this;"object"!=typeof e&&(e=document.getElementById(e));for(var n=e.querySelectorAll("a[href^=http], a[href^=https],a[href^=www]"),i=0;i<n.length;i++)n[i].setAttribute("inAppBrowser",!0),n[i].addEventListener("click",function(e){e.preventDefault(),t.openWindow(this.href,this.target,null)},!1)},navigateEmulator:function(){buildfire._sendPacket(new Packet(null,"navigation.navigateEmulator"))},onAppLauncherActive:function(e,t){return buildfire.eventManager.add("appLauncherActive",e,t)},onAppLauncherInactive:function(e,t){return buildfire.eventManager.add("appLauncherInactive",e,t)},triggerOnAppLauncherActive:function(e){return buildfire.eventManager.trigger("appLauncherActive",e)},triggerOnAppLauncherInactive:function(e){return buildfire.eventManager.trigger("appLauncherInactive",e)}},getFrameType:function(){var e={LAUNCHER_PLUGIN:"launcherPluginv",CONTROL_FRAME:"controlIFrame"},t={LAUNCHER_PLUGIN:"LAUNCHER_PLUGIN",CONTROL_FRAME:"CONTROL_FRAME",UNKNOWN:"UNKNOWN"},n=buildfire.fid;return n==e.LAUNCHER_PLUGIN?t.LAUNCHER_PLUGIN:n==e.CONTROL_FRAME?t.CONTROL_FRAME:t.UNKNOWN},appearance:{ready:function(){var e=new Packet(null,"appearance.ready");buildfire._sendPacket(e)},_forceCSSRender:function(){if(window.location.href.indexOf("widget")>0){var e=document.getElementsByTagName("html")[0],t=document.createElement("style");t.type="text/css",t.innerHTML="body{position:relative !important; z-index:1 !important;} .plugin-slide{position:relative !important;} .plugin-slide, .plugin-slide img{transform: translateZ(0) !important;",e.appendChild(t)}},insertHTMLAttributes:function(){var e=document.getElementsByTagName("html")[0];window.location.href.indexOf("widget")>0?(e.setAttribute("buildfire","widget"),e.setAttribute("type","app")):e.setAttribute("buildfire","control");navigator.appVersion;var t,n,i,a=navigator.userAgent,r=navigator.appName,o=""+parseFloat(navigator.appVersion),d=parseInt(navigator.appVersion,10),u="Unknown OS";-1!=(n=a.indexOf("Opera"))?(r="Opera",o=a.substring(n+6),-1!=(n=a.indexOf("Version"))&&(o=a.substring(n+8))):-1!=(n=a.indexOf("MSIE"))?(r="Microsoft Internet Explorer",o=a.substring(n+5)):-1!=(n=a.indexOf("Chrome"))?(r="Chrome",o=a.substring(n+7)):-1!=(n=a.indexOf("Safari"))?(r="Safari",o=a.substring(n+7),-1!=(n=a.indexOf("Version"))&&(o=a.substring(n+8))):-1!=(n=a.indexOf("Firefox"))?(r="Firefox",o=a.substring(n+8)):(t=a.lastIndexOf(" ")+1)<(n=a.lastIndexOf("/"))&&(r=a.substring(t,n),o=a.substring(n+1),r.toLowerCase()==r.toUpperCase()&&(r=navigator.appName)),-1!=(i=o.indexOf(";"))&&(o=o.substring(0,i)),-1!=(i=o.indexOf(" "))&&(o=o.substring(0,i)),d=parseInt(""+o,10),isNaN(d)&&(o=""+parseFloat(navigator.appVersion),d=parseInt(navigator.appVersion,10)),-1!=navigator.appVersion.indexOf("Win")&&(u="Windows"),-1!=navigator.appVersion.indexOf("Mac")&&(u="MacOS"),-1!=navigator.appVersion.indexOf("X11")&&(u="UNIX"),-1!=navigator.appVersion.indexOf("Linux")&&(u="Linux"),e.setAttribute("os",u),e.setAttribute("browser",r),e.setAttribute("majorVersion",d),e.setAttribute("fullVersion",o)},getCSSFiles:function(e){var t=new Packet(null,"appearance.getCSSFiles");buildfire._sendPacket(t,e)},attachCSSFiles:function(){var e=[],t="";!(!buildfire.options||!buildfire.options.disableBootstrap)&&buildfire.options.disableBootstrap||e.push("styles/bootstrap.css"),window.location.pathname.indexOf("/control/")>=0?e.push("styles/siteStyle.css")&&e.push("styles/pluginScreen.css"):!(!buildfire.options||!buildfire.options.disableAppStyles)&&buildfire.options.disableAppStyles||e.push("styles/appStyle.css");for(var n=document.getElementsByTagName("script"),i=0;i<n.length;i++){var a=n[i].src;if(a.indexOf("buildfire.js")>0){t=a.replace("/scripts/buildfire.js","");break}if(a.indexOf("buildfire.min.js")>0){t=a.replace("/scripts/buildfire.min.js","");break}if(a.match(/(\/scripts\/_bundle\S+.js)/gi)){t=a.replace(/(\/scripts\/_bundle\S+.js)/gi,"");break}}"/"!=t[t.length-1]&&(t+="/");for(i=0;i<e.length;i++)document.write('<link rel="stylesheet" href="'+t+e[i]+'"/>')},attachAppThemeCSSFiles:function(e,t,n){this._attachAppThemeCSSFiles(n+"/api/app/styles/appTheme.css?appId="+e+"&liveMode="+t+"&v="+buildfire.appearance.CSSBusterCounter)},attachLocalAppThemeCSSFiles:function(e){this._attachAppThemeCSSFiles("../../../../app/scripts/offline/appTheme"+e+".css")},_attachAppThemeCSSFiles:function(e){var t=document.createElement("link");buildfire.appearance.CSSBusterCounter=0,t.setAttribute("rel","stylesheet"),t.setAttribute("type","text/css"),t.setAttribute("id","appThemeCSS"),t.setAttribute("href",e),document.getElementsByTagName("head")[0].appendChild(t)},_resizedTo:0,autosizeContainer:function(){var e;try{e=Math.max(document.documentElement.clientHeight,document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight)}catch(e){}if(e&&buildfire.appearance._resizedTo!=e&&!(e<100)){var t=new Packet(null,"appearance.autosizeContainer",{height:e});buildfire._sendPacket(t),buildfire.appearance._resizedTo=e}},setHeaderVisibility:function(e){var t=new Packet(null,"appearance.setHeaderVisibility",e);buildfire._sendPacket(t)},triggerOnUpdate:function(){var e=document.getElementById("appThemeCSS");e&&(e.href=e.href.replace("&v="+buildfire.appearance.CSSBusterCounter,"&v="+ ++buildfire.appearance.CSSBusterCounter))},titlebar:{show:function(){var e=new Packet(null,"appearance.titlebar.show");buildfire._sendPacket(e)},hide:function(){var e=new Packet(null,"appearance.titlebar.hide");buildfire._sendPacket(e)}}},analytics:{trackAction:function(e,t){var n=new Packet(null,"analytics.trackActionCommand",{value:e,metadata:t});buildfire._sendPacket(n)},trackView:function(e,t){var n=new Packet(null,"analytics.trackViewCommand",{value:e,metadata:t});buildfire._sendPacket(n)}},datastore:{get:function(e,t){var n=typeof e;"undefined"==n?e="":"function"==n&&void 0===t&&(t=e,e="");var i=new Packet(null,"datastore.get",{tag:e});buildfire._sendPacket(i,t)},getWithDynamicData:function(e,t){var n=typeof e;"undefined"==n?e="":"function"==n&&void 0===t&&(t=e,e="");var i=new Packet(null,"datastore.get",{tag:e,withDynamicData:!0});buildfire._sendPacket(i,t)},getById:function(e,t,n){"function"==typeof e&&void 0===n&&(n=e,e="");var i=typeof t;"undefined"==i?t="":"function"==i&&void 0===n&&(n=t,t="");var a=new Packet(null,"datastore.get",{tag:t,id:e});buildfire._sendPacket(a,n)},save:function(e,t,n){var i=typeof t;"undefined"==i?t="":"function"==i&&void 0===n&&(n=t,t="");var a=new Packet(null,"datastore.save",{tag:t,obj:e});buildfire._sendPacket(a,function(e,t){t&&buildfire.datastore.triggerOnUpdate(t),n&&n(e,t)})},insert:function(e,t,n,i){var a=typeof n;"undefined"==a?n=!1:"function"==a&&void 0===i&&(i=n,n=!1);var r=typeof t;"undefined"==r?t="":"function"==r&&void 0===i&&(i=t,t="");var o=new Packet(null,"datastore.insert",{tag:t,obj:e,checkDuplicate:n});buildfire._sendPacket(o,function(e,t){t&&buildfire.datastore.triggerOnUpdate(t),i(e,t)})},bulkInsert:function(e,t,n){if(e.constructor===Array){var i=typeof t;"undefined"==i?t="":"function"==i&&void 0===n&&(n=t,t="");var a=new Packet(null,"datastore.bulkInsert",{tag:t,obj:e});buildfire._sendPacket(a,function(e,t){t&&buildfire.datastore.triggerOnUpdate(t),n(e,t)})}else n({code:"error",message:"the data should be an array"},null)},update:function(e,t,n,i){var a=typeof n;"undefined"==a?n="":"function"==a&&void 0===i&&(i=n,n="");var r=new Packet(null,"datastore.update",{tag:n,id:e,obj:t});buildfire._sendPacket(r,function(e,t){t&&buildfire.datastore.triggerOnUpdate(t),i&&i(e,t)})},searchAndUpdate:function(e,t,n,i){var a=typeof n;"undefined"==a?n="":"function"==a&&void 0===i&&(i=n,n="");var r=new Packet(null,"datastore.searchAndUpdate",{tag:n,search:e,obj:t});buildfire._sendPacket(r,function(e,t){t&&buildfire.datastore.triggerOnUpdate(t),i&&i(e,t)})},delete:function(e,t,n){var i=typeof t;"undefined"==i?t="":"function"==i&&void 0===n&&(n=t,t="");var a=new Packet(null,"datastore.delete",{tag:t,id:e});buildfire._sendPacket(a,function(e,t){t&&buildfire.datastore.triggerOnUpdate(t),n&&n(e,t)})},search:function(e,t,n){var i=typeof t;"undefined"==i?t="":"function"==i&&void 0===n&&(n=t,t=""),void 0===e&&(e={filter:{}}),e.filter||(e.filter={});var a=new Packet(null,"datastore.search",{tag:t,obj:e});buildfire._sendPacket(a,function(e,t){n(e,t)})},onUpdate:function(e,t){return buildfire.eventManager.add("datastoreOnUpdate",e,t)},triggerOnUpdate:function(e){buildfire.eventManager.trigger("datastoreOnUpdate",e)},onRefresh:function(e,t){return buildfire.eventManager.add("datastoreOnRefresh",e,t)},triggerOnRefresh:function(e){buildfire.eventManager.trigger("datastoreOnRefresh",e)},disableRefresh:function(){var e=new Packet(null,"datastore.disableRefresh");buildfire._sendPacket(e)}},userData:{get:function(e,t){var n=typeof e;"undefined"==n?e="":"function"==n&&void 0===t&&(t=e,e="");var i=new Packet(null,"userData.get",{tag:e});buildfire._sendPacket(i,t)},getById:function(e,t,n){"function"==typeof e&&void 0===n&&(n=e,e="");var i=typeof t;"undefined"==i?t="":"function"==i&&void 0===n&&(n=t,t="");var a=new Packet(null,"userData.get",{tag:t,id:e});buildfire._sendPacket(a,n)},save:function(e,t,n,i){var a=typeof t;"undefined"==a?t="":"function"==a&&void 0===i&&(i=t,t="");var r=typeof n;"undefined"==r?n="":"function"==r&&void 0===i&&(i=n,n="");var o=new Packet(null,"userData.save",{tag:t,userToken:n,obj:e});buildfire._sendPacket(o,function(e,t){t&&buildfire.userData.triggerOnUpdate(t),i&&i(e,t)})},insert:function(e,t,n,i,a){var r=typeof n;"undefined"==r?n="":"function"==r&&void 0===a&&(a=n,n="");var o=typeof i;"undefined"==o?i=!1:"function"==o&&void 0===a&&(a=i,i=!1),"undefined"==(r=typeof n)?n="":"function"==r&&void 0===a&&(a=n,n="");var d=typeof t;"undefined"==d?t="":"function"==d&&void 0===a&&(a=t,t="");var u=new Packet(null,"userData.insert",{tag:t,userToken:n,obj:e,checkDuplicate:i});buildfire._sendPacket(u,function(e,t){t&&buildfire.userData.triggerOnUpdate(t),a(e,t)})},bulkInsert:function(e,t,n,i){if(e.constructor===Array){var a=typeof n;"undefined"==a?n="":"function"==a&&void 0===i&&(i=n,n="");var r=typeof t;"undefined"==r?t="":"function"==r&&void 0===i&&(i=t,t="");var o=new Packet(null,"userData.bulkInsert",{tag:t,userToken:n,obj:e});buildfire._sendPacket(o,function(e,t){t&&buildfire.userData.triggerOnUpdate(t),i(e,t)})}else i({code:"error",message:"the data should be an array"},null)},update:function(e,t,n,i,a){var r=typeof i;"undefined"==r?i="":"function"==r&&void 0===a&&(a=i,i="");var o=typeof n;"undefined"==o?n="":"function"==o&&void 0===a&&(a=n,n="");var d=new Packet(null,"userData.update",{tag:n,userToken:i,id:e,obj:t});buildfire._sendPacket(d,function(e,t){t&&buildfire.userData.triggerOnUpdate(t),a&&a(e,t)})},searchAndUpdate:function(e,t,n,i,a){var r=typeof i;"undefined"==r?i="":"function"==r&&void 0===a&&(a=i,i="");var o=typeof n;"undefined"==o?n="":"function"==o&&void 0===a&&(a=n,n="");var d=new Packet(null,"userData.searchAndUpdate",{tag:n,userToken:i,search:e,obj:t});buildfire._sendPacket(d,function(e,t){t&&buildfire.userData.triggerOnUpdate(t),a&&a(e,t)})},delete:function(e,t,n,i){var a=typeof n;"undefined"==a?n="":"function"==a&&void 0===i&&(i=n,n="");var r=typeof t;"undefined"==r?t="":"function"==r&&void 0===i&&(i=t,t="");var o=new Packet(null,"userData.delete",{tag:t,userToken:n,id:e});buildfire._sendPacket(o,function(e,t){t&&buildfire.userData.triggerOnUpdate(t),i&&i(e,t)})},search:function(e,t,n){var i=typeof t;"undefined"==i?t="":"function"==i&&void 0===n&&(n=t,t=""),void 0===e&&(e={filter:{}}),e.filter||(e.filter={});var a=new Packet(null,"userData.search",{tag:t,obj:e});buildfire._sendPacket(a,function(e,t){n(e,t)})},onUpdate:function(e,t){return buildfire.eventManager.add("userDataOnUpdate",e,t)},triggerOnUpdate:function(e){buildfire.eventManager.trigger("userDataOnUpdate",e)},onRefresh:function(e,t){return buildfire.eventManager.add("userDataOnRefresh",e,t)},triggerOnRefresh:function(e){buildfire.eventManager.trigger("userDataOnRefresh",e)},disableRefresh:function(){var e=new Packet(null,"userData.disableRefresh");buildfire._sendPacket(e)}},publicData:{get:function(e,t){var n=typeof e;"undefined"==n?e="":"function"==n&&void 0===t&&(t=e,e="");var i=new Packet(null,"publicData.get",{tag:e});buildfire._sendPacket(i,t)},getById:function(e,t,n){"function"==typeof e&&void 0===n&&(n=e,e="");var i=typeof t;"undefined"==i?t="":"function"==i&&void 0===n&&(n=t,t="");var a=new Packet(null,"publicData.get",{tag:t,id:e});buildfire._sendPacket(a,n)},save:function(e,t,n){var i=typeof t;"undefined"==i?t="":"function"==i&&void 0===n&&(n=t,t="");var a=new Packet(null,"publicData.save",{tag:t,obj:e});buildfire._sendPacket(a,function(e,t){t&&buildfire.publicData.triggerOnUpdate(t),n&&n(e,t)})},insert:function(e,t,n,i){var a=typeof n;"undefined"==a?n=!1:"function"==a&&void 0===i&&(i=n,n=!1);var r=typeof t;"undefined"==r?t="":"function"==r&&void 0===i&&(i=t,t="");var o=new Packet(null,"publicData.insert",{tag:t,obj:e,checkDuplicate:n});buildfire._sendPacket(o,function(e,t){t&&buildfire.publicData.triggerOnUpdate(t),i(e,t)})},bulkInsert:function(e,t,n){if(e.constructor===Array){var i=typeof t;"undefined"==i?t="":"function"==i&&void 0===n&&(n=t,t="");var a=new Packet(null,"publicData.bulkInsert",{tag:t,obj:e});buildfire._sendPacket(a,function(e,t){t&&buildfire.publicData.triggerOnUpdate(t),n(e,t)})}else n({code:"error",message:"the data should be an array"},null)},update:function(e,t,n,i){var a=typeof n;"undefined"==a?n="":"function"==a&&void 0===i&&(i=n,n="");var r=new Packet(null,"publicData.update",{tag:n,id:e,obj:t});buildfire._sendPacket(r,function(e,t){t&&buildfire.publicData.triggerOnUpdate(t),i&&i(e,t)})},searchAndUpdate:function(e,t,n,i){var a=typeof n;"undefined"==a?n="":"function"==a&&void 0===i&&(i=n,n="");var r=new Packet(null,"publicData.searchAndUpdate",{tag:n,search:e,obj:t});buildfire._sendPacket(r,function(e,t){t&&buildfire.publicData.triggerOnUpdate(t),i&&i(e,t)})},delete:function(e,t,n){var i=typeof t;"undefined"==i?t="":"function"==i&&void 0===n&&(n=t,t="");var a=new Packet(null,"publicData.delete",{tag:t,id:e});buildfire._sendPacket(a,function(e,t){t&&buildfire.publicData.triggerOnUpdate(t),n&&n(e,t)})},search:function(e,t,n){var i=typeof t;"undefined"==i?t="":"function"==i&&void 0===n&&(n=t,t=""),void 0===e&&(e={filter:{}}),e.filter||(e.filter={});var a=new Packet(null,"publicData.search",{tag:t,obj:e});buildfire._sendPacket(a,function(e,t){n(e,t)})},onUpdate:function(e,t){return buildfire.eventManager.add("publicDataOnUpdate",e,t)},triggerOnUpdate:function(e){buildfire.eventManager.trigger("publicDataOnUpdate",e)},onRefresh:function(e,t){return buildfire.eventManager.add("publicDataOnRefresh",e,t)},triggerOnRefresh:function(e){buildfire.eventManager.trigger("publicDataOnRefresh",e)},disableRefresh:function(){var e=new Packet(null,"publicData.disableRefresh");buildfire._sendPacket(e)}},imageLib:{showDialog:function(e,t){var n=new Packet(null,"imageLib.showDialog",e);buildfire._sendPacket(n,t)},isProdImageServer:function(e){return 0==e.indexOf("http://imageserver.prod.s3.amazonaws.com")||0==e.indexOf("https://imageserver.prod.s3.amazonaws.com")},resizeImage:function(e,t){if((n=t.disablePixelRation?1:window.devicePixelRatio)<1)var n=1;if(t){if("object"!=typeof t)throw"options not an object"}else t={width:window.innerWidth};"full"==t.width&&(t.width=window.innerWidth),"full"==t.height&&(t.height=window.innerHeight);var i;return buildfire.imageLib.isProdImageServer(e)?i="http://buildfire.imgix.net"+(e=e.replace(/^https:\/\//i,"http://")).substring(40):e.indexOf("Kaleo.DevBucket/")>0&&(i="http://bflegacy.imgix.net/"+e.split("Kaleo.DevBucket/")[1]),i=("https:"==window.location.protocol?"https:":"http:")+"//czi3m2qn.cloudimg.io/s/",t.width&&!t.height?i+"width/"+Math.floor(t.width*n)+"/"+e:!t.width&&t.height?i+"height/"+Math.floor(t.height*n)+"/"+e:t.width&&t.height?i+"resizenp/"+Math.floor(t.width*n)+"x"+Math.floor(t.height*n)+"/"+e:e},cropImage:function(e,t){if(buildfire.imageLib.isProdImageServer(e)&&(e=e.replace(/^https:\/\//i,"http://")),t||(t={}),"object"!=typeof t)throw"options not an object";if(t.width||t.height||(t={width:"full",height:"full"}),"full"==t.width&&(t.width=window.innerWidth),"full"==t.height&&(t.height=window.innerHeight),!t.width||!t.height)return console.warn("cropImage doenst have width or height please fix. returning original url"),e+"?h="+t.height+"&w="+t.width;var n,i=window.devicePixelRatio;return t&&t.disablePixelRatio&&(i=t.disablePixelRatio),n=("https:"==window.location.protocol?"https:":"http:")+"//czi3m2qn.cloudimg.io/s/crop/",n=n+Math.floor(t.width*i)+"x"+Math.floor(t.height*i)+"/"+e},local:{_parser:document.createElement("a"),localImageLibPath:window.location.href.split("pluginTemplate/")[0]+"imageLib/",parseFileFromUrl:function(e){buildfire.imageLib.local._parser.href=e;var t=buildfire.imageLib.local._parser.pathname.split("/");return 0==t.length?null:t[t.length-1]},toLocalPath:function(e){return buildfire.isFileServer(e)?this.localImageLibPath+this.parseFileFromUrl(e):null},resizeImage:function(e,t,n){if(t){if("object"!=typeof t)throw"options not an object"}else t={width:window.innerWidth};"full"==t.width&&(t.width=window.innerWidth),"full"==t.height&&(t.height=window.innerHeight);var i=buildfire.imageLib.local.toLocalPath(e);if(i){var a=new Image;a.src=i,a.onload=function(){t.width&&!t.height?t.height=a.height*t.width/a.width:!t.width&&t.height&&(t.width=a.width*t.height/a.width);var e=document.createElement("canvas"),i=e.getContext("2d");e.width=t.width,e.height=t.height,i.drawImage(a,0,0,t.width,t.height),n(null,e.toDataURL())},a.onerror=function(){n(null,buildfire.imageLib.resizeImage(e,t))}}else n(null,buildfire.imageLib.resizeImage(e,t))},cropImage:function(e,t,n){if(window.navigator.onLine)n(null,buildfire.imageLib.cropImage(e,t));else{var i=t.disablePixelRatio?1:window.devicePixelRatio;if(t){if("object"!=typeof t)throw"options not an object"}else t={width:window.innerWidth};"full"==t.width&&(t.width=window.innerWidth),"full"==t.height&&(t.height=window.innerHeight);var a=buildfire.imageLib.local.toLocalPath(e);if(a){var r=new Image;r.src=a,r.onload=function(){var e=document.createElement("canvas"),a=e.getContext("2d"),o={width:0,height:0},d={x:0,y:0};t.width!==t.height?t.width>t.height?(o.width=t.width,o.height=r.height*t.width/r.width,d.y=(t.height-o.height)/2):(o.width=r.width*t.height/r.height,o.height=t.height,d.x=(t.width-o.width)/2):r.width<r.height?(o.width=t.width,o.height=r.height*t.width/r.width,d.y=(t.height-o.height)/2):(o.width=r.width*t.height/r.height,o.height=t.height,d.x=(t.width-o.width)/2),o.width*=i,o.height*=i,t.width*=i,t.height*=i,e.width=t.width,e.height=t.height,a.drawImage(r,d.x,d.y,o.width,o.height),n(null,e.toDataURL())},r.onerror=function(){n(null,buildfire.imageLib.cropImage(e,t))}}else n(null,buildfire.imageLib.cropImage(e,t))}}}},notifications:{alert:function(e,t){var n=new Packet(null,"notificationsAPI.alert",e);buildfire._sendPacket(n,t)},confirm:function(e,t){var n=new Packet(null,"notificationsAPI.confirm",e);buildfire._sendPacket(n,t)},prompt:function(e,t){var n=new Packet(null,"notificationsAPI.prompt",e);buildfire._sendPacket(n,t)},beep:function(e,t){var n=new Packet(null,"notificationsAPI.beep",e);buildfire._sendPacket(n,t)},vibrate:function(e,t){var n=new Packet(null,"notificationsAPI.vibrate",e);buildfire._sendPacket(n,t)}},actionItems:{showDialog:function(e,t,n){var i=new Packet(null,"actionItems.showDialog",{actionItem:e,options:t});buildfire._sendPacket(i,n)},execute:function(e,t,n){var i=new Packet(null,"actionItems.execute",e);buildfire._sendPacket(i,n)},list:function(e,t,n){var i=new Packet(null,"actionItems.list",{actionItems:e,options:t});buildfire._sendPacket(i,n)},create:function(e,t,n){return{action:e,iconUrl:t,title:n}}},history:{push:function(e,t,n){var i=new Packet(null,"history.push",{label:e,options:t,source:"plugin"});buildfire._sendPacket(i,n)},onPop:function(e,t){return buildfire.eventManager.add("historyOnPop",e,t)},triggerOnPop:function(e){buildfire.eventManager.trigger("historyOnPop",e)},pop:function(e){var t=new Packet(null,"history.pop");buildfire._sendPacket(t,e)},get:function(e,t){var n=new Packet(null,"history.get",e);buildfire._sendPacket(n,t)}},messaging:{sendMessageToControl:function(e){var t=new Packet(null,"messaging.triggerOnNewControlMessage",e);buildfire._sendPacket(t)},sendMessageToWidget:function(e){var t=new Packet(null,"messaging.triggerOnNewWidgetMessage",e);buildfire._sendPacket(t)},onReceivedMessage:function(e){console.info("onReceivedMessage ignored",window.location)}},pluginInstance:{showDialog:function(e,t){var n=new Packet(null,"pluginInstances.showDialog",{options:e});buildfire._sendPacket(n,t)},get:function(e,t){var n=new Packet(null,"pluginInstances.get",e);buildfire._sendPacket(n,t)},search:function(e,t){var n=new Packet(null,"pluginInstances.search",e);buildfire._sendPacket(n,t)},showCreatePluginInstancesDialog:function(e,t){"function"!=typeof e||t?e&&(e.skipPluginInstances=!0):(t=e,e={skipPluginInstances:!0}),buildfire.pluginInstance.showDialog(e,t)}},deeplink:{getData:function(e){var t=buildfire.parseQueryString();e(t.dld?JSON.parse(t.dld):null)},template:{get:function(e){var t=new Packet(null,"deepLink.getTemplate",{});buildfire._sendPacket(t,e)}},setData:function(e,t,n){var i=new Packet(null,"deepLink.setData",{data:e,options:t});buildfire._sendPacket(i,n)},createLink:function(e){console.log("this method is obsolete you have to call deeplink.template.get instead and it will return back the full deep link");var t="app"+buildfire._context.appId+"://plugin";return e?t+"?dld="+JSON.stringify(e):t}},spinner:{show:function(){buildfire._sendPacket(new Packet(null,"spinner.show"))},hide:function(){buildfire._sendPacket(new Packet(null,"spinner.hide"))}},auth:{login:function(e,t){var n=new Packet(null,"auth.login",e);buildfire._sendPacket(n,t)},logout:function(){var e=new Packet(null,"auth.logout");buildfire._sendPacket(e)},getCurrentUser:function(e){var t=new Packet(null,"auth.getCurrentUser");buildfire._sendPacket(t,e)},onLogin:function(e,t){return buildfire.eventManager.add("authOnLogin",e,t)},triggerOnLogin:function(e){buildfire.eventManager.trigger("authOnLogin",e)},onLogout:function(e,t){return buildfire.eventManager.add("authOnLogout",e,t)},triggerOnLogout:function(e){return buildfire.eventManager.trigger("authOnLogout",e)},openProfile:function(e){var t=new Packet(null,"auth.openProfile",e);buildfire._sendPacket(t)},getUserProfile:function(e,t){var n=new Packet(null,"auth.getUserProfile",e);buildfire._sendPacket(n,t)},getUsersByEmail:function(e,t){var n=new Packet(null,"auth.getUsersByEmail",e);buildfire._sendPacket(n,t)}},device:{calendar:{addEvent:function(e,t){buildfire._sendPacket(new Packet(null,"device.calendar.addEvent",e),t)}},share:function(e,t){buildfire._sendPacket(new Packet(null,"device.share",e),t)},onAppBackgrounded:function(e,t){return buildfire.eventManager.add("deviceAppBackgrounded",e,t)},onAppResumed:function(e,t){return buildfire.eventManager.add("deviceAppResumed",e,t)},triggerOnAppBackgrounded:function(e){return buildfire.eventManager.trigger("deviceAppBackgrounded",e)},triggerOnAppResumed:function(e){return buildfire.eventManager.trigger("deviceAppResumed",e)}},geo:{getCurrentPosition:function(e,t){buildfire._sendPacket(new Packet(null,"geo.getCurrentPosition",e),t)},watchPosition:function(e,t){buildfire._sendPacket(new Packet(null,"geo.watchPosition",e)),this.onPositionChange=t},onPositionChange:function(e,t){},clearWatch:function(e,t){buildfire._sendPacket(new Packet(null,"geo.clearWatch",e),t)}},localStorage:{setItem:function(e,t,n){n||(n=function(){}),"object"==typeof t&&(t=JSON.stringify(t)),buildfire._sendPacket(new Packet(null,"localStorage.setItem",{key:e,value:t}),n)},getItem:function(e,t){if(!t)throw"missing callback on buildfire.localStorage.getItem";buildfire._sendPacket(new Packet(null,"localStorage.getItem",e),t)},removeItem:function(e,t){if(!t)throw"missing callback on buildfire.localStorage.removeItem";buildfire._sendPacket(new Packet(null,"localStorage.removeItem",e),t)}}};buildfire.init(),document.addEventListener("DOMContentLoaded",function(e){buildfire.options.disableSelect||(document.getElementsByTagName("body")[0].className+=" noSelect"),buildfire.getContext(function(e,t){e?console.error(e):(t&&t.debugTag&&buildfire.logger.attachRemoteLogger(t.debugTag),window.location.pathname.indexOf("/widget/")>0&&(!(!buildfire.options||!buildfire.options.disableTheme)&&buildfire.options.disableTheme||(buildfire.isWeb()?buildfire.appearance.attachAppThemeCSSFiles(t.appId,t.liveMode,t.endPoints.appHost):buildfire.appearance.attachLocalAppThemeCSSFiles(t.appId))))}),buildfire.options.disableExternalLinkOverride||(document.onclick=function(e){var t=(e=e||window.event).target||e.srcElement,n=t.getAttribute("href"),i=t.getAttribute("inAppBrowser");if("A"==t.tagName&&null!=n&&""!=n&&null==i){var a=new RegExp("^(http:/|https:/|http://|https://|www.)[a-z0-9]");if("A"==t.tagName&&a.test(n)){e.preventDefault();var r=t.getAttribute("inAppBrowser")||"_blank";buildfire.navigation.openWindow(n,r,null)}}}),setTimeout(function(){buildfire.options.disableTheme||buildfire.appearance._forceCSSRender()},1750)}),buildfire.fid=buildfire.parseQueryString().fid,document.addEventListener("resize",function(e){buildfire.appearance.autosizeContainer()}),window.onerror=function(e,t,n,i,a){console.error("Error: "+e," Script: "+t," Line: "+n," Column: "+i," StackTrace: "+a)},"function"!=typeof CustomEvent&&(CustomEvent.prototype=window.Event.prototype,window.CustomEvent=CustomEvent);
!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var i in n)("object"==typeof exports?exports:e)[i]=n[i]}}(this,function(){return function(e){function t(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=7)}([function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};t.lory=function(e,t){function n(e,t){var n=T.classNameActiveSlide;e.forEach(function(e,t){e.classList.contains(n)&&e.classList.remove(n)}),e[t].classList.add(n)}function i(e){var t=T.infinite,n=e.slice(0,t),i=e.slice(e.length-t,e.length);return n.forEach(function(e){var t=e.cloneNode(!0);j.appendChild(t)}),i.reverse().forEach(function(e){var t=e.cloneNode(!0);j.insertBefore(t,j.firstChild)}),j.addEventListener(B.transitionEnd,h),d.call(j.children)}function l(t,n,i){(0,s.default)(e,t+".lory."+n,i)}function c(e,t,n){var i=j&&j.style;i&&(i[B.transition+"TimingFunction"]=n,i[B.transition+"Duration"]=t+"ms",B.hasTranslate3d?i[B.transform]="translate3d("+e+"px, 0, 0)":i[B.transform]="translate("+e+"px, 0)")}function u(e,t){var i=T,o=i.slideSpeed,r=i.slidesToScroll,s=i.infinite,a=i.rewind,u=i.rewindSpeed,f=i.ease,v=i.classNameActiveSlide,m=o,p=t?k+1:k-1,h=Math.round(g-C);l("before","slide",{index:k,nextSlide:p}),S&&S.classList.remove("disabled"),_&&_.classList.remove("disabled"),"number"!=typeof e&&(e=t?k+r:k-r),e=Math.min(Math.max(e,0),N.length-1),s&&void 0===t&&(e+=s);var b=Math.min(Math.max(-1*N[e].offsetLeft,-1*h),0);a&&Math.abs(w.x)===h&&t&&(b=0,e=0,m=u),c(b,m,f),w.x=b,N[e].offsetLeft<=h&&(k=e),!s||e!==N.length-s&&0!==e||(t&&(k=s),t||(k=N.length-2*s),w.x=-1*N[k].offsetLeft,O=function(){c(-1*N[k].offsetLeft,0,void 0)}),v&&n(d.call(N),k),S&&!s&&0===e&&S.classList.add("disabled"),!_||s||a||e+1!==N.length||_.classList.add("disabled"),l("after","slide",{currentSlide:k})}function f(){l("before","init"),B=(0,r.default)();var s=T=o({},a.default,t),c=s.classNameFrame,u=s.classNameSlideContainer,f=s.classNamePrevCtrl,h=s.classNameNextCtrl,E=s.enableMouseEvents,y=s.classNameActiveSlide;M=e.getElementsByClassName(c)[0],j=M.getElementsByClassName(u)[0],S=e.getElementsByClassName(f)[0],_=e.getElementsByClassName(h)[0],w={x:j.offsetLeft,y:j.offsetTop},T.infinite?N=i(d.call(j.children)):(N=d.call(j.children),S&&S.classList.add("disabled"),_&&1===N.length&&!T.rewind&&_.classList.add("disabled")),v(),y&&n(N,k),S&&_&&(S.addEventListener("click",m),_.addEventListener("click",p)),M.addEventListener("touchstart",b),E&&(M.addEventListener("mousedown",b),M.addEventListener("click",L)),T.window.addEventListener("resize",x),l("after","init")}function v(){var e=T,t=e.infinite,i=e.ease,o=e.rewindSpeed,r=e.rewindOnResize,s=e.classNameActiveSlide;g=j.getBoundingClientRect().width||j.offsetWidth,(C=M.getBoundingClientRect().width||M.offsetWidth)===g&&(g=N.reduce(function(e,t){return e+t.getBoundingClientRect().width||t.offsetWidth},0)),r?k=0:(i=null,o=0),t?(c(-1*N[k+t].offsetLeft,0,null),k+=t,w.x=-1*N[k].offsetLeft):(c(-1*N[k].offsetLeft,o,i),w.x=-1*N[k].offsetLeft),s&&n(d.call(N),k)}function m(){u(!1,!1)}function p(){u(!1,!0)}function h(){O&&(O(),O=void 0)}function b(e){var t=T.enableMouseEvents,n=e.touches?e.touches[0]:e;t&&(M.addEventListener("mousemove",E),M.addEventListener("mouseup",y),M.addEventListener("mouseleave",y)),M.addEventListener("touchmove",E),M.addEventListener("touchend",y);var i=n.pageX,o=n.pageY;P={x:i,y:o,time:Date.now()},z=void 0,A={},l("on","touchstart",{event:e})}function E(e){var t=e.touches?e.touches[0]:e,n=t.pageX,i=t.pageY;A={x:n-P.x,y:i-P.y},void 0===z&&(z=!!(z||Math.abs(A.x)<Math.abs(A.y))),!z&&P&&(e.preventDefault(),c(w.x+A.x,0,null)),l("on","touchmove",{event:e})}function y(e){var t=P?Date.now()-P.time:void 0,n=Number(t)<300&&Math.abs(A.x)>25||Math.abs(A.x)>C/3,i=!k&&A.x>0||k===N.length-1&&A.x<0,o=A.x<0;z||(n&&!i?u(!1,o):c(w.x,T.snapBackSpeed)),P=void 0,M.removeEventListener("touchmove",E),M.removeEventListener("touchend",y),M.removeEventListener("mousemove",E),M.removeEventListener("mouseup",y),M.removeEventListener("mouseleave",y),l("on","touchend",{event:e})}function L(e){A.x&&e.preventDefault()}function x(e){v(),l("on","resize",{event:e})}var w=void 0,g=void 0,C=void 0,N=void 0,M=void 0,j=void 0,S=void 0,_=void 0,B=void 0,O=void 0,k=0,T={};"undefined"!=typeof jQuery&&e instanceof jQuery&&(e=e[0]);var P=void 0,A=void 0,z=void 0;return f(),{setup:f,reset:v,slideTo:function(e){u(e)},returnIndex:function(){return k-T.infinite||0},prev:m,next:p,destroy:function(){l("before","destroy"),M.removeEventListener(B.transitionEnd,h),M.removeEventListener("touchstart",b),M.removeEventListener("touchmove",E),M.removeEventListener("touchend",y),M.removeEventListener("mousemove",E),M.removeEventListener("mousedown",b),M.removeEventListener("mouseup",y),M.removeEventListener("mouseleave",y),M.removeEventListener("click",L),T.window.removeEventListener("resize",x),S&&S.removeEventListener("click",m),_&&_.removeEventListener("click",p),T.infinite&&Array.apply(null,Array(T.infinite)).forEach(function(){j.removeChild(j.firstChild),j.removeChild(j.lastChild)}),l("after","destroy")}}};var r=i(n(3)),s=i(n(4)),a=i(n(2)),d=Array.prototype.slice},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={slidesToScroll:1,slideSpeed:300,rewindSpeed:600,snapBackSpeed:200,ease:"ease",rewind:!1,infinite:!1,classNameFrame:"js_frame",classNameSlideContainer:"js_slides",classNamePrevCtrl:"js_prev",classNameNextCtrl:"js_next",classNameActiveSlide:"active",enableMouseEvents:!1,window:window,rewindOnResize:!0}},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var t=void 0,n=void 0,i=void 0,o=void 0;return function(){var r=document.createElement("_"),s=r.style,a=void 0;""===s[a="webkitTransition"]&&(i="webkitTransitionEnd",n=a),""===s[a="transition"]&&(i="transitionend",n=a),""===s[a="webkitTransform"]&&(t=a),""===s[a="msTransform"]&&(t=a),""===s[a="transform"]&&(t=a),document.body.insertBefore(r,null),s[t]="translate3d(0, 0, 0)",o=!!e.getComputedStyle(r).getPropertyValue(t),document.body.removeChild(r)}(),{transform:t,transition:n,transitionEnd:i,hasTranslate3d:o}}}).call(t,n(0))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var o=new i.default(t,{bubbles:!0,cancelable:!0,detail:n});e.dispatchEvent(o)};var i=function(e){return e&&e.__esModule?e:{default:e}}(n(5))},function(e,t,n){(function(t){var n=t.CustomEvent;e.exports=function(){try{var e=new n("cat",{detail:{foo:"bar"}});return"cat"===e.type&&"bar"===e.detail.foo}catch(e){}return!1}()?n:"undefined"!=typeof document&&"function"==typeof document.createEvent?function(e,t){var n=document.createEvent("CustomEvent");return t?n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail):n.initCustomEvent(e,!1,!1,void 0),n}:function(e,t){var n=document.createEventObject();return n.type=e,t?(n.bubbles=Boolean(t.bubbles),n.cancelable=Boolean(t.cancelable),n.detail=t.detail):(n.bubbles=!1,n.cancelable=!1,n.detail=void 0),n}}).call(t,n(0))},,function(e,t,n){e.exports=n(1)}])});
"use strict";if("undefined"==typeof buildfire)throw"please add buildfire.js first to use carousel components";void 0===buildfire.components&&(buildfire.components={}),void 0===buildfire.components.carousel&&(buildfire.components.carousel={}),function(){for(var e=document.getElementsByTagName("script"),i=null,t=0;t<e.length;t++)e[t].src&&(e[t].src.toLowerCase().indexOf("buildfire/components/carousellight/carousellight.js")||e[t].src.toLowerCase().indexOf("buildfire/components/carousellight/carousellight.min.js"))&&(i=e[t].src);if(!i)throw"carousellight components not found";"undefined"==typeof lory&&document.write('<script src="'+i+'/../../../../lory/lory.min.js"><\/script>');var n=document.getElementById("loryInjectedStyle");n&&document.head.removeChild(n),(n=document.createElement("style")).id="loryInjectedStyle",n.innerHTML+=" .loryFrame {position: relative;font-size: 0; line-height: 0; overflow: hidden; white-space: nowrap;}",n.innerHTML+=" .loryFrame li { position: relative; display: inline-block; height: 100%;}",n.innerHTML+=" .lorySlides { display: inline-block;}",n.innerHTML+=" .loryPercentage .lorySlides { display: block; padding: 0px;}",n.innerHTML+=" .loryPercentage li {  width: 100%;}",n.innerHTML.length>0&&document.head.appendChild(n)}(),buildfire.components.carousel.view=function(e){if(e.items&&e.items.length>0){if(e.items.length>1)this.config=this.mergeSettings(e),this._initDimensions(this.config.layout),this.init();else{e.selector.innerHTML="";var i=document.createElement("img");i.setAttribute("src",buildfire.imageLib.cropImage(e.items[0].iconUrl,{width:window.innerWidth,height:Math.ceil(9*window.innerWidth/16)})),i.alt="Carousel Image",e.selector.appendChild(i),i.addEventListener("click",function(){buildfire.actionItems.execute(e.items[0],function(e,i){e&&console.warn("Error openning slider action: ",e)})})}e.selector.style.display=""}else e.selector.style.display="none"},buildfire.components.carousel.view.prototype={mergeSettings:function(e){var i={selector:".js_percentage",items:[],layout:null,speed:200,loop:!0,autoInterval:5e3},t=e;for(var n in t)i[n]=t[n];return i},init:function(){function e(){buildfire.getContext(function(e,t){t&&t.device&&t.device.platform&&"ios"==t.device.platform.toLowerCase()&&(buildfire.navigation.onAppLauncherActive(function(){i._applySlider()},!0),buildfire.navigation.onAppLauncherInactive(function(){i._destroySlider()},!0))})}if(this.selector="string"==typeof this.config.selector?document.querySelector(this.config.selector):this.config.selector,!this.selector)throw"selecter not found";var i=this;this.config.items&&this.config.items.length>0?this._renderHTMLItems(function(){i._applySlider(),e()}):(i._applySlider(),e())},_destroySlider:function(){this.lorySlider.destroy(),this.timerInterval&&(clearInterval(this.timerInterval),this.timerInterval=null)},_applySlider:function(){if(this.lorySlider=lory(this.config.selector,{classNameSlideContainer:this.config.classNameSlideContainer||"js_slides",classNameFrame:this.config.classNameFrame||"js_frame",ease:"ease",rewindSpeed:600,slideSpeed:this.config.speed,slidesToScroll:this.config.slidesToScroll||1,infinite:this.config.infinite||1,enableMouseEvents:!0}),this.config.loop&&this.config.items&&this.config.items.length>1){var e=this;this.timerInterval&&(clearInterval(this.timerInterval),this.timerInterval=null),this.timerInterval=setInterval(function(){e.lorySlider.next()},this.config.autoInterval)}},_renderHTMLItems:function(e){for(var i=this;this.selector.firstChild;)this.selector.removeChild(this.selector.firstChild);this.sliderFrame=document.createElement("div"),["loryFrame","js_frame"].forEach(function(e){i.sliderFrame.classList.add(e)}),this.slideContainer=document.createElement("ul"),["lorySlides","js_slides"].forEach(function(e){i.slideContainer.classList.add(e)}),this._loadImages(this.config.items,function(){["slider","js_percentage","loryPercentage"].forEach(function(e){i.selector.classList.add(e)}),i.sliderFrame.appendChild(i.slideContainer),i.selector.appendChild(i.sliderFrame),e()})},_loadImages:function(e,i){var t=this,n=e.length,s=n;0==n&&i();for(var r=0;r<n;r++)this._appendItem(e[r],function(e){s--,t.slideContainer.appendChild(e),0==s&&i()})},_appendItem:function(e,i){var t=document.createElement("li");t.classList.add("js_slide"),t.addEventListener("click",function(){buildfire.actionItems.execute(e,function(e,i){e&&console.warn("Error openning slider action: ",e)})}),buildfire.imageLib.local.cropImage(e.iconUrl,{width:this.width,height:this.height},function(e,n){if(e)console.log("Error occurred while cropping image: ",e);else{var s=document.createElement("img");s.src=n,t.appendChild(s)}i(t)})},append:function(e){if(e&&(e instanceof Array||"object"!=typeof e||(e=[e]),e&&e instanceof Array&&e.length)){for(var i=0;i<e.length;i++)this.items.push(e[i]);var t=this;this._loadImages(e,function(){t._applySlider()})}},_initDimensions:function(e){this.width=window.innerWidth,"WideScreen"==(e=e||"WideScreen")?this.height=Math.ceil(9*this.width/16):"Square"==e?this.height=this.width:"Cinema"==e?this.height=Math.ceil(1*this.width/2.39):"MobileScreen"==e&&(this.height=window.innerHeight/this.width*this.width,this.width=this.width),this.cssWidth=this.width+"px",this.height>380?this.cssHeight="380px":this.cssHeight=this.height+"px",this._minHeight="180px",this._minHeight=this.cssHeight}};
//# sourceMappingURL=buildfire_lightcarousel.min.js.map
