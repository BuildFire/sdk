{"version":3,"sources":["../sdk/scripts/buildfire/components/carouselLight/carouselLight.js"],"names":["buildfire","components","carousel","lory","document","write","style","getElementById","head","removeChild","createElement","id","innerHTML","appendChild","view","options","self","this","resizeTimeout","config","mergeSettings","_initDimensions","layout","selector","querySelector","_attachEventListeners","items","length","_applyConfigurations","err","result","shouldInitializeLory","init","_renderStaticSlides","display","console","error","originalWidth","window","innerWidth","addEventListener","currentWidth","clearTimeout","setTimeout","loadItems","lastCarouselTimer","prototype","lastImage","callback","autoInterval","order","clearInterval","storagePlace","getFrameType","localStorage","getItem","res","images","sendIndex","item","index","Number","setItem","e","r","setInterval","_changeImage","bind","Math","floor","random","removeItem","_randomizeArray","_shuffle","imagesCopy","Array","from","push","first","last","j","x","i","carouselImages","carouselImage","_changeStaticSlides","indexOf","isHome","activeSlide","siblingSlide","nextSibling","nextSlide","querySelectorAll","children","src","classList","remove","add","forEach","slide","iconUrl","actionItems","execute","warn","_resizeImage","_cropImage","attrName","settings","speed","loop","userSettings","_minHeight","validateLauncherCarousel","getContext","device","platform","toLowerCase","navigation","onAppLauncherActive","_applySlider","onAppLauncherInactive","_destroySlider","_renderHTMLItems","timerInterval","lorySlider","classNameSlideContainer","classNameFrame","ease","rewindSpeed","slideSpeed","slidesToScroll","infinite","enableMouseEvents","next","firstChild","sliderFrame","cname","slideContainer","_loadImages","itemsLength","pending","_appendItem","itemSlide","preventClicks","append","setup","appendItems","width","height","ceil","aspect","innerHeight","cssWidth","cssHeight","imageLib","local","cropImage","size","image","backgroundImage","blur","alt","title","className","setAttribute","overflow","transform","resizeImage"],"mappings":"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","file":"carouselLight.min.js","sourcesContent":["'use strict';\n\nif (typeof (buildfire) == 'undefined') throw ('please add buildfire.js first to use carousel components');\n\nif (typeof (buildfire.components) == 'undefined')\n\tbuildfire.components = {};\n\nif (typeof (buildfire.components.carousel) == 'undefined')\n\tbuildfire.components.carousel = {};\n\n(function () {\n\tif (typeof lory == 'undefined') {\n\t\tdocument.write('<script src=\"' + '../../../scripts/lory/lory.min.js\"></script>');\n\t}\n\n\t//Add Lory CSS\n\tvar style = document.getElementById('loryInjectedStyle');\n\tif (style) document.head.removeChild(style);\n\n\tstyle = document.createElement('style');\n\tstyle.id = 'loryInjectedStyle';\n\tstyle.innerHTML += ' .loryFrame {position: relative;font-size: 0; line-height: 0; overflow: hidden; white-space: nowrap;}';\n\tstyle.innerHTML += ' .loryFrame li { position: relative; display: inline-block; height: 100%;}';\n\tstyle.innerHTML += ' .lorySlides { display: inline-block;}';\n\tstyle.innerHTML += ' .loryPercentage .lorySlides { display: block; padding: 0px;}';\n\tstyle.innerHTML += ' .loryPercentage li { width: 100%;}';\n\tstyle.innerHTML += ' .js_slide { text-align: center; position: relative; max-height: 380px; vertical-align: top; }';\n\tstyle.innerHTML += ' .js_slide img { max-height: 380px; width: auto !important; margin: 0 auto }';\n\tstyle.innerHTML += ' .js_slide.static_slide { display: none }';\n\tstyle.innerHTML += ' .js_slide.static_slide.active { display: block }';\n\n\tdocument.head.appendChild(style);\n})();\n// This is the class that will be used in the mobile\n//{selector:selector, items:items, layout:layout, speed:speed}\nbuildfire.components.carousel.view = function (options) {\n\tlet self = this;\n\tlet resizeTimeout;\n\tthis.config = this.mergeSettings(options);\n\tthis._initDimensions(self.config.layout);\n\tthis.selector = typeof this.config.selector === 'string' ? document.querySelector(this.config.selector) : this.config.selector;\n\tthis._attachEventListeners();\n\tif (options.items && options.items.length > 0) {\n\t\tthis._applyConfigurations(options, (err, result) => {\n\t\t\tif (result.shouldInitializeLory) { // loryCarousel\n\t\t\t\tself.init();\n\t\t\t} else {\n\t\t\t\tself._renderStaticSlides(options.items);\n\t\t\t}\n\t\t});\n\t\tif (options.selector) {\n\t\t\toptions.selector.style.display = '';\n\t\t} else {\n\t\t\tconsole.error('Selector element should be provided');\n\t\t}\n\t\t\n\t} else {\n\t\tif (options.selector) {\n\t\t\toptions.selector.style.display = 'none';\n\t\t} else {\n\t\t\tconsole.error('Selector element should be provided');\n\t\t}\n\t}\n\t\n\tlet originalWidth = window.innerWidth;\t\n\twindow.addEventListener('resize', () => { // rerender items on window resize\n\t\tconst currentWidth = window.innerWidth;\n\t\t// we just check for width change, where sometime height changes\n\t\t// because of the title bar hide in launcher when navigating, which is not real resize\n\t\tif (currentWidth !== originalWidth) {\n\t\t\tif (resizeTimeout) {\n\t\t\t\tclearTimeout(resizeTimeout);\n\t\t\t\tresizeTimeout = null;\n\t\t\t}\n\t\t\tresizeTimeout = setTimeout(() => {\n\t\t\t\tif (self.config.items && self.config.items.length) {\n\t\t\t\t\tself.loadItems(self.config.items, false);\n\t\t\t\t}\n\t\t\t\toriginalWidth = currentWidth;\n\t\t\t}, 500);\n\t  \t}\n\t});\n};\nbuildfire.components.carousel.view.lastCarouselTimer = null;\n// Carousel view methods\nbuildfire.components.carousel.view.prototype = {\n\tlastImage: null,\n    _applyConfigurations: function(options, callback) {\n\t\tlet self = this;\n\t\tlet { items, autoInterval, order, display } = options;\n\t\tif (buildfire.components.carousel.view.lastCarouselTimer) {\n\t\t\tclearInterval(buildfire.components.carousel.view.lastCarouselTimer);\n\t\t\tbuildfire.components.carousel.view.lastCarouselTimer = null;\n\t\t}\n\t\tlet isHome = buildfire.getFrameType() == 'LAUNCHER_PLUGIN';\n\t\tlet storagePlace = (isHome) ? \"carouselLastImageHome\" : \"carouselLastImage\";\n\t\tif (order == 0 && display == 1 && items.length > 1) {\n\t\t\tbuildfire.localStorage.getItem(storagePlace, function(err, res) {\n\t\t\t\tlet images = items;\n\t\t\t\tlet sendIndex = 0;\n\t\t\t\tlet item = null;\n\t\t\t\tif (res == null) {\n\t\t\t\t\titem = items[0];\n\t\t\t\t} else {\n\t\t\t\t\tlet index = Number(res);\n\t\t\t\t\tif (index == -1 || index == items.length - 1) item = items[0];\n\t\t\t\t\telse {item = items[index + 1]; sendIndex = index + 1;}\n\t\t\t\t}\n\t\t\t\tself.lastImage = item;\n\t\t\t\tbuildfire.localStorage.setItem(storagePlace, sendIndex, function(e, r) {\n\t\t\t\t\tif (autoInterval != 0) buildfire.components.carousel.view.lastCarouselTimer = setInterval(self._changeImage.bind(self), self.config.autoInterval, images, false);\n\t\t\t\t});\n\t\t\t\tcallback(null, {shouldInitializeLory: false});\n\t\t\t});\n\t\t} else if (order == 1 && display == 1 && items.length > 1) {\n\t\t\tif (autoInterval != 0) {\n\t\t\t\tbuildfire.components.carousel.view.lastCarouselTimer = setInterval(this._changeImage.bind(this), this.config.autoInterval, items, true);\n\t\t\t}\n\t\t\titem = items[Math.floor(Math.random() * items.length)];\n\t\t\tthis.lastImage = item;\n\t\t\tbuildfire.localStorage.removeItem(storagePlace);\n\t\t\tcallback(null, {shouldInitializeLory: false});\n\t\t} else if (order == 1 && display == 0 && items.length > 1) {\n\t\t\tthis._randomizeArray(items);\n\t\t\tbuildfire.localStorage.removeItem(storagePlace);\n\t\t\tcallback(null, {shouldInitializeLory: true});\n\t\t} else if (display == 1) {\n\t\t\tcallback(null, {shouldInitializeLory: false});\n\t\t} else {\n\t\t\tcallback(null, {shouldInitializeLory: true});\n\t\t}\n\t},\n\t_randomizeArray: function (images) {\n        this._shuffle(images, null, null);\n        let imagesCopy = Array.from(images);\n        this._shuffle(imagesCopy, null, images[images.length -  1]);\n        images.push(...imagesCopy);\n        this._shuffle(imagesCopy, images[0], images[images.length - 1]);\n        images.push(...imagesCopy);\n    },\n\t_shuffle: function (images, first, last) {\n        let j, x, i;\n        for (i = images.length - 1; i > 0; i--) {\n            j = Math.floor(Math.random() * (i + 1));\n            x = images[i];\n            images[i] = images[j];\n            images[j] = x;\n        }\n        if (last == images[0] || first == images[images.length - 1]) return this._shuffle(images, first, last);\n        else return images;\n    },\n\t_changeImage: function (carouselImages, random) {\n        let self = this;\n\t\tlet carouselImage = null;\n        if (random) {\n                this._changeStaticSlides(carouselImages, true);\n        } else {\n            let index = carouselImages.indexOf(this.lastImage);\n            let sendIndex = 0;\n            if (index == -1 || index == carouselImages.length - 1) {\n\t\t\t\tcarouselImage = carouselImages[0];\n\t\t\t} else {\n\t\t\t\tcarouselImage = carouselImages[index + 1]; \n\t\t\t\tsendIndex = index + 1;\n\t\t\t}\n            this.lastImage = carouselImage;\n            let isHome = buildfire.getFrameType() == 'LAUNCHER_PLUGIN';\n            let storagePlace = (isHome) ? \"carouselLastImageHome\" : \"carouselLastImage\";\n            buildfire.localStorage.setItem(storagePlace, sendIndex, function(e, r) {\n                self._changeStaticSlides(carouselImages);\n            });\n        }\n    },\n\t_changeStaticSlides: function (carouselImages, random) {\n\t\tlet activeSlide = document.querySelector('.js_slide.static_slide.active');\n\t\tlet siblingSlide = activeSlide.nextSibling;\n\t\tif (random) {\n\t\t\tlet nextSlide = document.querySelectorAll('.js_slide.static_slide')[Math.floor(Math.random() * carouselImages.length)];\n\t\t\tif (nextSlide.children[0].src == activeSlide.children[0].src) {\n\t\t\t\tthis._changeStaticSlides(carouselImages, true);\n\t\t\t} else {\n\t\t\t\tactiveSlide.classList.remove('active');\n\t\t\t\tnextSlide.classList.add('active');\n\t\t\t}\n\t\t} else {\n\t\t\tactiveSlide.classList.remove('active');\n\t\t\tif (siblingSlide) {\n\t\t\t\tsiblingSlide.classList.add('active');\n\t\t\t} else {\n\t\t\t\tdocument.querySelector('.js_slide.static_slide').classList.add('active');\n\t\t\t}\n\t\t}\n\t},\n\t_renderStaticSlides: function (carouselImages) {\n\t\tlet self = this;\n\t\tthis.selector.innerHTML = '';\n\t\tcarouselImages.forEach((carouselImage, index) => {\n\t\t\tlet slide = document.createElement('div');\n\t\t\tslide.classList.add('js_slide', 'static_slide');\n\t\t\tif (index == 0 && !self.lastImage) {\n\t\t\t\tslide.classList.add('active');\n\t\t\t} else if (self.lastImage && self.lastImage.iconUrl == carouselImage.iconUrl) {\n\t\t\t\tslide.classList.add('active');\n\t\t\t}\n\t\t\tslide.addEventListener('click', function () {\n\t\t\t\tbuildfire.actionItems.execute(carouselImage, function (err, result) {\n\t\t\t\t\tif (err) {\n\t\t\t\t\t\tconsole.warn('Error opening slider action: ', err);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tlet options = {\n\t\t\t\titem: carouselImage,\n\t\t\t\tslide: slide\n\t\t\t}\n\t\t\tif (self.layout == 'Fit') {\n\t\t\t\tself._resizeImage(options, (err, result) => {\n\t\t\t\t\tif (err)  console.error('Error occurred while resizing image: ', err);\n\t\t\t\t\tself.selector.appendChild(slide);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tself._cropImage(options, (err, result) => {\n\t\t\t\t\tif (err)  console.error('Error occurred while cropping image: ', err);\n\t\t\t\t\tself.selector.appendChild(slide);\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t\tlet activeSlide = document.querySelector('.js_slide.static_slide.active');\n\t\tif (!activeSlide) {\n\t\t\tdocument.querySelector('.js_slide.static_slide').classList.add('active');\n\t\t}\n\t},\n\tmergeSettings: function (options) {\n\t\tvar settings = {\n\t\t\tselector: '.js_percentage',\n\t\t\titems: [],\n\t\t\tlayout: null,\n\t\t\tspeed: 200,\n\t\t\tloop: true,\n\t\t\tautoInterval: 5 * 1000,\n\t\t\tdisplay: 0,\n\t\t\torder: 0\n\t\t};\n\t\tvar userSettings = options;\n\t\tfor (var attrName in userSettings) {\n\t\t\tsettings[attrName] = userSettings[attrName];\n\t\t}\n\t\treturn settings;\n\t},\n\tinit: function () {\n\t\tif (!this.selector) {\n\t\t\tthrow ('selector not found');\n\t\t\treturn;\n\t\t}\n\t\t// Add min-height to carousel to prevent it from pushing content down\n\t\tthis.selector.style['min-height'] = this._minHeight;\n\n\t\tvar self = this;\n\n\t\tfunction validateLauncherCarousel() {\n\t\t\tbuildfire.getContext(function (err, result) {\n\t\t\t\tif (result && result.device && result.device.platform && result.device.platform.toLowerCase() == 'ios' && buildfire.getFrameType() == 'LAUNCHER_PLUGIN') {\n\t\t\t\t\tbuildfire.navigation.onAppLauncherActive(function () {\n\t\t\t\t\t\tself._applySlider();\n\t\t\t\t\t}, true);\n\t\t\t\t\tbuildfire.navigation.onAppLauncherInactive(function () {\n\t\t\t\t\t\tself._destroySlider();\n\t\t\t\t\t}, true);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tif (this.config.items && this.config.items.length > 0) {\n\t\t\tthis._renderHTMLItems(function () {\n\t\t\t\tself._applySlider();\n\t\t\t\tvalidateLauncherCarousel();\n\t\t\t});\n\t\t} else {\n\t\t\tself._applySlider();\n\t\t\tvalidateLauncherCarousel();\n\t\t}\n\t},\n\t_destroySlider: function () {\n\t\tif (this.timerInterval) {\n\t\t\tclearInterval(this.timerInterval);\n\t\t\tthis.timerInterval = null;\n\t\t}\n\t},\n\t_applySlider: function () {\n\t\tif (!this.lorySlider) {\n\t\t\tthis.lorySlider = lory(this.config.selector, {\n\t\t\t\tclassNameSlideContainer: this.config.classNameSlideContainer || 'js_slides',\n\t\t\t\tclassNameFrame: this.config.classNameFrame || 'js_frame',\n\t\t\t\tease: 'ease',\n\t\t\t\trewindSpeed: 600,//ms\n\t\t\t\tslideSpeed: this.config.speed,//ms\n\t\t\t\tslidesToScroll: this.config.slidesToScroll || 1,\n\t\t\t\tinfinite: this.config.items.length > 1 ? 1 : 0,\n\t\t\t\tenableMouseEvents: true\n\t\t\t});\n\t\t}\n\n\t\tif (this.config.loop && this.config.items && this.config.items.length > 1) {\n\t\t\tvar self = this;\n\n\t\t\tif (this.timerInterval) {\n\t\t\t\tclearInterval(this.timerInterval);\n\t\t\t\tthis.timerInterval = null;\n\t\t\t}\n\n\t\t\tthis.timerInterval = setInterval(function () {\n\t\t\t\tself.lorySlider.next();\n\t\t\t}, this.config.autoInterval);\n\t\t}\n\t},\n\t_renderHTMLItems: function (callback) {\n\t\tvar self = this;\n\n\t\twhile (this.selector.firstChild) {\n\t\t\tthis.selector.removeChild(this.selector.firstChild);\n\t\t}\n\n\t\tthis.sliderFrame = document.createElement('div');\n\t\t['loryFrame', 'js_frame'].forEach(function (cname) {\n\t\t\tself.sliderFrame.classList.add(cname);\n\t\t});\n\n\t\tthis.slideContainer = document.createElement('ul');\n\t\t['lorySlides', 'js_slides'].forEach(function (cname) {\n\t\t\tself.slideContainer.classList.add(cname);\n\t\t});\n\n\t\tthis._loadImages(this.config.items, function () {\n\t\t\t['slider', 'js_percentage', 'loryPercentage'].forEach(function (cname) {\n\t\t\t\tself.selector.classList.add(cname);\n\t\t\t});\n\n\t\t\tself.sliderFrame.appendChild(self.slideContainer);\n\t\t\tself.selector.appendChild(self.sliderFrame);\n\n\t\t\tcallback();\n\t\t});\n\t},\n\t_loadImages: function (items, callback) {\n\t\tvar self = this;\n\n\t\tvar itemsLength = items.length;\n\t\tvar pending = itemsLength;\n\n\t\tif (itemsLength == 0) {\n\t\t\tcallback();\n\t\t}\n\n\t\tfor (var i = 0; i < itemsLength; i++) {\n\t\t\tthis._appendItem(items[i], function (itemSlide) {\n\t\t\t\tpending--;\n\t\t\t\tself.slideContainer.appendChild(itemSlide);\n\n\t\t\t\tif (pending == 0) {\n\t\t\t\t\tcallback();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t},\n\t_appendItem: function (item, callback) {\n\t\tlet self = this;\n\t\tlet slide = document.createElement('li');\n\t\tslide.classList.add('js_slide');\n\n\t\tslide.addEventListener('click', function () {\n\t\t\tif (self.preventClicks) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tbuildfire.actionItems.execute(item, function (err, result) {\n\t\t\t\tif (err) {\n\t\t\t\t\tconsole.warn('Error opening slider action: ', err);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t\tlet options = { item, slide }\n\t\tif (self.layout == 'Fit') {\n\t\t\tthis._resizeImage(options, (err, result) => {\n\t\t\t\tif (err)  console.error('Error occurred while cropping image: ', err);\n\t\t\t\tcallback(slide);\n\t\t\t});\n\t\t} else {\n\t\t\tthis._cropImage(options, (err, result) => {\n\t\t\t\tif (err)  console.error('Error occurred while cropping image: ', err);\n\t\t\t\tcallback(slide);\n\t\t\t});\n\t\t}\n\t},\n\t// allows you to append a single item or an array of items\n\tappend: function (items) {\n\t\tif (!items)\n\t\t\treturn;\n\t\telse if (!(items instanceof Array) && typeof(items) == 'object')\n\t\t\titems = [items];\n\n\t\tif (items && items instanceof Array && items.length) {\n\t\t\tfor (var i = 0; i < items.length; i++) {\n\t\t\t\tthis.config.items.push(items[i]);\n\t\t\t}\n\t\t\tvar self = this;\n\t\t\tif (this.config.display == 0) {\n\t\t\t\tthis.slideContainer.innerHTML = '';\n\t\t\t\tthis._loadImages(this.config.items, function () {\n\t\t\t\t\tif (self.config.items.length > 1 && !self.timerInterval) {\n\t\t\t\t\t\tself.lorySlider = null;\n\t\t\t\t\t\tself._applySlider();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tself.lorySlider.setup();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthis._renderStaticSlides(this.config.items);\n\t\t\t}\n\t\t}\n\t},\n\tloadItems: function (items, appendItems) {\n\t\tif (appendItems) {\n\t\t\tthis.append(items);\n\t\t} else {\n\t\t\tlet self = this;\n\t\t\tthis.config.items = items;\n\t\t\tif (this.config.display == 0) {\n\t\t\t\tif (this.config.order == 1) {\n\t\t\t\t\tthis._randomizeArray(items);\n\t\t\t\t}\n\t\t\t\tthis.slideContainer.innerHTML = '';\n\t\t\t\tthis._loadImages(items, function () {\n\t\t\t\t\tif (items.length > 1 && !self.timerInterval) {\n\t\t\t\t\t\tself.lorySlider = null;\n\t\t\t\t\t\tself._applySlider();\n\t\t\t\t\t} else if (items.length <= 1 && self.timerInterval) {\n\t\t\t\t\t\tself._destroySlider();\n\t\t\t\t\t\tself.lorySlider = null;\n\t\t\t\t\t\tself._applySlider();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tself.lorySlider.setup();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tif (buildfire.components.carousel.view.lastCarouselTimer) {\n\t\t\t\t\tclearInterval(buildfire.components.carousel.view.lastCarouselTimer);\n\t\t\t\t\tbuildfire.components.carousel.view.lastCarouselTimer = null;\n\t\t\t\t}\n\t\t\t\tthis._renderStaticSlides(items);\n\t\t\t\tif (items.length > 1) {\n\t\t\t\t\tbuildfire.components.carousel.view.lastCarouselTimer = setInterval(this._changeImage.bind(this), this.config.autoInterval, items, this.config.order);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\t_initDimensions: function (layout) {\n\t\tthis.width = window.innerWidth;\n\t\tthis.layout = layout;\n\t\tlayout = layout || 'WideScreen';\n\t\tif (layout == 'WideScreen') {\n\t\t\tthis.height = Math.ceil(9 * this.width / 16);\n\t\t\tthis.aspect = '16:9';\n\t\t} else if (layout == 'Square') {\n\t\t\tthis.height = this.width;\n\t\t\tthis.aspect = '1:1';\n\t\t} else if (layout == 'Cinema') {\n\t\t\tthis.height = Math.ceil(1 * this.width / 2.39);\n\t\t\tthis.aspect = '2.39:1';\n\t\t} else if (layout == 'MobileScreen' || layout == 'Fit') {\n\t\t\tthis.height = (window.innerHeight / this.width) * this.width;\n\t\t\tthis.aspect = '9:16';\n\t\t} else {\n\t\t\tthis.height = Math.ceil(9 * this.width / 16);\n\t\t}\n\n\t\tthis.cssWidth = this.width + 'px';\n\t\tif (this.height > 380) {\n\t\t\tthis.cssHeight = '380px';\n\t\t} else {\n\t\t\tthis.cssHeight = this.height + 'px';\n\t\t}\n\n\t\t// Set Min height on carousel so doesn't push content down on load.\n\t\tthis._minHeight = this.cssHeight;\n\t},\n\t_cropImage: function(options, callback) {\n\t\tlet self = this;\n\t\tlet { item, slide } = options;\n\t\tbuildfire.imageLib.local.cropImage(item.iconUrl, {\n\t\t\twidth: this.width,\n\t\t\theight: this.height,\n\t\t\taspect: this.aspect,\n\t\t\tsize: 'full_width',\n\t\t}, function (err, result) {\n\t\t\tif (!err) {\n\t\t\t\tlet image = document.createElement('img');\n\t\t\t\tlet backgroundImage = document.createElement('img');\n\t\t\t\timage.src = result;\n\t\t\t\tbackgroundImage.src = buildfire.imageLib.cropImage(item.iconUrl, {\n\t\t\t\t\theight: Math.ceil(self.height / 20),\n\t\t\t\t\twidth: Math.ceil(self.width / 20),\n\t\t\t\t\tblur: 40,\n\t\t\t\t});\n\t\t\t\timage.alt = backgroundImage.alt = item.title || '';\n\t\t\t\tbackgroundImage.className = 'blurred-background-image';\n\t\t\t\tbackgroundImage.setAttribute('style', `width: 100% !important; height: ${self.height}px; top: 50%; left: 50%; transform: translate(-50%, -50%);`);\n\t\t\t\tslide.style.overflow = 'hidden';\n\t\t\t\timage.style.transform = 'translateZ(0)';\n\t\t\t\tif (self.height > 380) {\n\t\t\t\t\tslide.appendChild(backgroundImage);\n\t\t\t\t}\n\t\t\t\tslide.appendChild(image);\n\t\t\t\tcallback(null, result);\n\t\t\t} else {\n\t\t\t\tcallback(err, null);\n\t\t\t}\n\t\t});\n\t},\n\t_resizeImage: function(options, callback) {\n\t\tlet self = this;\n\t\tlet { item, slide } = options;\n\t\tbuildfire.imageLib.local.resizeImage(item.iconUrl, {\n\t\t\theight: self.height,\n\t\t}, function (err, result) {\n\t\t\tif (!err) {\n\t\t\t\tlet image = document.createElement('img');\n\t\t\t\tlet backgroundImage = document.createElement('img');\n\t\t\t\timage.src = result;\n\t\t\t\tbackgroundImage.src = buildfire.imageLib.cropImage(item.iconUrl, {\n\t\t\t\t\theight: Math.ceil(self.height / 20),\n\t\t\t\t\twidth: Math.ceil(self.width / 20),\n\t\t\t\t\tblur: 40,\n\t\t\t\t});\n\t\t\t\timage.alt = backgroundImage.alt = item.title || '';\n\t\t\t\tbackgroundImage.className = 'blurred-background-image';\n\t\t\t\tbackgroundImage.setAttribute('style', `width: 100% !important; height: ${self.height}px; top: 50%; left: 50%; transform: translate(-50%, -50%);`);\n\t\t\t\timage.style.transform = 'translateZ(0)';\n\t\t\t\tslide.setAttribute('style', `vertical-align: middle; overflow: visible;`);\n\t\t\t\tslide.appendChild(backgroundImage);\n\t\t\t\tslide.appendChild(image);\n\t\t\t\tcallback(null, result);\n\t\t\t} else {\n\t\t\t\tcallback(err, null);\n\t\t\t}\n\t\t});\n\t},\n\t_attachEventListeners: function() {\n\t\tlet self = this;\n\t\t// add event listeners to prevent immediate click event after scrolling \n\t\tthis.selector.addEventListener('on.lory.touchmove', function () {\n\t\t\tif (!self.preventClicks) {\n\t\t\t\tself.preventClicks = true;\n\t\t\t}\n\t\t});\n\t\tthis.selector.addEventListener('on.lory.touchend', function () {\n\t\t\tsetTimeout(() => {\n\t\t\t\tself.preventClicks = false;\n\t\t\t}, 0);\n\t\t});\n\t}\n};\n"]}