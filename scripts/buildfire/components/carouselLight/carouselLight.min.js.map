{"version":3,"sources":["../sdk/scripts/buildfire/components/carouselLight/carouselLight.js"],"names":["buildfire","components","carousel","lory","document","write","style","getElementById","head","removeChild","createElement","id","innerHTML","appendChild","view","options","self","this","config","mergeSettings","_initDimensions","layout","selector","querySelector","_attachEventListeners","items","length","_applyConfigurations","err","result","shouldInitializeLory","init","_renderStaticSlides","display","console","error","lastCarouselTimer","prototype","lastImage","callback","autoInterval","order","clearInterval","storagePlace","getFrameType","localStorage","getItem","res","images","sendIndex","item","index","Number","setItem","e","r","setInterval","_changeImage","bind","Math","floor","random","removeItem","_randomizeArray","_shuffle","imagesCopy","Array","from","push","first","last","j","x","i","carouselImages","carouselImage","_changeStaticSlides","indexOf","isHome","activeSlide","siblingSlide","nextSibling","nextSlide","querySelectorAll","children","src","classList","remove","add","forEach","slide","iconUrl","addEventListener","actionItems","execute","warn","_cropImage","attrName","settings","speed","loop","userSettings","_minHeight","validateLauncherCarousel","getContext","device","platform","toLowerCase","navigation","onAppLauncherActive","_applySlider","onAppLauncherInactive","_destroySlider","_renderHTMLItems","timerInterval","lorySlider","classNameSlideContainer","classNameFrame","ease","rewindSpeed","slideSpeed","slidesToScroll","infinite","enableMouseEvents","next","firstChild","sliderFrame","cname","slideContainer","_loadImages","itemsLength","pending","_appendItem","itemSlide","preventClicks","append","setup","loadItems","appendItems","width","window","innerWidth","height","ceil","aspect","innerHeight","cssWidth","cssHeight","imageLib","local","cropImage","size","image","backgroundImage","alt","title","className","setAttribute","overflow","transform","setTimeout"],"mappings":"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","file":"carouselLight.min.js","sourcesContent":["'use strict';\r\n\r\nif (typeof (buildfire) == 'undefined') throw ('please add buildfire.js first to use carousel components');\r\n\r\nif (typeof (buildfire.components) == 'undefined')\r\n\tbuildfire.components = {};\r\n\r\nif (typeof (buildfire.components.carousel) == 'undefined')\r\n\tbuildfire.components.carousel = {};\r\n\r\n(function () {\r\n\tif (typeof lory == 'undefined') {\r\n\t\tdocument.write('<script src=\"' + '../../../scripts/lory/lory.min.js\"></script>');\r\n\t}\r\n\r\n\t//Add Lory CSS\r\n\tvar style = document.getElementById('loryInjectedStyle');\r\n\tif (style) document.head.removeChild(style);\r\n\r\n\tstyle = document.createElement('style');\r\n\tstyle.id = 'loryInjectedStyle';\r\n\tstyle.innerHTML += ' .loryFrame {position: relative;font-size: 0; line-height: 0; overflow: hidden; white-space: nowrap;}';\r\n\tstyle.innerHTML += ' .loryFrame li { position: relative; display: inline-block; height: 100%;}';\r\n\tstyle.innerHTML += ' .lorySlides { display: inline-block;}';\r\n\tstyle.innerHTML += ' .loryPercentage .lorySlides { display: block; padding: 0px;}';\r\n\tstyle.innerHTML += ' .loryPercentage li { width: 100%;}';\r\n\tstyle.innerHTML += ' .blurred-background-image { filter: blur(30px); position: absolute; top: 0 }';\r\n\tstyle.innerHTML += ' .js_slide { text-align: center; position: relative; max-height: 380px; }';\r\n\tstyle.innerHTML += ' .js_slide img { max-height: 380px; width: auto !important; margin: 0 auto }';\r\n\tstyle.innerHTML += ' .js_slide.static_slide { display: none }';\r\n\tstyle.innerHTML += ' .js_slide.static_slide.active { display: block }';\r\n\r\n\tdocument.head.appendChild(style);\r\n})();\r\n// This is the class that will be used in the mobile\r\n//{selector:selector, items:items, layout:layout, speed:speed}\r\nbuildfire.components.carousel.view = function (options) {\r\n\tlet self = this;\r\n\tthis.config = this.mergeSettings(options);\r\n\tthis._initDimensions(self.config.layout);\r\n\tthis.selector = typeof this.config.selector === 'string' ? document.querySelector(this.config.selector) : this.config.selector;\r\n\tthis._attachEventListeners();\r\n\tif (options.items && options.items.length > 0) {\r\n\t\tthis._applyConfigurations(options, (err, result) => {\r\n\t\t\tif (options.items.length > 1 && result.shouldInitializeLory) { // loryCarousel\r\n\t\t\t\tself.init();\r\n\t\t\t} else {\r\n\t\t\t\tself._renderStaticSlides(options.items);\r\n\t\t\t}\r\n\t\t});\r\n\t\tif (options.selector) {\r\n\t\t\toptions.selector.style.display = '';\r\n\t\t} else {\r\n\t\t\tconsole.error('Selector element should be provided');\r\n\t\t}\r\n\t\t\r\n\t} else {\r\n\t\tif (options.selector) {\r\n\t\t\toptions.selector.style.display = 'none';\r\n\t\t} else {\r\n\t\t\tconsole.error('Selector element should be provided');\r\n\t\t}\r\n\t}\r\n};\r\nbuildfire.components.carousel.view.lastCarouselTimer = null;\r\n// Carousel view methods\r\nbuildfire.components.carousel.view.prototype = {\r\n\tlastImage: null,\r\n    _applyConfigurations: function(options, callback) {\r\n\t\tlet self = this;\r\n\t\tlet { items, autoInterval, order, display } = options;\r\n\t\tif (buildfire.components.carousel.view.lastCarouselTimer) {\r\n\t\t\tclearInterval(buildfire.components.carousel.view.lastCarouselTimer);\r\n\t\t\tbuildfire.components.carousel.view.lastCarouselTimer = null;\r\n\t\t}\r\n\t\tlet isHome = buildfire.getFrameType() == 'LAUNCHER_PLUGIN';\r\n\t\tlet storagePlace = (isHome) ? \"carouselLastImageHome\" : \"carouselLastImage\";\r\n\t\tif (order == 0 && display == 1 && items.length > 1) {\r\n\t\t\tbuildfire.localStorage.getItem(storagePlace, function(err, res) {\r\n\t\t\t\tlet images = items;\r\n\t\t\t\tlet sendIndex = 0;\r\n\t\t\t\tlet item = null;\r\n\t\t\t\tif (res == null) {\r\n\t\t\t\t\titem = items[0];\r\n\t\t\t\t} else {\r\n\t\t\t\t\tlet index = Number(res);\r\n\t\t\t\t\tif (index == -1 || index == items.length - 1) item = items[0];\r\n\t\t\t\t\telse {item = items[index + 1]; sendIndex = index + 1;}\r\n\t\t\t\t}\r\n\t\t\t\tself.lastImage = item;\r\n\t\t\t\tbuildfire.localStorage.setItem(storagePlace, sendIndex, function(e, r) {\r\n\t\t\t\t\tif (autoInterval != 0) buildfire.components.carousel.view.lastCarouselTimer = setInterval(self._changeImage.bind(self), self.config.autoInterval, images, false);\r\n\t\t\t\t});\r\n\t\t\t\tcallback(null, {shouldInitializeLory: false});\r\n\t\t\t});\r\n\t\t} else if (order == 1 && display == 1 && items.length > 1) {\r\n\t\t\tif (autoInterval != 0) {\r\n\t\t\t\tbuildfire.components.carousel.view.lastCarouselTimer = setInterval(this._changeImage.bind(this), this.config.autoInterval, items, true);\r\n\t\t\t}\r\n\t\t\titem = items[Math.floor(Math.random() * items.length)];\r\n\t\t\tthis.lastImage = item;\r\n\t\t\tbuildfire.localStorage.removeItem(storagePlace);\r\n\t\t\tcallback(null, {shouldInitializeLory: false});\r\n\t\t} else if (order == 1 && display == 0 && items.length > 1) {\r\n\t\t\tthis._randomizeArray(items);\r\n\t\t\tbuildfire.localStorage.removeItem(storagePlace);\r\n\t\t\tcallback(null, {shouldInitializeLory: true});\r\n\t\t} else {\r\n\t\t\tcallback(null, {shouldInitializeLory: true});\r\n\t\t}\r\n\t},\r\n\t_randomizeArray: function (images) {\r\n        this._shuffle(images, null, null);\r\n        let imagesCopy = Array.from(images);\r\n        this._shuffle(imagesCopy, null, images[images.length -  1]);\r\n        images.push(...imagesCopy);\r\n        this._shuffle(imagesCopy, images[0], images[images.length - 1]);\r\n        images.push(...imagesCopy);\r\n    },\r\n\t_shuffle: function (images, first, last) {\r\n        let j, x, i;\r\n        for (i = images.length - 1; i > 0; i--) {\r\n            j = Math.floor(Math.random() * (i + 1));\r\n            x = images[i];\r\n            images[i] = images[j];\r\n            images[j] = x;\r\n        }\r\n        if (last == images[0] || first == images[images.length - 1]) return this._shuffle(images, first, last);\r\n        else return images;\r\n    },\r\n\t_changeImage: function (carouselImages, random) {\r\n        let self = this;\r\n\t\tlet carouselImage = null;\r\n        if (random) {\r\n                this._changeStaticSlides(carouselImages, true);\r\n        } else {\r\n            let index = carouselImages.indexOf(this.lastImage);\r\n            let sendIndex = 0;\r\n            if (index == -1 || index == carouselImages.length - 1) {\r\n\t\t\t\tcarouselImage = carouselImages[0];\r\n\t\t\t} else {\r\n\t\t\t\tcarouselImage = carouselImages[index + 1]; \r\n\t\t\t\tsendIndex = index + 1;\r\n\t\t\t}\r\n            this.lastImage = carouselImage;\r\n            let isHome = buildfire.getFrameType() == 'LAUNCHER_PLUGIN';\r\n            let storagePlace = (isHome) ? \"carouselLastImageHome\" : \"carouselLastImage\";\r\n            buildfire.localStorage.setItem(storagePlace, sendIndex, function(e, r) {\r\n                self._changeStaticSlides(carouselImages);\r\n            });\r\n        }\r\n    },\r\n\t_changeStaticSlides: function (carouselImages, random) {\r\n\t\tlet activeSlide = document.querySelector('.js_slide.static_slide.active');\r\n\t\tlet siblingSlide = activeSlide.nextSibling;\r\n\t\tif (random) {\r\n\t\t\tlet nextSlide = document.querySelectorAll('.js_slide.static_slide')[Math.floor(Math.random() * carouselImages.length)];\r\n\t\t\tif (nextSlide.children[0].src == activeSlide.children[0].src) {\r\n\t\t\t\tthis._changeStaticSlides(carouselImages, true);\r\n\t\t\t} else {\r\n\t\t\t\tactiveSlide.classList.remove('active');\r\n\t\t\t\tnextSlide.classList.add('active');\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tactiveSlide.classList.remove('active');\r\n\t\t\tif (siblingSlide) {\r\n\t\t\t\tsiblingSlide.classList.add('active');\r\n\t\t\t} else {\r\n\t\t\t\tdocument.querySelector('.js_slide.static_slide').classList.add('active');\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t_renderStaticSlides: function (carouselImages) {\r\n\t\tlet self = this;\r\n\t\tthis.selector.innerHTML = '';\r\n\t\tcarouselImages.forEach((carouselImage, index) => {\r\n\t\t\tlet slide = document.createElement('div');\r\n\t\t\tslide.classList.add('js_slide', 'static_slide');\r\n\t\t\tif (index == 0 && !self.lastImage) {\r\n\t\t\t\tslide.classList.add('active');\r\n\t\t\t} else if (self.lastImage && self.lastImage.iconUrl == carouselImage.iconUrl) {\r\n\t\t\t\tslide.classList.add('active');\r\n\t\t\t}\r\n\t\t\tslide.addEventListener('click', function () {\r\n\t\t\t\tbuildfire.actionItems.execute(carouselImage, function (err, result) {\r\n\t\t\t\t\tif (err) {\r\n\t\t\t\t\t\tconsole.warn('Error opening slider action: ', err);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\r\n\t\t\tlet options = {\r\n\t\t\t\titem: carouselImage,\r\n\t\t\t\tslide: slide\r\n\t\t\t}\r\n\t\t\tself._cropImage(options, (err, result) => {\r\n\t\t\t\tif (err)  console.error('Error occurred while cropping image: ', err);\r\n\t\t\t\tself.selector.appendChild(slide);\r\n\t\t\t});\r\n\t\t});\r\n\t\tlet activeSlide = document.querySelector('.js_slide.static_slide.active');\r\n\t\tif (!activeSlide) {\r\n\t\t\tdocument.querySelector('.js_slide.static_slide').classList.add('active');\r\n\t\t}\r\n\t},\r\n\tmergeSettings: function (options) {\r\n\t\tvar settings = {\r\n\t\t\tselector: '.js_percentage',\r\n\t\t\titems: [],\r\n\t\t\tlayout: null,\r\n\t\t\tspeed: 200,\r\n\t\t\tloop: true,\r\n\t\t\tautoInterval: 5 * 1000,\r\n\t\t\tdisplay: 0,\r\n\t\t\torder: 0\r\n\t\t};\r\n\t\tvar userSettings = options;\r\n\t\tfor (var attrName in userSettings) {\r\n\t\t\tsettings[attrName] = userSettings[attrName];\r\n\t\t}\r\n\t\treturn settings;\r\n\t},\r\n\tinit: function () {\r\n\t\tif (!this.selector) {\r\n\t\t\tthrow ('selector not found');\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t// Add min-height to carousel to prevent it from pushing content down\r\n\t\tthis.selector.style['min-height'] = this._minHeight;\r\n\r\n\t\tvar self = this;\r\n\r\n\t\tfunction validateLauncherCarousel() {\r\n\t\t\tbuildfire.getContext(function (err, result) {\r\n\t\t\t\tif (result && result.device && result.device.platform && result.device.platform.toLowerCase() == 'ios' && buildfire.getFrameType() == 'LAUNCHER_PLUGIN') {\r\n\t\t\t\t\tbuildfire.navigation.onAppLauncherActive(function () {\r\n\t\t\t\t\t\tself._applySlider();\r\n\t\t\t\t\t}, true);\r\n\t\t\t\t\tbuildfire.navigation.onAppLauncherInactive(function () {\r\n\t\t\t\t\t\tself._destroySlider();\r\n\t\t\t\t\t}, true);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (this.config.items && this.config.items.length > 0) {\r\n\t\t\tthis._renderHTMLItems(function () {\r\n\t\t\t\tself._applySlider();\r\n\t\t\t\tvalidateLauncherCarousel();\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tself._applySlider();\r\n\t\t\tvalidateLauncherCarousel();\r\n\t\t}\r\n\t},\r\n\t_destroySlider: function () {\r\n\t\tif (this.timerInterval) {\r\n\t\t\tclearInterval(this.timerInterval);\r\n\t\t\tthis.timerInterval = null;\r\n\t\t}\r\n\t},\r\n\t_applySlider: function () {\r\n\t\tif (!this.lorySlider) {\r\n\t\t\tthis.lorySlider = lory(this.config.selector, {\r\n\t\t\t\tclassNameSlideContainer: this.config.classNameSlideContainer || 'js_slides',\r\n\t\t\t\tclassNameFrame: this.config.classNameFrame || 'js_frame',\r\n\t\t\t\tease: 'ease',\r\n\t\t\t\trewindSpeed: 600,//ms\r\n\t\t\t\tslideSpeed: this.config.speed,//ms\r\n\t\t\t\tslidesToScroll: this.config.slidesToScroll || 1,\r\n\t\t\t\tinfinite: this.config.infinite || 1,\r\n\t\t\t\tenableMouseEvents: true\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (this.config.loop && this.config.items && this.config.items.length > 1) {\r\n\t\t\tvar self = this;\r\n\r\n\t\t\tif (this.timerInterval) {\r\n\t\t\t\tclearInterval(this.timerInterval);\r\n\t\t\t\tthis.timerInterval = null;\r\n\t\t\t}\r\n\r\n\t\t\tthis.timerInterval = setInterval(function () {\r\n\t\t\t\tself.lorySlider.next();\r\n\t\t\t}, this.config.autoInterval);\r\n\t\t}\r\n\t},\r\n\t_renderHTMLItems: function (callback) {\r\n\t\tvar self = this;\r\n\r\n\t\twhile (this.selector.firstChild) {\r\n\t\t\tthis.selector.removeChild(this.selector.firstChild);\r\n\t\t}\r\n\r\n\t\tthis.sliderFrame = document.createElement('div');\r\n\t\t['loryFrame', 'js_frame'].forEach(function (cname) {\r\n\t\t\tself.sliderFrame.classList.add(cname);\r\n\t\t});\r\n\r\n\t\tthis.slideContainer = document.createElement('ul');\r\n\t\t['lorySlides', 'js_slides'].forEach(function (cname) {\r\n\t\t\tself.slideContainer.classList.add(cname);\r\n\t\t});\r\n\r\n\t\tthis._loadImages(this.config.items, function () {\r\n\t\t\t['slider', 'js_percentage', 'loryPercentage'].forEach(function (cname) {\r\n\t\t\t\tself.selector.classList.add(cname);\r\n\t\t\t});\r\n\r\n\t\t\tself.sliderFrame.appendChild(self.slideContainer);\r\n\t\t\tself.selector.appendChild(self.sliderFrame);\r\n\r\n\t\t\tcallback();\r\n\t\t});\r\n\t},\r\n\t_loadImages: function (items, callback) {\r\n\t\tvar self = this;\r\n\r\n\t\tvar itemsLength = items.length;\r\n\t\tvar pending = itemsLength;\r\n\r\n\t\tif (itemsLength == 0) {\r\n\t\t\tcallback();\r\n\t\t}\r\n\r\n\t\tfor (var i = 0; i < itemsLength; i++) {\r\n\t\t\tthis._appendItem(items[i], function (itemSlide) {\r\n\t\t\t\tpending--;\r\n\t\t\t\tself.slideContainer.appendChild(itemSlide);\r\n\r\n\t\t\t\tif (pending == 0) {\r\n\t\t\t\t\tcallback();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t},\r\n\t_appendItem: function (item, callback) {\r\n\t\tlet self = this;\r\n\t\tlet slide = document.createElement('li');\r\n\t\tslide.classList.add('js_slide');\r\n\r\n\t\tslide.addEventListener('click', function () {\r\n\t\t\tif (self.preventClicks) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tbuildfire.actionItems.execute(item, function (err, result) {\r\n\t\t\t\tif (err) {\r\n\t\t\t\t\tconsole.warn('Error opening slider action: ', err);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t\tlet options = { item, slide }\r\n\t\tthis._cropImage(options, (err, result) => {\r\n\t\t\tif (err)  console.error('Error occurred while cropping image: ', err);\r\n\t\t\tcallback(slide);\r\n\t\t});\r\n\t},\r\n\t// allows you to append a single item or an array of items\r\n\tappend: function (items) {\r\n\t\tif (!items)\r\n\t\t\treturn;\r\n\t\telse if (!(items instanceof Array) && typeof(items) == 'object')\r\n\t\t\titems = [items];\r\n\r\n\t\tif (items && items instanceof Array && items.length) {\r\n\t\t\tfor (var i = 0; i < items.length; i++) {\r\n\t\t\t\tthis.config.items.push(items[i]);\r\n\t\t\t}\r\n\t\t\tvar self = this;\r\n\t\t\tif (this.config.display == 0 && this.config.items.length > 1) {\r\n\t\t\t\tself.slideContainer.innerHTML = '';\r\n\t\t\t\tthis._loadImages(this.config.items, function () {\r\n\t\t\t\t\tself.lorySlider.setup();\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tthis._renderStaticSlides(this.config.items);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tloadItems: function (items, appendItems) {\r\n\t\tif (appendItems) {\r\n\t\t\tthis.append(items);\r\n\t\t} else {\r\n\t\t\tlet self = this;\r\n\t\t\tthis.config.items = items;\r\n\t\t\tif (this.config.display == 0 && items.length > 1) {\r\n\t\t\t\tif (this.config.order == 1) {\r\n\t\t\t\t\tthis._randomizeArray(items);\r\n\t\t\t\t}\r\n\t\t\t\tthis.slideContainer.innerHTML = '';\r\n\t\t\t\tthis._loadImages(items, function () {\r\n\t\t\t\t\tself.lorySlider.setup();\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tif (buildfire.components.carousel.view.lastCarouselTimer) {\r\n\t\t\t\t\tclearInterval(buildfire.components.carousel.view.lastCarouselTimer);\r\n\t\t\t\t\tbuildfire.components.carousel.view.lastCarouselTimer = null;\r\n\t\t\t\t}\r\n\t\t\t\tthis._renderStaticSlides(items);\r\n\t\t\t\tbuildfire.components.carousel.view.lastCarouselTimer = setInterval(this._changeImage.bind(this), this.config.autoInterval, items, this.config.order);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t_initDimensions: function (layout) {\r\n\t\tthis.width = window.innerWidth;\r\n\t\tlayout = layout || 'WideScreen';\r\n\t\tif (layout == 'WideScreen') {\r\n\t\t\tthis.height = Math.ceil(9 * this.width / 16);\r\n\t\t\tthis.aspect = '16:9';\r\n\t\t} else if (layout == 'Square') {\r\n\t\t\tthis.height = this.width;\r\n\t\t\tthis.aspect = '1:1';\r\n\t\t} else if (layout == 'Cinema') {\r\n\t\t\tthis.height = Math.ceil(1 * this.width / 2.39);\r\n\t\t\tthis.aspect = '2.39:1';\r\n\t\t} else if (layout == 'MobileScreen') {\r\n\t\t\tthis.height = (window.innerHeight / this.width) * this.width;\r\n\t\t\tthis.aspect = '9:16';\r\n\t\t}\r\n\r\n\t\tthis.cssWidth = this.width + 'px';\r\n\t\tif (this.height > 380) {\r\n\t\t\tthis.cssHeight = '380px';\r\n\t\t} else {\r\n\t\t\tthis.cssHeight = this.height + 'px';\r\n\t\t}\r\n\r\n\t\t// Set Min height on carousel so doesn't push content down on load.\r\n\t\tthis._minHeight = this.cssHeight;\r\n\t},\r\n\t_cropImage: function(options, callback) {\r\n\t\tlet self = this;\r\n\t\tlet { item, slide } = options;\r\n\t\tbuildfire.imageLib.local.cropImage(item.iconUrl, {\r\n\t\t\twidth: this.width,\r\n\t\t\theight: this.height,\r\n\t\t\taspect: this.aspect,\r\n\t\t\tsize: 'full_width',\r\n\t\t}, function (err, result) {\r\n\t\t\tif (!err) {\r\n\t\t\t\tlet image = document.createElement('img');\r\n\t\t\t\tlet backgroundImage = document.createElement('img');\r\n\t\t\t\timage.src = backgroundImage.src = result;\r\n\t\t\t\timage.alt = backgroundImage.alt = item.title || '';\r\n\t\t\t\tbackgroundImage.className = 'blurred-background-image';\r\n\t\t\t\tbackgroundImage.setAttribute('style', `width: 100% !important; transform: scale(1.2) !important;`);\r\n\t\t\t\tslide.style.overflow = 'hidden';\r\n\t\t\t\timage.style.transform = 'translateZ(0)';\r\n\t\t\t\tif (self.height > 380) {\r\n\t\t\t\t\tslide.appendChild(backgroundImage);\r\n\t\t\t\t}\r\n\t\t\t\tslide.appendChild(image);\r\n\t\t\t\tcallback(null, result);\r\n\t\t\t} else {\r\n\t\t\t\tcallback(err, null);\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\t_attachEventListeners: function() {\r\n\t\tlet self = this;\r\n\t\t// add event listeners to prevent immediate click event after scrolling \r\n\t\tthis.selector.addEventListener('on.lory.touchmove', function () {\r\n\t\t\tif (!self.preventClicks) {\r\n\t\t\t\tself.preventClicks = true;\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.selector.addEventListener('on.lory.touchend', function () {\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tself.preventClicks = false;\r\n\t\t\t}, 0);\r\n\t\t});\r\n\t}\r\n};\r\n"]}