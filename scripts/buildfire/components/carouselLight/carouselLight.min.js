"use strict";if("undefined"==typeof buildfire)throw"please add buildfire.js first to use carousel components";void 0===buildfire.components&&(buildfire.components={}),void 0===buildfire.components.carousel&&(buildfire.components.carousel={}),function(){for(var e=document.getElementsByTagName("script"),i=null,t=0;t<e.length;t++)e[t].src&&(e[t].src.toLowerCase().indexOf("buildfire/components/carousellight/carousellight.js")||e[t].src.toLowerCase().indexOf("buildfire/components/carousellight/carousellight.min.js"))&&(i=e[t].src);if(!i)throw"carousellight components not found";"undefined"==typeof lory&&document.write('<script src="'+i+'/../../../../lory/lory.min.js"><\/script>');var n=document.getElementById("loryInjectedStyle");n&&document.head.removeChild(n),(n=document.createElement("style")).id="loryInjectedStyle",n.innerHTML+=" .loryFrame {position: relative;font-size: 0; line-height: 0; overflow: hidden; white-space: nowrap;}",n.innerHTML+=" .loryFrame li { position: relative; display: inline-block; height: 100%;}",n.innerHTML+=" .lorySlides { display: inline-block;}",n.innerHTML+=" .loryPercentage .lorySlides { display: block; padding: 0px;}",n.innerHTML+=" .loryPercentage li {  width: 100%;}",n.innerHTML.length>0&&document.head.appendChild(n)}(),buildfire.components.carousel.view=function(e){arguments&&arguments.length>1&&(e={selector:arguments[0],items:arguments[1],layout:arguments[2],speed:arguments[3]}),this.config=this.mergeSettings(e),this._initDimensions(this.config.layout),this.init()},buildfire.components.carousel.view.prototype={mergeSettings:function(e){var i={selector:".js_percentage",items:[],layout:null,speed:200,loop:!0,autoInterval:5e3},t=e;for(var n in t)i[n]=t[n];return i},init:function(){if(this.selector="string"==typeof this.config.selector?document.querySelector(this.config.selector):this.config.selector,!this.selector)throw"selecter not found";var e=this;function i(){buildfire.getContext(function(i,t){t&&t.device&&t.device.platform&&"ios"==t.device.platform.toLowerCase()&&(buildfire.navigation.onAppLauncherActive(function(){e._applySlider()},!0),buildfire.navigation.onAppLauncherInactive(function(){e._destroySlider()},!0))})}this.config.items&&this.config.items.length>0?this._renderHTMLItems(function(){e._applySlider(),i()}):(e._applySlider(),i())},_destroySlider:function(){this.lorySlider.destroy(),this.timerInterval&&(clearInterval(this.timerInterval),this.timerInterval=null)},_applySlider:function(){if(this.lorySlider=lory(this.config.selector,{classNameSlideContainer:this.config.classNameSlideContainer||"js_slides",classNameFrame:this.config.classNameFrame||"js_frame",ease:"ease",rewindSpeed:600,slideSpeed:this.config.speed,slidesToScroll:this.config.slidesToScroll||1,infinite:this.config.infinite||1,enableMouseEvents:!0}),this.config.loop&&this.config.items&&this.config.items.length>1){var e=this;this.timerInterval&&(clearInterval(this.timerInterval),this.timerInterval=null),this.timerInterval=setInterval(function(){e.lorySlider.next()},this.config.autoInterval)}},_renderHTMLItems:function(e){for(var i=this;this.selector.firstChild;)this.selector.removeChild(this.selector.firstChild);this.sliderFrame=document.createElement("div"),["loryFrame","js_frame"].forEach(function(e){i.sliderFrame.classList.add(e)}),this.slideContainer=document.createElement("ul"),["lorySlides","js_slides"].forEach(function(e){i.slideContainer.classList.add(e)}),this._loadImages(this.config.items,function(){["slider","js_percentage","loryPercentage"].forEach(function(e){i.selector.classList.add(e)}),i.sliderFrame.appendChild(i.slideContainer),i.selector.appendChild(i.sliderFrame),e()})},_loadImages:function(e,i){var t=this,n=e.length,s=n;0==n&&i();for(var r=0;r<n;r++)this._appendItem(e[r],function(e){s--,t.slideContainer.appendChild(e),0==s&&i()})},_appendItem:function(e,i){var t=document.createElement("li");t.classList.add("js_slide"),t.addEventListener("click",function(){buildfire.actionItems.execute(e,function(e,i){e&&console.warn("Error openning slider action: ",e)})}),buildfire.imageLib.local.cropImage(e.iconUrl,{width:this.width,height:this.height},function(e,n){if(e)console.log("Error occurred while cropping image: ",e);else{var s=document.createElement("img");s.src=n,t.appendChild(s)}i(t)})},append:function(e){if(e&&(e instanceof Array||"object"!=typeof e||(e=[e]),e&&e instanceof Array&&e.length)){for(var i=0;i<e.length;i++)this.items.push(e[i]);var t=this;this._loadImages(e,function(){t._applySlider()})}},_initDimensions:function(e){this.width=window.innerWidth,"WideScreen"==(e=e||"WideScreen")?this.height=Math.ceil(9*this.width/16):"Square"==e?this.height=this.width:"Cinema"==e?this.height=Math.ceil(1*this.width/2.39):"MobileScreen"==e&&(this.height=window.innerHeight/this.width*this.width,this.width=this.width),this.cssWidth=this.width+"px",this.height>380?this.cssHeight="380px":this.cssHeight=this.height+"px",this._minHeight="180px",this._minHeight=this.cssHeight}};
//# sourceMappingURL=carouselLight.min.js.map
